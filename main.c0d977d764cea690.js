"use strict";(self.webpackChunkshiningwars01=self.webpackChunkshiningwars01||[]).push([[179],{262:()=>{function Ce(t){return"function"==typeof t}function Mu(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const gp=Mu(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function dl(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Nn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ce(r))try{r()}catch(s){e=s instanceof gp?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Mk(s)}catch(o){e=e??[],o instanceof gp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Mk(e);else{if(e instanceof Nn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&dl(n,e)}remove(e){const{_finalizers:n}=this;n&&dl(n,e),e instanceof Nn&&e._removeParent(this)}}Nn.EMPTY=(()=>{const t=new Nn;return t.closed=!0,t})();const Ak=Nn.EMPTY;function xk(t){return t instanceof Nn||t&&"closed"in t&&Ce(t.remove)&&Ce(t.add)&&Ce(t.unsubscribe)}function Mk(t){Ce(t)?t():t.unsubscribe()}const Bo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},mp={setTimeout(t,e,...n){const{delegate:r}=mp;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=mp;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rk(t){mp.setTimeout(()=>{const{onUnhandledError:e}=Bo;if(!e)throw t;e(t)})}function mw(){}const L9=_w("C",void 0,void 0);function _w(t,e,n){return{kind:t,value:e,error:n}}let Uo=null;function _p(t){if(Bo.useDeprecatedSynchronousErrorHandling){const e=!Uo;if(e&&(Uo={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Uo;if(Uo=null,n)throw r}}else t()}class yw extends Nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xk(e)&&e.add(this)):this.destination=z9}static create(e,n,r){return new Ru(e,n,r)}next(e){this.isStopped?ww(function B9(t){return _w("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ww(function V9(t){return _w("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ww(L9,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const j9=Function.prototype.bind;function vw(t,e){return j9.call(t,e)}class $9{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){yp(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){yp(r)}else yp(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){yp(n)}}}class Ru extends yw{constructor(e,n,r){let i;if(super(),Ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Bo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vw(e.next,s),error:e.error&&vw(e.error,s),complete:e.complete&&vw(e.complete,s)}):i=e}this.destination=new $9(i)}}function yp(t){Bo.useDeprecatedSynchronousErrorHandling?function U9(t){Bo.useDeprecatedSynchronousErrorHandling&&Uo&&(Uo.errorThrown=!0,Uo.error=t)}(t):Rk(t)}function ww(t,e){const{onStoppedNotification:n}=Bo;n&&mp.setTimeout(()=>n(t,e))}const z9={closed:!0,next:mw,error:function H9(t){throw t},complete:mw},bw="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fs(t){return t}function Ew(...t){return kk(t)}function kk(t){return 0===t.length?Fs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let He=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function q9(t){return t&&t instanceof yw||function G9(t){return t&&Ce(t.next)&&Ce(t.error)&&Ce(t.complete)}(t)&&xk(t)}(n)?n:new Ru(n,r,i);return _p(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Nk(r))((i,s)=>{const o=new Ru({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[bw](){return this}pipe(...n){return kk(n)(this)}toPromise(n){return new(n=Nk(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Nk(t){var e;return null!==(e=t??Bo.Promise)&&void 0!==e?e:Promise}const W9=Mu(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ze=(()=>{class t extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ok(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new W9}next(n){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_p(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Ak:(this.currentObservers=null,s.push(n),new Nn(()=>{this.currentObservers=null,dl(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new He;return n.source=this,n}}return t.create=(e,n)=>new Ok(e,n),t})();class Ok extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Ak}}class br extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Pk(t){return Ce(t?.lift)}function Dt(t){return e=>{if(Pk(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(t,e,n,r,i){return new K9(t,e,n,r,i)}class K9 extends yw{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ye(t,e){return Dt((n,r)=>{let i=0;n.subscribe(ft(r,s=>{r.next(t.call(e,s,i++))}))})}function Dw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Ls(t){return this instanceof Ls?(this.v=t,this):new Ls(t)}function Bk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Sw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Aw=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Uk(t){return Ce(t?.then)}function jk(t){return Ce(t[bw])}function $k(t){return Symbol.asyncIterator&&Ce(t?.[Symbol.asyncIterator])}function Hk(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const zk=function g8(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Gk(t){return Ce(t?.[zk])}function qk(t){return function Vk(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Ls?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Ls(n.read());if(i)return yield Ls(void 0);yield yield Ls(r)}}finally{n.releaseLock()}})}function Wk(t){return Ce(t?.getReader)}function Wn(t){if(t instanceof He)return t;if(null!=t){if(jk(t))return function m8(t){return new He(e=>{const n=t[bw]();if(Ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Aw(t))return function _8(t){return new He(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Uk(t))return function y8(t){return new He(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rk)})}(t);if($k(t))return Kk(t);if(Gk(t))return function v8(t){return new He(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Wk(t))return function w8(t){return Kk(qk(t))}(t)}throw Hk(t)}function Kk(t){return new He(e=>{(function b8(t,e){var n,r,i,s;return function Fk(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Bk(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function ts(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function tn(t,e,n=1/0){return Ce(e)?tn((r,i)=>ye((s,o)=>e(r,s,i,o))(Wn(t(r,i))),n):("number"==typeof e&&(n=e),Dt((r,i)=>function E8(t,e,n,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let _=!1;Wn(n(g,u++)).subscribe(ft(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){const v=l.shift();o?ts(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(ft(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function hl(t=1/0){return tn(Fs,t)}const gi=new He(t=>t.complete());function Yk(t){return t&&Ce(t.schedule)}function xw(t){return t[t.length-1]}function Qk(t){return Ce(xw(t))?t.pop():void 0}function ku(t){return Yk(xw(t))?t.pop():void 0}function vp(t,e=0){return Dt((n,r)=>{n.subscribe(ft(r,i=>ts(r,t,()=>r.next(i),e),()=>ts(r,t,()=>r.complete(),e),i=>ts(r,t,()=>r.error(i),e)))})}function wp(t,e=0){return Dt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Xk(t,e){if(!t)throw new Error("Iterable cannot be null");return new He(n=>{ts(n,e,()=>{const r=t[Symbol.asyncIterator]();ts(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qt(t,e){return e?function M8(t,e){if(null!=t){if(jk(t))return function D8(t,e){return Wn(t).pipe(wp(e),vp(e))}(t,e);if(Aw(t))return function S8(t,e){return new He(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Uk(t))return function T8(t,e){return Wn(t).pipe(wp(e),vp(e))}(t,e);if($k(t))return Xk(t,e);if(Gk(t))return function A8(t,e){return new He(n=>{let r;return ts(n,e,()=>{r=t[zk](),ts(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ce(r?.return)&&r.return()})}(t,e);if(Wk(t))return function x8(t,e){return Xk(qk(t),e)}(t,e)}throw Hk(t)}(t,e):Wn(t)}function Mw(...t){const e=ku(t),n=function I8(t,e){return"number"==typeof xw(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Wn(r[0]):hl(n)(qt(r,e)):gi}function Y(...t){return qt(t,ku(t))}function Zk(t={}){const{connector:e=(()=>new ze),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Dt((g,_)=>{c++,!d&&!u&&h();const v=l=l??e();_.add(()=>{c--,0===c&&!d&&!u&&(a=Rw(p,i))}),v.subscribe(_),!o&&c>0&&(o=new Ru({next:y=>v.next(y),error:y=>{d=!0,h(),a=Rw(f,n,y),v.error(y)},complete:()=>{u=!0,h(),a=Rw(f,r),v.complete()}}),Wn(g).subscribe(o))})(s)}}function Rw(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ru({next:()=>{r.unsubscribe(),t()}});return Wn(e(...n)).subscribe(r)}function Qr(t,e){return Dt((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ft(r,l=>{i?.unsubscribe();let c=0;const u=s++;Wn(t(l,u)).subscribe(i=ft(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Jk(t,e=Fs){return t=t??R8,Dt((n,r)=>{let i,s=!0;n.subscribe(ft(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function R8(t,e){return t===e}function Be(t){for(let e in t)if(t[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function bp(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function kw(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const k8=Be({__forward_ref__:Be});function Xe(t){return t.__forward_ref__=Xe,t.toString=function(){return Wt(this())},t}function te(t){return Nw(t)?t():t}function Nw(t){return"function"==typeof t&&t.hasOwnProperty(k8)&&t.__forward_ref__===Xe}function Ow(t){return t&&!!t.\u0275providers}const eN="https://g.co/ng/security#xss";class M extends Error{constructor(e,n){super(function Ep(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ie(t){return"string"==typeof t?t:null==t?"":String(t)}function Pw(t,e){throw new M(-201,!1)}function Fr(t,e){null==t&&function X(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function F(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ge(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cp(t){return tN(t,Dp)||tN(t,nN)}function tN(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ip(t){return t&&(t.hasOwnProperty(Fw)||t.hasOwnProperty(U8))?t[Fw]:null}const Dp=Be({\u0275prov:Be}),Fw=Be({\u0275inj:Be}),nN=Be({ngInjectableDef:Be}),U8=Be({ngInjectorDef:Be});var pe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(pe||{});let Lw;function or(t){const e=Lw;return Lw=t,e}function iN(t,e,n){const r=Cp(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&pe.Optional?null:void 0!==e?e:void Pw(Wt(t))}const qe=globalThis,Nu={},$w="__NG_DI_FLAG__",Tp="ngTempTokenPath",H8=/\n/gm,oN="__source";let fl;function Vs(t){const e=fl;return fl=t,e}function q8(t,e=pe.Default){if(void 0===fl)throw new M(-203,!1);return null===fl?iN(t,void 0,e):fl.get(t,e&pe.Optional?null:void 0,e)}function C(t,e=pe.Default){return(function rN(){return Lw}()||q8)(te(t),e)}function $(t,e=pe.Default){return C(t,Sp(e))}function Sp(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Hw(t){const e=[];for(let n=0;n<t.length;n++){const r=te(t[n]);if(Array.isArray(r)){if(0===r.length)throw new M(900,!1);let i,s=pe.Default;for(let o=0;o<r.length;o++){const a=r[o],l=W8(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(C(i,s))}else e.push(C(r))}return e}function Ou(t,e){return t[$w]=e,t.prototype[$w]=e,t}function W8(t){return t[$w]}function ns(t){return{toString:t}.toString()}var Ap=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ap||{}),Xr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xr||{});const mi={},Re=[],xp=Be({\u0275cmp:Be}),zw=Be({\u0275dir:Be}),Gw=Be({\u0275pipe:Be}),lN=Be({\u0275mod:Be}),rs=Be({\u0275fac:Be}),Pu=Be({__NG_ELEMENT_ID__:Be}),cN=Be({__NG_ENV_ID__:Be});function uN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function qw(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];hN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function dN(t){return 3===t||4===t||6===t}function hN(t){return 64===t.charCodeAt(0)}function Fu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||fN(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function fN(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const pN="ng-template";function Q8(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==uN(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function gN(t){return 4===t.type&&t.value!==pN}function X8(t,e,n){return e===(4!==t.type||n?t.value:pN)}function Z8(t,e,n){let r=4;const i=t.attrs||[],s=function t7(t){for(let e=0;e<t.length;e++)if(dN(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!X8(t,l,n)||""===l&&1===e.length){if(Zr(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!Q8(t.attrs,c,n)){if(Zr(r))return!1;o=!0}continue}const d=J8(8&r?"class":l,i,gN(t),n);if(-1===d){if(Zr(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==uN(f,c,0)||2&r&&c!==h){if(Zr(r))return!1;o=!0}}}}else{if(!o&&!Zr(r)&&!Zr(l))return!1;if(o&&Zr(l))continue;o=!1,r=l|1&r}}return Zr(r)||o}function Zr(t){return 0==(1&t)}function J8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function n7(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function mN(t,e,n=!1){for(let r=0;r<e.length;r++)if(Z8(t,e[r],n))return!0;return!1}function _N(t,e){return t?":not("+e.trim()+")":e}function i7(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Zr(o)&&(e+=_N(s,i),i=""),r=o,s=s||!Zr(r);n++}return""!==i&&(e+=_N(s,i)),e}function Tt(t){return ns(()=>{const e=vN(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ap.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xr.Emulated,styles:t.styles||Re,_:null,schemas:t.schemas||null,tView:null,id:""};wN(n);const r=t.dependencies;return n.directiveDefs=Mp(r,!1),n.pipeDefs=Mp(r,!0),n.id=function h7(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function l7(t){return De(t)||yn(t)}function c7(t){return null!==t}function Ze(t){return ns(()=>({type:t.type,bootstrap:t.bootstrap||Re,declarations:t.declarations||Re,imports:t.imports||Re,exports:t.exports||Re,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function yN(t,e){if(null==t)return mi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function J(t){return ns(()=>{const e=vN(t);return wN(e),e})}function De(t){return t[xp]||null}function yn(t){return t[zw]||null}function Kn(t){return t[Gw]||null}function Cr(t,e){const n=t[lN]||null;if(!n&&!0===e)throw new Error(`Type ${Wt(t)} does not have '\u0275mod' property.`);return n}function vN(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||mi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Re,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yN(t.inputs,e),outputs:yN(t.outputs)}}function wN(t){t.features?.forEach(e=>e(t))}function Mp(t,e){if(!t)return null;const n=e?Kn:l7;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(c7)}const Nt=0,H=1,le=2,pt=3,Jr=4,Lu=5,On=6,gl=7,Ot=8,Bs=9,ml=10,se=11,Vu=12,bN=13,_l=14,Pt=15,Bu=16,yl=17,_i=18,Uu=19,EN=20,Us=21,is=22,Rp=23,kp=24,ve=25,Ww=1,CN=2,yi=7,vl=9,vn=11;function lr(t){return Array.isArray(t)&&"object"==typeof t[Ww]}function cr(t){return Array.isArray(t)&&!0===t[Ww]}function Kw(t){return 0!=(4&t.flags)}function $o(t){return t.componentOffset>-1}function Op(t){return 1==(1&t.flags)}function ei(t){return!!t.template}function Yw(t){return 0!=(512&t[le])}function Ho(t,e){return t.hasOwnProperty(rs)?t[rs]:null}let y7=qe.WeakRef??class _7{constructor(e){this.ref=e}deref(){return this.ref}},w7=0,vi=null,Pp=!1;function nn(t){const e=vi;return vi=t,e}class AN{constructor(){this.id=w7++,this.ref=function v7(t){return new y7(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Pp;Pp=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{Pp=e}}producerAccessed(){if(Pp)throw new Error("");if(null===vi)return;let e=vi.producers.get(this.id);void 0===e?(e={consumerNode:vi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:vi.trackingVersion},vi.producers.set(this.id,e),this.consumers.set(vi.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=vi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==vi?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let xN=null;const RN=()=>{};class I7 extends AN{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=RN,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=nn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=RN,this.watch(this.registerOnCleanup)}finally{nn(e)}}cleanup(){this.cleanupFn()}}class D7{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Lr(){return kN}function kN(t){return t.type.prototype.ngOnChanges&&(t.setInput=S7),T7}function T7(){const t=ON(this),e=t?.current;if(e){const n=t.previous;if(n===mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function S7(t,e,n,r){const i=this.declaredInputs[n],s=ON(t)||function A7(t,e){return t[NN]=e}(t,{previous:mi,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new D7(l&&l.currentValue,e,a===mi),t[r]=e}Lr.ngInherit=!0;const NN="__ngSimpleChanges__";function ON(t){return t[NN]||null}const wi=function(t,e,n){};function Je(t){for(;Array.isArray(t);)t=t[Nt];return t}function Vp(t,e){return Je(e[t])}function ur(t,e){return Je(e[t.index])}function LN(t,e){return t.data[e]}function Ir(t,e){const n=e[t];return lr(n)?n:n[Nt]}function js(t,e){return null==e?null:t[e]}function VN(t){t[yl]=0}function P7(t){1024&t[le]||(t[le]|=1024,UN(t,1))}function BN(t){1024&t[le]&&(t[le]&=-1025,UN(t,-1))}function UN(t,e){let n=t[pt];if(null===n)return;n[Lu]+=e;let r=n;for(n=n[pt];null!==n&&(1===e&&1===r[Lu]||-1===e&&0===r[Lu]);)n[Lu]+=e,r=n,n=n[pt]}const ee={lFrame:XN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function HN(){return ee.bindingsEnabled}function S(){return ee.lFrame.lView}function Te(){return ee.lFrame.tView}function st(t){return ee.lFrame.contextLView=t,t[Ot]}function ot(t){return ee.lFrame.contextLView=null,t}function wn(){let t=zN();for(;null!==t&&64===t.type;)t=t.parent;return t}function zN(){return ee.lFrame.currentTNode}function bi(t,e){const n=ee.lFrame;n.currentTNode=t,n.isParent=e}function tb(){return ee.lFrame.isParent}function El(){return ee.lFrame.bindingIndex++}function os(t){const e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function W7(t,e){const n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,rb(e)}function rb(t){ee.lFrame.currentDirectiveIndex=t}function KN(){return ee.lFrame.currentQueryIndex}function sb(t){ee.lFrame.currentQueryIndex=t}function Y7(t){const e=t[H];return 2===e.type?e.declTNode:1===e.type?t[On]:null}function YN(t,e,n){if(n&pe.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&pe.Host||(i=Y7(s),null===i||(s=s[_l],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ee.lFrame=QN();return r.currentTNode=e,r.lView=t,!0}function ob(t){const e=QN(),n=t[H];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QN(){const t=ee.lFrame,e=null===t?null:t.child;return null===e?XN(t):e}function XN(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ZN(){const t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const JN=ZN;function ab(){const t=ZN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qn(){return ee.lFrame.selectedIndex}function zo(t){ee.lFrame.selectedIndex=t}function vt(){const t=ee.lFrame;return LN(t.tView,t.selectedIndex)}let tO=!0;function Bp(){return tO}function $s(t){tO=t}function Up(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function jp(t,e,n){nO(t,e,3,n)}function $p(t,e,n,r){(3&t[le])===n&&nO(t,e,n,r)}function lb(t,e){let n=t[le];(3&n)===e&&(n&=8191,n+=1,t[le]=n)}function nO(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[yl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[yl]+=65536),(a<s||-1==s)&&(rK(t,n,e,l),t[yl]=(4294901760&t[yl])+l+2),l++}function rO(t,e){wi(4,t,e);const n=nn(null);try{e.call(t)}finally{nn(n),wi(5,t,e)}}function rK(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[le]>>13<t[yl]>>16&&(3&t[le])===e&&(t[le]+=8192,rO(a,s)):rO(a,s)}const Cl=-1;class Hu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ub(t){return t!==Cl}function zu(t){return 32767&t}function Gu(t,e){let n=function aK(t){return t>>16}(t),r=e;for(;n>0;)r=r[_l],n--;return r}let db=!0;function Hp(t){const e=db;return db=t,e}const iO=255,sO=5;let lK=0;const Ei={};function zp(t,e){const n=oO(t,e);if(-1!==n)return n;const r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,hb(r.data,t),hb(e,null),hb(r.blueprint,null));const i=Gp(t,e),s=t.injectorIndex;if(ub(i)){const o=zu(i),a=Gu(i,e),l=a[H].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function hb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function oO(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Gp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=fO(i),null===r)return Cl;if(n++,i=i[_l],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Cl}function fb(t,e,n){!function cK(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pu)&&(r=n[Pu]),null==r&&(r=n[Pu]=lK++);const i=r&iO;e.data[t+(i>>sO)]|=1<<i}(t,e,n)}function aO(t,e,n){if(n&pe.Optional||void 0!==t)return t;Pw()}function lO(t,e,n,r){if(n&pe.Optional&&void 0===r&&(r=null),!(n&(pe.Self|pe.Host))){const i=t[Bs],s=or(void 0);try{return i?i.get(e,r,n&pe.Optional):iN(e,r,n&pe.Optional)}finally{or(s)}}return aO(r,0,n)}function cO(t,e,n,r=pe.Default,i){if(null!==t){if(2048&e[le]&&!(r&pe.Self)){const o=function gK(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[le]&&!(512&o[le]);){const a=uO(s,o,n,r|pe.Self,Ei);if(a!==Ei)return a;let l=s.parent;if(!l){const c=o[EN];if(c){const u=c.get(n,Ei,r);if(u!==Ei)return u}l=fO(o),o=o[_l]}s=l}return i}(t,e,n,r,Ei);if(o!==Ei)return o}const s=uO(t,e,n,r,Ei);if(s!==Ei)return s}return lO(e,n,r,i)}function uO(t,e,n,r,i){const s=function hK(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Pu)?t[Pu]:void 0;return"number"==typeof e?e>=0?e&iO:pK:e}(n);if("function"==typeof s){if(!YN(e,t,r))return r&pe.Host?aO(i,0,r):lO(e,n,r,i);try{let o;if(o=s(r),null!=o||r&pe.Optional)return o;Pw()}finally{JN()}}else if("number"==typeof s){let o=null,a=oO(t,e),l=Cl,c=r&pe.Host?e[Pt][On]:null;for((-1===a||r&pe.SkipSelf)&&(l=-1===a?Gp(t,e):e[a+8],l!==Cl&&hO(r,!1)?(o=e[H],a=zu(l),e=Gu(l,e)):a=-1);-1!==a;){const u=e[H];if(dO(s,a,u.data)){const d=dK(a,e,n,o,r,c);if(d!==Ei)return d}l=e[a+8],l!==Cl&&hO(r,e[H].data[a+8]===c)&&dO(s,a,e)?(o=u,a=zu(l),e=Gu(l,e)):a=-1}}return i}function dK(t,e,n,r,i,s){const o=e[H],a=o.data[t+8],u=qp(a,o,n,null==r?$o(a)&&db:r!=o&&0!=(3&a.type),i&pe.Host&&s===a);return null!==u?Go(e,o,u,a):Ei}function qp(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,u=s>>20,h=i?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(i){const f=o[l];if(f&&ei(f)&&f.type===n)return l}return null}function Go(t,e,n,r){let i=t[n];const s=e.data;if(function iK(t){return t instanceof Hu}(i)){const o=i;o.resolving&&function N8(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Le(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ie(t)}(s[n]));const a=Hp(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?or(o.injectImpl):null;YN(t,r,pe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function nK(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=kN(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&or(c),Hp(a),o.resolving=!1,JN()}}return i}function dO(t,e,n){return!!(n[e+(t>>sO)]&1<<t)}function hO(t,e){return!(t&pe.Self||t&pe.Host&&e)}class Xn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return cO(this._tNode,this._lView,e,Sp(r),n)}}function pK(){return new Xn(wn(),S())}function bn(t){return ns(()=>{const e=t.prototype.constructor,n=e[rs]||pb(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[rs]||pb(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function pb(t){return Nw(t)?()=>{const e=pb(te(t));return e&&e()}:Ho(t)}function fO(t){const e=t[H],n=e.type;return 2===n?e.declTNode:1===n?t[On]:null}const Dl="__parameters__";function Sl(t,e,n){return ns(()=>{const r=function gb(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Dl)?l[Dl]:Object.defineProperty(l,Dl,{value:[]})[Dl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function xl(t,e){t.forEach(n=>Array.isArray(n)?xl(n,e):e(n))}function gO(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Dr(t,e,n){let r=Ml(t,e);return r>=0?t[1|r]=n:(r=~r,function EK(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mb(t,e){const n=Ml(t,e);if(n>=0)return t[1|n]}function Ml(t,e){return function mO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Yt=Ou(Sl("Optional"),8),Qp=Ou(Sl("SkipSelf"),4);function tg(t){return 128==(128&t.flags)}var Hs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Hs||{});const bb=new Map;let qK=0;const Cb="__ngContext__";function Pn(t,e){lr(e)?(t[Cb]=e[Uu],function KK(t){bb.set(t[Uu],t)}(e)):t[Cb]=e}let Ib;function Db(t,e){return Ib(t,e)}function Xu(t){const e=t[pt];return cr(e)?e[pt]:e}function FO(t){return VO(t[Vu])}function LO(t){return VO(t[Jr])}function VO(t){for(;null!==t&&!cr(t);)t=t[Jr];return t}function Nl(t,e,n,r,i){if(null!=r){let s,o=!1;cr(r)?s=r:lr(r)&&(o=!0,r=r[Nt]);const a=Je(r);0===t&&null!==n?null==i?$O(e,n,a):qo(e,n,a,i||null,!0):1===t&&null!==n?qo(e,n,a,i||null,!0):2===t?function lg(t,e,n){const r=og(t,e);r&&function fY(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function mY(t,e,n,r,i){const s=n[yi];s!==Je(n)&&Nl(e,t,r,s,i);for(let a=vn;a<n.length;a++){const l=n[a];Ju(l[H],l,t,e,r,s)}}(e,t,s,n,i)}}function ig(t,e,n){return t.createElement(e,n)}function UO(t,e){const n=t[vl],r=n.indexOf(e);BN(e),n.splice(r,1)}function sg(t,e){if(t.length<=vn)return;const n=vn+e,r=t[n];if(r){const i=r[Bu];null!==i&&i!==t&&UO(i,r),e>0&&(t[n-1][Jr]=r[Jr]);const s=Kp(t,vn+e);!function sY(t,e){Ju(t,e,e[se],2,null,null),e[Nt]=null,e[On]=null}(r[H],r);const o=s[_i];null!==o&&o.detachView(s[H]),r[pt]=null,r[Jr]=null,r[le]&=-129}return r}function Sb(t,e){if(!(256&e[le])){const n=e[se];e[Rp]?.destroy(),e[kp]?.destroy(),n.destroyNode&&Ju(t,e,n,3,null,null),function lY(t){let e=t[Vu];if(!e)return Ab(t[H],t);for(;e;){let n=null;if(lr(e))n=e[Vu];else{const r=e[vn];r&&(n=r)}if(!n){for(;e&&!e[Jr]&&e!==t;)lr(e)&&Ab(e[H],e),e=e[pt];null===e&&(e=t),lr(e)&&Ab(e[H],e),n=e&&e[Jr]}e=n}}(e)}}function Ab(t,e){if(!(256&e[le])){e[le]&=-129,e[le]|=256,function hY(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Hu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];wi(4,a,l);try{l.call(a)}finally{wi(5,a,l)}}else{wi(4,i,s);try{s.call(i)}finally{wi(5,i,s)}}}}}(t,e),function dY(t,e){const n=t.cleanup,r=e[gl];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[gl]=null);const i=e[Us];if(null!==i){e[Us]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[H].type&&e[se].destroy();const n=e[Bu];if(null!==n&&cr(e[pt])){n!==e[pt]&&UO(n,e);const r=e[_i];null!==r&&r.detachView(t)}!function YK(t){bb.delete(t[Uu])}(e)}}function xb(t,e,n){return function jO(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Nt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xr.None||s===Xr.Emulated)return null}return ur(r,n)}}(t,e.parent,n)}function qo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function $O(t,e,n){t.appendChild(e,n)}function HO(t,e,n,r,i){null!==r?qo(t,e,n,r,i):$O(t,e,n)}function og(t,e){return t.parentNode(e)}let Mb,Ob,qO=function GO(t,e,n){return 40&t.type?ur(t,n):null};function ag(t,e,n,r){const i=xb(t,r,e),s=e[se],a=function zO(t,e,n){return qO(t,e,n)}(r.parent||e[On],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)HO(s,i,n[l],a,!1);else HO(s,i,n,a,!1);void 0!==Mb&&Mb(s,r,e,n,i)}function Zu(t,e){if(null!==e){const n=e.type;if(3&n)return ur(e,t);if(4&n)return Rb(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Zu(t,r);{const i=t[e.index];return cr(i)?Rb(-1,i):Je(i)}}if(32&n)return Db(e,t)()||Je(t[e.index]);{const r=KO(t,e);return null!==r?Array.isArray(r)?r[0]:Zu(Xu(t[Pt]),r):Zu(t,e.next)}}return null}function KO(t,e){return null!==e?t[Pt][On].projection[e.projection]:null}function Rb(t,e){const n=vn+t+1;if(n<e.length){const r=e[n],i=r[H].firstChild;if(null!==i)return Zu(r,i)}return e[yi]}function kb(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&Pn(Je(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)kb(t,e,n.child,r,i,s,!1),Nl(e,t,i,a,s);else if(32&l){const c=Db(n,r);let u;for(;u=c();)Nl(e,t,i,u,s);Nl(e,t,i,a,s)}else 16&l?QO(t,e,r,n,i,s):Nl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ju(t,e,n,r,i,s){kb(n,r,t.firstChild,e,i,s,!1)}function QO(t,e,n,r,i,s){const o=n[Pt],l=o[On].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Nl(e,t,i,l[c],s);else{let c=l;const u=o[pt];tg(r)&&(c.flags|=128),kb(t,e,c,u,i,s,!0)}}function XO(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZO(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&qw(t,e,r),null!==i&&XO(t,e,i),null!==s&&function yY(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class nP{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eN})`}}function zs(t){return t instanceof nP?t.changingThisBreaksApplicationSecurity:t}const kY=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Fl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Fl||{});function Tr(t){const e=function nd(){const t=S();return t&&t[ml].sanitizer}();return e?e.sanitize(Fl.URL,t)||"":function ed(t,e){const n=function AY(t){return t instanceof nP&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${eN})`)}return n===e}(t,"URL")?zs(t):function Fb(t){return(t=String(t)).match(kY)?t:"unsafe:"+t}(ie(t))}class k{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=F({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rd=new k("ENVIRONMENT_INITIALIZER"),dP=new k("INJECTOR",-1),hP=new k("INJECTOR_DEF_TYPES");class Ub{get(e,n=Nu){if(n===Nu){const r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return n}}function GY(...t){return{\u0275providers:fP(0,t),\u0275fromNgModule:!0}}function fP(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return xl(e,o=>{const a=o;hg(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&pP(i,s),n}function pP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];$b(i,s=>{e(s,r)})}}function hg(t,e,n,r){if(!(t=te(t)))return!1;let i=null,s=Ip(t);const o=!s&&De(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const l=t.ngModule;if(s=Ip(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)hg(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{xl(s.imports,u=>{hg(u,e,n,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&pP(c,e)}if(!a){const c=Ho(i)||(()=>new i);e({provide:i,useFactory:c,deps:Re},i),e({provide:hP,useValue:i,multi:!0},i),e({provide:rd,useValue:()=>C(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=t;$b(l,u=>{e(u,c)})}}}return i!==t&&void 0!==t.providers}function $b(t,e){for(let n of t)Ow(n)&&(n=n.\u0275providers),Array.isArray(n)?$b(n,e):e(n)}const qY=Be({provide:String,useValue:Be});function Hb(t){return null!==t&&"object"==typeof t&&qY in t}function Wo(t){return"function"==typeof t}const zb=new k("Set Injector scope."),fg={},KY={};let Gb;function pg(){return void 0===Gb&&(Gb=new Ub),Gb}class Sr{}class gg extends Sr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wb(e,o=>this.processProvider(o)),this.records.set(dP,Ll(void 0,this)),i.has("environment")&&this.records.set(Sr,Ll(void 0,this));const s=this.records.get(zb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hP.multi,Re,pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Vs(this),r=or(void 0);try{return e()}finally{Vs(n),or(r)}}get(e,n=Nu,r=pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cN))return e[cN](this);r=Sp(r);const s=Vs(this),o=or(void 0);try{if(!(r&pe.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function JY(t){return"function"==typeof t||"object"==typeof t&&t instanceof k}(e)&&Cp(e);l=c&&this.injectableDefInScope(c)?Ll(qb(e),fg):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&pe.Self?pg():this.parent).get(e,n=r&pe.Optional&&n===Nu?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Tp]=a[Tp]||[]).unshift(Wt(e)),s)throw a;return function K8(t,e,n,r){const i=t[Tp];throw e[oN]&&i.unshift(e[oN]),t.message=function Y8(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Wt(e);if(Array.isArray(e))i=e.map(Wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Wt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(H8,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Tp]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{or(o),Vs(s)}}resolveInjectorInitializers(){const e=Vs(this),n=or(void 0);try{const i=this.get(rd.multi,Re,pe.Self);for(const s of i)s()}finally{Vs(e),or(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){let n=Wo(e=te(e))?e:te(e&&e.provide);const r=function QY(t){return Hb(t)?Ll(void 0,t.useValue):Ll(_P(t),fg)}(e);if(Wo(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ll(void 0,fg,!0),i.factory=()=>Hw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===fg&&(n.value=KY,n.value=n.factory()),"object"==typeof n.value&&n.value&&function ZY(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=te(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function qb(t){const e=Cp(t),n=null!==e?e.factory:Ho(t);if(null!==n)return n;if(t instanceof k)throw new M(204,!1);if(t instanceof Function)return function YY(t){const e=t.length;if(e>0)throw function Ku(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new M(204,!1);const n=function B8(t){return t&&(t[Dp]||t[nN])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new M(204,!1)}function _P(t,e,n){let r;if(Wo(t)){const i=te(t);return Ho(i)||qb(i)}if(Hb(t))r=()=>te(t.useValue);else if(function mP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Hw(t.deps||[]));else if(function gP(t){return!(!t||!t.useExisting)}(t))r=()=>C(te(t.useExisting));else{const i=te(t&&(t.useClass||t.provide));if(!function XY(t){return!!t.deps}(t))return Ho(i)||qb(i);r=()=>new i(...Hw(t.deps))}return r}function Ll(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Wb(t,e){for(const n of t)Array.isArray(n)?Wb(n,e):n&&Ow(n)?Wb(n.\u0275providers,e):e(n)}const mg=new k("AppId",{providedIn:"root",factory:()=>eQ}),eQ="ng",yP=new k("Platform Initializer"),Ci=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kb=new k("AnimationModuleType"),Yb=new k("CSP nonce",{providedIn:"root",factory:()=>function Pl(){if(void 0!==Ob)return Ob;if(typeof document<"u")return document;throw new M(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wP=(t,e,n)=>null;function nE(t,e,n=!1){return wP(t,e,n)}class uQ{}class CP{}class hQ{resolveComponentFactory(e){throw function dQ(t){const e=Error(`No component factory found for ${Wt(t)}.`);return e.ngComponent=t,e}(e)}}let Bl=(()=>{class e{}return e.NULL=new hQ,e})();function fQ(){return Ul(wn(),S())}function Ul(t,e){return new Qt(ur(t,e))}let Qt=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=fQ,e})();function pQ(t){return t instanceof Qt?t.nativeElement:t}class DP{}let ls=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function gQ(){const t=S(),n=Ir(wn().index,t);return(lr(n)?n:t)[se]}(),e})(),mQ=(()=>{var t;class e{}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:()=>null}),e})();class Gs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const TP=new Gs("16.2.1"),sE={};function MP(t,e=null,n=null,r){const i=RP(t,e,n,r);return i.resolveInjectorInitializers(),i}function RP(t,e=null,n=null,r,i=new Set){const s=[n||Re,GY(t)];return r=r||("object"==typeof t?void 0:Wt(t)),new gg(s,e||pg(),r||null,i)}let wt=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return MP({name:""},i,r,"");{const s=r.name??"";return MP({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=Nu,t.NULL=new Ub,t.\u0275prov=F({token:t,providedIn:"any",factory:()=>C(dP)}),t.__NG_ELEMENT_ID__=-1,e})();function cs(t){return t instanceof Function?t():t}let lE=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new M(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const r of this.callbacks)r.invoke()}finally{this.runningCallbacks=!1;for(const r of this.deferredCallbacks)this.callbacks.add(r);this.deferredCallbacks.clear()}}register(r){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(r)}unregister(r){this.callbacks.delete(r),this.deferredCallbacks.delete(r)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:()=>new t}),e})();function ad(t){for(;t;){t[le]|=64;const e=Xu(t);if(Yw(t)&&!e)return t;t=e}return null}function cE(t){return t.ngOriginalError}class Ko{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&cE(e);for(;n&&cE(n);)n=cE(n);return n||null}}const FP=new k("",{providedIn:"root",factory:()=>!1});class UP extends AN{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){ad(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=nn(this);this.trackingVersion++;try{e(n,r)}finally{nn(i)}}destroy(){this.trackingVersion++}}let Cg=null;function jP(){return Cg??=new UP,Cg}function $P(t,e){return t[e]??jP()}function HP(t,e){const n=jP();n.hasReadASignal&&(t[e]=Cg,n.lView=t,Cg=new UP)}const ce={};function N(t){zP(Te(),S(),Qn()+t,!1)}function zP(t,e,n,r){if(!r)if(3==(3&e[le])){const s=t.preOrderCheckHooks;null!==s&&jp(e,s,n)}else{const s=t.preOrderHooks;null!==s&&$p(e,s,0,n)}zo(n)}function w(t,e=pe.Default){const n=S();return null===n?C(t,e):cO(wn(),n,te(t),e)}function uE(){throw new Error("invalid")}function Ig(t,e,n,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[Nt]=i,d[le]=140|r,(null!==c||t&&2048&t[le])&&(d[le]|=2048),VN(d),d[pt]=d[_l]=t,d[Ot]=n,d[ml]=o||t&&t[ml],d[se]=a||t&&t[se],d[Bs]=l||t&&t[Bs]||null,d[On]=s,d[Uu]=function WK(){return qK++}(),d[is]=u,d[EN]=c,d[Pt]=2==e.type?t[Pt]:d,d}function Hl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function dE(t,e,n,r,i){const s=zN(),o=tb(),l=t.data[e]=function BQ(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function bl(){return null!==ee.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(t,e,n,r,i),function q7(){return ee.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function $u(){const t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return bi(s,!0),s}function ld(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function GP(t,e,n,r,i){const s=$P(e,Rp),o=Qn(),a=2&r;try{if(zo(-1),a&&e.length>ve&&zP(t,e,ve,!1),wi(a?2:0,i),a)s.runInContext(n,r,i);else{const c=nn(null);try{n(r,i)}finally{nn(c)}}}finally{a&&null===e[Rp]&&HP(e,Rp),zo(o),wi(a?3:1,i)}}function hE(t,e,n){if(Kw(e)){const r=nn(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{nn(r)}}}function fE(t,e,n){HN()&&(function qQ(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;$o(n)&&function JQ(t,e,n){const r=ur(e,t),i=qP(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Dg(t,Ig(t,i,null,o,r,e,null,t[ml].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||zp(n,e),Pn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],c=Go(e,t,a,n);Pn(c,e),null!==o&&eX(0,a-i,c,l,0,o),ei(l)&&(Ir(n.index,e)[Ot]=Go(e,t,a,n))}}(t,e,n,ur(n,e)),64==(64&n.flags)&&XP(t,e,n))}function pE(t,e,n=ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function qP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gE(t,e,n,r,i,s,o,a,l,c,u){const d=ve+r,h=d+i,f=function NQ(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ce);return n}(d,h),p="function"==typeof c?c():c;return f[H]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let WP=t=>null;function KP(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?YP(n,e,i,s):r.hasOwnProperty(i)&&YP(n,e,r[i],s)}return n}function YP(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Ar(t,e,n,r,i,s,o,a){const l=ur(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(wE(t,n,u,r,i),$o(e)&&function $Q(t,e){const n=Ir(e,t);16&n[le]||(n[le]|=64)}(n,e.index)):3&e.type&&(r=function jQ(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function mE(t,e,n,r){if(HN()){const i=null===r?null:{"":-1},s=function KQ(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(mN(e,o.selectors,!1))if(r||(r=[]),ei(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),_E(t,e,a.length)}else r.unshift(o),_E(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&QP(t,e,n,o,i,a),i&&function YQ(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new M(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Fu(n.mergedAttrs,n.attrs)}function QP(t,e,n,r,i,s){for(let c=0;c<r.length;c++)fb(zp(n,e),t,r[c].type);!function XQ(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=ld(t,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];n.mergedAttrs=Fu(n.mergedAttrs,u.hostAttrs),ZQ(t,n,e,l,u),QQ(l,u,i),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function UQ(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],h=n?n.get(d):null,p=h?h.outputs:null;l=KP(d.inputs,u,l,h?h.inputs:null),c=KP(d.outputs,u,c,p);const g=null===l||null===o||gN(e)?null:tX(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,s)}function XP(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function K7(){return ee.lFrame.currentDirectiveIndex}();try{zo(s);for(let a=r;a<i;a++){const l=t.data[a],c=e[a];rb(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&WQ(l,c)}}finally{zo(-1),rb(o)}}function WQ(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _E(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function QQ(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ei(e)&&(n[""]=t)}}function ZQ(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ho(i.type)),o=new Hu(s,ei(i),w);t.blueprint[r]=o,n[r]=o,function zQ(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function GQ(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,ld(t,n,i.hostVars,ce),i)}function Ii(t,e,n,r,i,s){const o=ur(t,e);!function yE(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?ie(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[se],o,s,t.value,n,r,i)}function eX(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)ZP(r,n,o[a++],o[a++],o[a++])}function ZP(t,e,n,r,i){const s=nn(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{nn(s)}}function tX(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function JP(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function eF(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];sb(n[r]),o.contentQueries(2,e[s],s)}}}function Dg(t,e){return t[Vu]?t[bN][Jr]=e:t[Vu]=e,t[bN]=e,e}function vE(t,e,n){sb(0);const r=nn(null);try{e(t,n)}finally{nn(r)}}function tF(t){return t[gl]||(t[gl]=[])}function nF(t){return t.cleanup||(t.cleanup=[])}function iF(t,e){const n=t[Bs],r=n?n.get(Ko,null):null;r&&r.handleError(e)}function wE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];ZP(t.data[o],e[o],r,a,i)}}function us(t,e,n){const r=Vp(e,t);!function BO(t,e,n){t.setValue(e,n)}(t[se],r,n)}function nX(t,e){const n=Ir(e,t),r=n[H];!function rX(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Nt];null!==i&&null===n[is]&&(n[is]=nE(i,n[Bs])),bE(r,n,n[Ot])}function bE(t,e,n){ob(e);try{const r=t.viewQuery;null!==r&&vE(1,r,n);const i=t.template;null!==i&&GP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&eF(t,e),t.staticViewQueries&&vE(2,t.viewQuery,n);const s=t.components;null!==s&&function iX(t,e){for(let n=0;n<e.length;n++)nX(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[le]&=-5,ab()}}let sF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(r,i,s){const o=typeof Zone>"u"?null:Zone.current,a=new I7(r,u=>{this.all.has(u)&&this.queue.set(u,o)},s);let l;this.all.add(a),a.notify();const c=()=>{a.cleanup(),l?.(),this.all.delete(a),this.queue.delete(a)};return l=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[r,i]of this.queue)this.queue.delete(r),i?i.run(()=>r.run()):r.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:()=>new t}),e})();function Tg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=kw(i,a):2==s&&(r=kw(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function cd(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Je(s)),cr(s)){for(let a=vn;a<s.length;a++){const l=s[a],c=l[H].firstChild;null!==c&&cd(l[H],l,c,r)}s[yi]!==s[Nt]&&r.push(s[yi])}const o=n.type;if(8&o)cd(t,e,n.child,r);else if(32&o){const a=Db(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=KO(e,n);if(Array.isArray(a))r.push(...a);else{const l=Xu(e[Pt]);cd(l[H],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Sg(t,e,n,r=!0){const i=e[ml],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{oF(t,e,t.template,n)}catch(l){throw r&&iF(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function oF(t,e,n,r){const i=e[le];if(256!=(256&i)){e[ml].effectManager?.flush(),ob(e);try{VN(e),function qN(t){return ee.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&GP(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&jp(e,c,null)}else{const c=t.preOrderHooks;null!==c&&$p(e,c,0,null),lb(e,0)}if(function aX(t){for(let e=FO(t);null!==e;e=LO(e)){if(!e[CN])continue;const n=e[vl];for(let r=0;r<n.length;r++){P7(n[r])}}}(e),aF(e,2),null!==t.contentQueries&&eF(t,e),o){const c=t.contentCheckHooks;null!==c&&jp(e,c)}else{const c=t.contentHooks;null!==c&&$p(e,c,1),lb(e,1)}!function kQ(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=$P(e,kp);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)zo(~s);else{const o=s,a=n[++i],l=n[++i];W7(a,o),r.runInContext(l,2,e[o])}}}finally{null===e[kp]&&HP(e,kp),zo(-1)}}(t,e);const a=t.components;null!==a&&cF(e,a,0);const l=t.viewQuery;if(null!==l&&vE(2,l,r),o){const c=t.viewCheckHooks;null!==c&&jp(e,c)}else{const c=t.viewHooks;null!==c&&$p(e,c,2),lb(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[le]&=-73,BN(e)}finally{ab()}}}function aF(t,e){for(let n=FO(t);null!==n;n=LO(n))for(let r=vn;r<n.length;r++)lF(n[r],e)}function lX(t,e,n){lF(Ir(e,t),n)}function lF(t,e){if(!function N7(t){return 128==(128&t[le])}(t))return;const n=t[H];if(80&t[le]&&0===e||1024&t[le]||2===e)oF(n,t,n.template,t[Ot]);else if(t[Lu]>0){aF(t,1);const i=t[H].components;null!==i&&cF(t,i,1)}}function cF(t,e,n){for(let r=0;r<e.length;r++)lX(t,e[r],n)}class ud{get rootNodes(){const e=this._lView,n=e[H];return cd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return 256==(256&this._lView[le])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[pt];if(cr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(sg(e,r),Kp(n,r))}this._attachedToViewContainer=!1}Sb(this._lView[H],this._lView)}onDestroy(e){!function jN(t,e){if(256==(256&t[le]))throw new M(911,!1);null===t[Us]&&(t[Us]=[]),t[Us].push(e)}(this._lView,e)}markForCheck(){ad(this._cdRefInjectingView||this._lView)}detach(){this._lView[le]&=-129}reattach(){this._lView[le]|=128}detectChanges(){Sg(this._lView[H],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aY(t,e){Ju(t,e,e[se],2,null,null)}(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e}}class cX extends ud{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Sg(e[H],e,e[Ot],!1)}checkNoChanges(){}get context(){return null}}class uF extends Bl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=De(e);return new dd(n,this.ngModule)}}function dF(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class dX{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Sp(r);const i=this.injector.get(e,sE,r);return i!==sE||n===sE?i:this.parentInjector.get(e,n,r)}}class dd extends CP{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=dF(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return dF(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function s7(t){return t.map(i7).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Sr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new dX(e,s):e,a=o.get(DP,null);if(null===a)throw new M(407,!1);const d={rendererFactory:a,sanitizer:o.get(mQ,null),effectManager:o.get(sF,null),afterRenderEventManager:o.get(lE,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function OQ(t,e,n,r){const s=r.get(FP,!1)||n===Xr.ShadowDom,o=t.selectRootElement(e,s);return function PQ(t){WP(t)}(o),o}(h,r,this.componentDef.encapsulation,o):ig(h,f,function uX(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=nE(p,o,!0));const T=gE(0,null,null,1,0,null,null,null,null,null,null),O=Ig(null,T,null,v,null,null,d,h,o,null,y);let G,ne;ob(O);try{const Fe=this.componentDef;let kn,pi=null;Fe.findHostDirectiveDefs?(kn=[],pi=new Map,Fe.findHostDirectiveDefs(Fe,kn,pi),kn.push(Fe)):kn=[Fe];const Sk=function fX(t,e){const n=t[H],r=ve;return t[r]=e,Hl(n,r,2,"#host",null)}(O,p),kAe=function pX(t,e,n,r,i,s,o){const a=i[H];!function gX(t,e,n,r){for(const i of t)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Tg(e,e.mergedAttrs,!0),null!==n&&ZO(r,n,e))}(r,t,e,o);let l=null;null!==e&&(l=nE(e,i[Bs]));const c=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=Ig(i,qP(n),null,u,i[t.index],t,s,c,null,null,l);return a.firstCreatePass&&_E(a,t,r.length-1),Dg(i,d),i[t.index]=d}(Sk,p,Fe,kn,O,d,h);ne=LN(T,ve),p&&function _X(t,e,n,r){if(r)qw(t,n,["ng-version",TP.full]);else{const{attrs:i,classes:s}=function o7(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Zr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&qw(t,n,i),s&&s.length>0&&XO(t,n,s.join(" "))}}(h,Fe,p,r),void 0!==n&&function yX(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(ne,this.ngContentSelectors,n),G=function mX(t,e,n,r,i,s){const o=wn(),a=i[H],l=ur(o,i);QP(a,i,o,n,null,r);for(let u=0;u<n.length;u++)Pn(Go(i,a,o.directiveStart+u,o),i);XP(a,i,o),l&&Pn(l,i);const c=Go(i,a,o.directiveStart+o.componentOffset,o);if(t[Ot]=i[Ot]=c,null!==s)for(const u of s)u(c,e);return hE(a,o,t),c}(kAe,Fe,kn,pi,O,[vX]),bE(T,O,null)}finally{ab()}return new hX(this.componentType,G,Ul(ne,O),O,ne)}}class hX extends uQ{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new cX(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;wE(s[H],s,i,e,n),this.previousInputValues.set(e,n),ad(Ir(this._tNode.index,s))}}get injector(){return new Xn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function vX(){const t=wn();Up(S()[H],t)}function Me(t){let e=function hF(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(ei(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Ag(t.inputs),o.inputTransforms=Ag(t.inputTransforms),o.declaredInputs=Ag(t.declaredInputs),o.outputs=Ag(t.outputs);const a=i.hostBindings;a&&CX(t,a);const l=i.viewQuery,c=i.contentQueries;if(l&&bX(t,l),c&&EX(t,c),bp(t.inputs,i.inputs),bp(t.declaredInputs,i.declaredInputs),bp(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),bp(o.inputTransforms,i.inputTransforms)),ei(i)&&i.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Me&&(n=!1)}}e=Object.getPrototypeOf(e)}!function wX(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fu(i.hostAttrs,n=Fu(n,i.hostAttrs))}}(r)}function Ag(t){return t===mi?{}:t===Re?[]:t}function bX(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function EX(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function CX(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function xg(t){return!!EE(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function EE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ur(t,e,n,r){const i=S();return Fn(i,El(),e)&&(Te(),Ii(vt(),i,t,e,n,r)),Ur}function ql(t,e,n,r,i,s){const a=function Yo(t,e,n,r){const i=Fn(t,e,n);return Fn(t,e+1,r)||i}(t,function ss(){return ee.lFrame.bindingIndex}(),n,i);return os(2),a?e+ie(n)+r+ie(i)+s:ce}function we(t,e,n,r,i,s,o,a){const l=S(),c=Te(),u=t+ve,d=c.firstCreatePass?function KX(t,e,n,r,i,s,o,a,l){const c=e.consts,u=Hl(e,t,4,o||null,js(c,a));mE(e,n,u,js(c,l)),Up(e,u);const d=u.tView=gE(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,r,i,s,o):c.data[u];bi(d,!1);const h=xF(c,l,d,t);Bp()&&ag(c,l,h,d),Pn(h,l),Dg(l,l[u]=JP(h,l,h,d)),Op(d)&&fE(c,l,d),null!=o&&pE(l,d,a)}let xF=function MF(t,e,n,r){return $s(!0),e[se].createComment("")};function K(t,e,n){const r=S();return Fn(r,El(),e)&&Ar(Te(),vt(),r,t,e,r[se],n,!1),K}function AE(t,e,n,r,i){const o=i?"class":"style";wE(t,n,e.inputs[o],o,r)}function D(t,e,n,r){const i=S(),s=Te(),o=ve+t,a=i[se],l=s.firstCreatePass?function JX(t,e,n,r,i,s){const o=e.consts,l=Hl(e,t,2,r,js(o,i));return mE(e,n,l,js(o,s)),null!==l.attrs&&Tg(l,l.attrs,!1),null!==l.mergedAttrs&&Tg(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,n,r):s.data[o],c=RF(s,i,l,a,e,t);i[o]=c;const u=Op(l);return bi(l,!0),ZO(a,c,l),32!=(32&l.flags)&&Bp()&&ag(s,i,c,l),0===function L7(){return ee.lFrame.elementDepthCount}()&&Pn(c,i),function V7(){ee.lFrame.elementDepthCount++}(),u&&(fE(s,i,l),hE(s,l,i)),null!==r&&pE(i,l),D}function I(){let t=wn();tb()?function nb(){ee.lFrame.isParent=!1}():(t=t.parent,bi(t,!1));const e=t;(function U7(t){return ee.skipHydrationRootTNode===t})(e)&&function z7(){ee.skipHydrationRootTNode=null}(),function B7(){ee.lFrame.elementDepthCount--}();const n=Te();return n.firstCreatePass&&(Up(n,t),Kw(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function sK(t){return 0!=(8&t.flags)}(e)&&AE(n,e,S(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function oK(t){return 0!=(16&t.flags)}(e)&&AE(n,e,S(),e.stylesWithoutHost,!1),I}function at(t,e,n,r){return D(t,e,n,r),I(),at}let RF=(t,e,n,r,i,s)=>($s(!0),ig(r,i,function eO(){return ee.lFrame.currentNamespace}()));function En(){return S()}function md(t){return!!t&&"function"==typeof t.then}function OF(t){return!!t&&"function"==typeof t.subscribe}function oe(t,e,n,r){const i=S(),s=Te(),o=wn();return function FF(t,e,n,r,i,s,o){const a=Op(r),c=t.firstCreatePass&&nF(t),u=e[Ot],d=tF(e);let h=!0;if(3&r.type||o){const g=ur(r,e),_=o?o(g):g,v=d.length,y=o?O=>o(Je(O[r.index])):r.index;let T=null;if(!o&&a&&(T=function sZ(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[gl],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1;else{s=VF(r,e,u,s,!1);const O=n.listen(_,i,s);d.push(s,O),c&&c.push(i,y,v,v+1)}}else s=VF(r,e,u,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const G=e[p[_]][p[_+1]].subscribe(s),ne=d.length;d.push(s,G),c&&c.push(i,r.index,ne,-(ne+1))}}}(s,i,i[se],o,t,e,r),oe}function LF(t,e,n,r){try{return wi(6,e,n),!1!==n(r)}catch(i){return iF(t,i),!1}finally{wi(7,e,n)}}function VF(t,e,n,r,i){return function s(o){if(o===Function)return r;ad(t.componentOffset>-1?Ir(t.index,e):e);let l=LF(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)l=LF(e,n,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Q(t=1){return function Q7(t){return(ee.lFrame.contextLView=function X7(t,e){for(;t>0;)e=e[_l],t--;return e}(t,ee.lFrame.contextLView))[Ot]}(t)}function Og(t,e){return t<<17|e<<2}function qs(t){return t>>17&32767}function kE(t){return 2|t}function Qo(t){return(131068&t)>>2}function NE(t,e){return-131069&t|e<<2}function OE(t){return 1|t}function KF(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?qs(s):Qo(s),l=!1;for(;0!==a&&(!1===l||o);){const u=t[a+1];pZ(t[a],e)&&(l=!0,t[a+1]=r?OE(u):kE(u)),a=r?qs(u):Qo(u)}l&&(t[n+1]=r?kE(s):OE(s))}function pZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ml(t,e)>=0}function PE(t,e,n){return ti(t,e,n,!1),PE}function _d(t,e){return ti(t,e,null,!0),_d}function ti(t,e,n,r){const i=S(),s=Te(),o=os(2);s.firstUpdatePass&&function nL(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Qn()],o=function tL(t,e){return e>=t.expandoStartIndex}(t,n);(function oL(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function CZ(t,e,n,r){const i=function ib(t){const e=ee.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=yd(n=FE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=FE(i,t,e,n,r),null===s){let l=function IZ(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Qo(r))return t[qs(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=FE(null,t,e,l[1],r),l=yd(l,e.attrs,r),function DZ(t,e,n,r){t[qs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else s=function TZ(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=yd(r,t[s].hostAttrs,n);return yd(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function hZ(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=qs(o),l=Qo(o);t[r]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Ml(n,u)>0)&&(c=!0)):u=n,i)if(0!==l){const h=qs(t[a+1]);t[r+1]=Og(h,a),0!==h&&(t[h+1]=NE(t[h+1],r)),t[a+1]=function uZ(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Og(a,0),0!==a&&(t[a+1]=NE(t[a+1],r)),a=r;else t[r+1]=Og(l,0),0===a?a=r:t[l+1]=NE(t[l+1],r),l=r;c&&(t[r+1]=kE(t[r+1])),KF(t,u,r,!0),KF(t,u,r,!1),function fZ(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Ml(s,e)>=0&&(n[r+1]=OE(n[r+1]))}(e,u,t,r,s),o=Og(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==ce&&Fn(i,o,e)&&function iL(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function dZ(t){return 1==(1&t)}(c)?sL(l,e,n,i,Qo(c),o):void 0;Pg(u)||(Pg(s)||function cZ(t){return 2==(2&t)}(c)&&(s=sL(l,null,n,i,a,o)),function _Y(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Hs.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Hs.Important),t.setStyle(n,r,i,s))}}(r,o,Vp(Qn(),n),i,s))}(s,s.data[Qn()],i,i[se],t,i[o+1]=function MZ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Wt(zs(t)))),t}(e,n),r,o)}function FE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=yd(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function yd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Dr(t,o,!!n||e[++s]))}return void 0===t?null:t}function sL(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=n[i+1];h===ce&&(h=d?Re:void 0);let f=d?mb(h,r):u===r?h:void 0;if(c&&!Pg(f)&&(f=mb(l,r)),Pg(f)&&(a=f,o))return a;const p=t[i+1];i=o?qs(p):Qo(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=mb(l,r))}return a}function Pg(t){return void 0!==t}function V(t,e=""){const n=S(),r=Te(),i=t+ve,s=r.firstCreatePass?Hl(r,i,1,e,null):r.data[i],o=aL(r,n,s,e,t);n[i]=o,Bp()&&ag(r,n,o,s),bi(s,!1)}let aL=(t,e,n,r,i)=>($s(!0),function rg(t,e){return t.createText(e)}(e[se],r));function bt(t){return Zt("",t,""),bt}function Zt(t,e,n){const r=S(),i=function Gl(t,e,n,r){return Fn(t,El(),n)?e+ie(n)+r:ce}(r,t,e,n);return i!==ce&&us(r,Qn(),i),Zt}function LE(t,e,n,r,i){const s=S(),o=ql(s,t,e,n,r,i);return o!==ce&&us(s,Qn(),o),LE}function VE(t,e,n){const r=S();return Fn(r,El(),e)&&Ar(Te(),vt(),r,t,e,r[se],n,!0),VE}const tc="en-US";let SL=tc;function jE(t,e,n,r,i){if(t=te(t),Array.isArray(t))for(let s=0;s<t.length;s++)jE(t[s],e,n,r,i);else{const s=Te(),o=S(),a=wn();let l=Wo(t)?t:te(t.provide);const c=_P(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Wo(t)||!t.multi){const f=new Hu(c,i,w),p=HE(l,e,i?u:u+h,d);-1===p?(fb(zp(a,o),s,l),$E(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=HE(l,e,u+h,d),p=HE(l,e,u,u+h),_=p>=0&&n[p];if(i&&!_||!i&&!(f>=0&&n[f])){fb(zp(a,o),s,l);const v=function XJ(t,e,n,r,i){const s=new Hu(t,n,w);return s.multi=[],s.index=e,s.componentProviders=0,ZL(s,i,r&&!n),s}(i?QJ:YJ,n.length,i,r,c);!i&&_&&(n[p].providerFactory=v),$E(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else $E(s,t,f>-1?f:p,ZL(n[i?p:f],c,!i&&r));!i&&r&&_&&n[p].componentProviders++}}}function $E(t,e,n,r){const i=Wo(e),s=function WY(t){return!!t.useClass}(e);if(i||s){const l=(s?te(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function ZL(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function HE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function YJ(t,e,n,r){return zE(this.multi,[])}function QJ(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Go(n,n[H],this.providerFactory.index,r);s=a.slice(0,o),zE(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],zE(i,s);return s}function zE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function gt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function KJ(t,e,n){const r=Te();if(r.firstCreatePass){const i=ei(t);jE(n,r.data,r.blueprint,i,!0),jE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Zo{}class JL{}class GE extends Zo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uF(this);const i=Cr(e);this._bootstrapComponents=cs(i.bootstrap),this._r3Injector=RP(e,n,[{provide:Zo,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qE extends JL{constructor(e){super(),this.moduleType=e}create(e){return new GE(this.moduleType,e,[])}}class e2 extends Zo{constructor(e){super(),this.componentFactoryResolver=new uF(this),this.instance=null;const n=new gg([...e.providers,{provide:Zo,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver}],e.parent||pg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WE(t,e,n=null){return new e2({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let eee=(()=>{var t;class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=fP(0,r.type),s=i.length>0?WE([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=F({token:t,providedIn:"environment",factory:()=>new t(C(Sr))}),e})();function t2(t){t.getStandaloneInjector=e=>e.get(eee).getOrCreateStandaloneInjector(t)}function c2(t,e,n,r){return function u2(t,e,n,r,i,s){const o=e+n;return Fn(t,o,i)?function Di(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Id(t,e){const n=t[e];return n===ce?void 0:n}(t,o+1)}(S(),function Yn(){const t=ee.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}function YE(t){return e=>{setTimeout(t,void 0,e)}}const We=class Dee extends ze{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=YE(s),i&&(i=YE(i)),o&&(o=YE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Nn&&e.add(a),a}};function Tee(){return this._results[Symbol.iterator]()}class QE{get changes(){return this._changes||(this._changes=new We)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=QE.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Tee)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const i=function Vr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function wK(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Aee(t,e,n,r=!0){const i=e[H];if(function cY(t,e,n,r){const i=vn+r,s=n.length;r>0&&(n[i-1][Jr]=e),r<s-vn?(e[Jr]=n[i],gO(n,vn+r,e)):(n.push(e),e[Jr]=null),e[pt]=n;const o=e[Bu];null!==o&&n!==o&&function uY(t,e){const n=t[vl];e[Pt]!==e[pt][pt][Pt]&&(t[CN]=!0),null===n?t[vl]=[e]:n.push(e)}(o,e);const a=e[_i];null!==a&&a.insertView(t),e[le]|=128}(i,e,t,n),r){const s=Rb(n,t),o=e[se],a=og(o,t[yi]);null!==a&&function oY(t,e,n,r,i,s){r[Nt]=i,r[On]=e,Ju(t,r,n,1,i,s)}(i,t[On],o,e,a,s)}}let Ai=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ree,e})();const xee=Ai,Mee=class extends xee{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function See(t,e,n,r){const i=e.tView,a=Ig(t,i,n,4096&t[le]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Bu]=t[e.index];const c=t[_i];return null!==c&&(a[_i]=c.createEmbeddedView(i)),bE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new ud(i)}};function Ree(){return Ug(wn(),S())}function Ug(t,e){return 4&t.type?new Mee(e,t,Ul(t,e)):null}let jr=(()=>{class e{}return e.__NG_ELEMENT_ID__=Lee,e})();function Lee(){return b2(wn(),S())}const Vee=jr,v2=class extends Vee{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new Xn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Gp(this._hostTNode,this._hostLView);if(ub(e)){const n=Gu(e,this._hostLView),r=zu(e);return new Xn(n[H].data[r+8],n)}return new Xn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=w2(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Wu(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=o?e:new dd(De(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const _=(o?c:this.parentInjector).get(Sr,null);_&&(s=_)}De(l.componentType??{});const f=l.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function O7(t){return cr(t[pt])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[pt],u=new v2(c,c[On],c[pt]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Aee(a,i,o,!r),e.attachToViewContainerRef(),gO(XE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=w2(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=sg(this._lContainer,n);r&&(Kp(XE(this._lContainer),n),Sb(r[H],r))}detach(e){const n=this._adjustIndex(e,-1),r=sg(this._lContainer,n);return r&&null!=Kp(XE(this._lContainer),n)?new ud(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function w2(t){return t[8]}function XE(t){return t[8]||(t[8]=[])}function b2(t,e){let n;const r=e[t.index];return cr(r)?n=r:(n=JP(r,e,null,t),e[t.index]=n,Dg(e,n)),E2(n,e,t,r),new v2(n,t,e)}let E2=function C2(t,e,n,r){if(t[yi])return;let i;i=8&n.type?Je(r):function Bee(t,e){const n=t[se],r=n.createComment(""),i=ur(e,t);return qo(n,og(n,i),r,function pY(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[yi]=i};class ZE{constructor(e){this.queryList=e,this.matches=null}clone(){return new ZE(this.queryList)}setDirty(){this.queryList.setDirty()}}class JE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new JE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==M2(e,n).matches&&this.queries[n].setDirty()}}class I2{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class eC{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new eC(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tC{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new tC(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,n,$ee(n,s)),this.matchTNodeWithReadOption(e,n,qp(n,e,s,!1,!1))}else r===Ai?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,qp(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Qt||i===jr||i===Ai&&4&n.type)this.addMatch(n.index,-2);else{const s=qp(n,e,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function $ee(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function zee(t,e,n,r){return-1===n?function Hee(t,e){return 11&t.type?Ul(t,e):4&t.type?Ug(t,e):null}(e,t):-2===n?function Gee(t,e,n){return n===Qt?Ul(e,t):n===Ai?Ug(e,t):n===jr?b2(e,t):void 0}(t,e,r):Go(t,t[H],n,e)}function D2(t,e,n,r){const i=e[_i].queries[r];if(null===i.matches){const s=t.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:zee(e,s[c],o[l+1],n.metadata.read))}i.matches=a}return i.matches}function nC(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=D2(t,e,i,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=vn;d<u.length;d++){const h=u[d];h[Bu]===h[pt]&&nC(h[H],h,c,r)}if(null!==u[vl]){const d=u[vl];for(let h=0;h<d.length;h++){const f=d[h];nC(f[H],f,c,r)}}}}}return r}function rC(t){const e=S(),n=Te(),r=KN();sb(r+1);const i=M2(n,r);if(t.dirty&&function k7(t){return 4==(4&t[le])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?nC(n,e,r,[]):D2(n,e,i,r);t.reset(s,pQ),t.notifyOnChanges()}return!0}return!1}function T2(t,e,n){const r=Te();r.firstCreatePass&&(function x2(t,e,n){null===t.queries&&(t.queries=new eC),t.queries.track(new tC(e,n))}(r,new I2(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),function A2(t,e,n){const r=new QE(4==(4&n));(function VQ(t,e,n,r){const i=tF(e);i.push(n),t.firstCreatePass&&nF(t).push(r,i.length-1)})(t,e,r,r.destroy),null===e[_i]&&(e[_i]=new JE),e[_i].queries.push(new ZE(r))}(r,S(),e)}function M2(t,e){return t.queries.getByIndex(e)}const uC=new k("Application Initializer");let dC=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=$(uC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const s of this.appInits){const o=s();if(md(o))r.push(o);else if(OF(o)){const a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),W2=(()=>{var t;class e{log(r){console.log(r)}warn(r){console.warn(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const xi=new k("LocaleId",{providedIn:"root",factory:()=>$(xi,pe.Optional|pe.SkipSelf)||function gte(){return typeof $localize<"u"&&$localize.locale||tc}()});let Hg=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new br(!1)}add(){this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class yte{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let K2=(()=>{var t;class e{compileModuleSync(r){return new qE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),o=cs(Cr(r).declarations).reduce((a,l)=>{const c=De(l);return c&&a.push(new dd(c)),a},[]);return new yte(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Z2(...t){}class de{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Vte(){const t="function"==typeof qe.requestAnimationFrame;let e=qe[t?"requestAnimationFrame":"setTimeout"],n=qe[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function jte(t){const e=()=>{!function Ute(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(qe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gC(t),t.isCheckStableRunning=!0,pC(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gC(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return J2(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),eV(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return J2(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),eV(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,gC(t),pC(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!de.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(de.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Bte,Z2,Z2);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Bte={};function pC(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gC(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function J2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function eV(t){t._nesting--,pC(t)}class $te{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new We,this.onMicrotaskEmpty=new We,this.onStable=new We,this.onError=new We}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const tV=new k("",{providedIn:"root",factory:nV});function nV(){const t=$(de);let e=!0;return Mw(new He(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new He(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{de.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Zk()))}const rV=new k(""),Gg=new k("");let yC,mC=(()=>{var t;class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yC||(function Hte(t){yC=t}(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(C(de),C(_C),C(Gg))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})(),_C=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return yC?.findTestabilityInTree(this,r,i)??null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Ws=null;const iV=new k("AllowMultipleToken"),vC=new k("PlatformDestroyListeners"),wC=new k("appBootstrapListener");class oV{constructor(e,n){this.name=e,this.token=n}}function lV(t,e,n=[]){const r=`Platform: ${e}`,i=new k(r);return(s=[])=>{let o=bC();if(!o||o.injector.get(iV,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function qte(t){if(Ws&&!Ws.get(iV,!1))throw new M(400,!1);(function sV(){!function E7(t){xN=t}(()=>{throw new M(600,!1)})})(),Ws=t;const e=t.get(uV);(function aV(t){t.get(yP,null)?.forEach(n=>n())})(t)}(function cV(t=[],e){return wt.create({name:e,providers:[{provide:zb,useValue:"platform"},{provide:vC,useValue:new Set([()=>Ws=null])},...t]})}(a,r))}return function Kte(t){const e=bC();if(!e)throw new M(401,!1);return e}()}}function bC(){return Ws?.get(uV)??null}let uV=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const s=function Yte(t="zone.js",e){return"noop"===t?new $te:"zone.js"===t?new de(e):t}(i?.ngZone,function dV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const o=function JJ(t,e,n){return new GE(t,e,n)}(r.moduleType,this.injector,function mV(t){return[{provide:de,useFactory:t},{provide:rd,multi:!0,useFactory:()=>{const e=$(Xte,{optional:!0});return()=>e.initialize()}},{provide:gV,useFactory:Qte},{provide:tV,useFactory:nV}]}(()=>s)),a=o.injector.get(Ko,null);return s.runOutsideAngular(()=>{const l=s.onError.subscribe({next:c=>{a.handleError(c)}});o.onDestroy(()=>{qg(this._modules,o),l.unsubscribe()})}),function hV(t,e,n){try{const r=n();return md(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,s,()=>{const l=o.injector.get(dC);return l.runInitializers(),l.donePromise.then(()=>(function AL(t){Fr(t,"Expected localeId to be defined"),"string"==typeof t&&(SL=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(xi,tc)||tc),this._moduleDoBootstrap(o),o))})})}bootstrapModule(r,i=[]){const s=fV({},i);return function zte(t,e,n){const r=new qE(n);return Promise.resolve(r)}(0,0,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){const i=r.injector.get(Jo);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!r.instance.ngDoBootstrap)throw new M(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new M(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(vC,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(C(wt))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function fV(t,e){return Array.isArray(e)?e.reduce(fV,t):{...t,...e}}let Jo=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(gV),this.zoneIsStable=$(tV),this.componentTypes=[],this.components=[],this.isStable=$(Hg).hasPendingTasks.pipe(Qr(r=>r?Y(!1):this.zoneIsStable),Jk(),Zk()),this._injector=$(Sr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const s=r instanceof CP;if(!this._injector.get(dC).done)throw!s&&function pl(t){const e=De(t)||yn(t)||Kn(t);return null!==e&&e.standalone}(r),new M(405,!1);let a;a=s?r:this._injector.get(Bl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const l=function Gte(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Zo),u=a.create(wt.NULL,[],i||a.selector,l),d=u.location.nativeElement,h=u.injector.get(rV,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),qg(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;qg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(wC,[]);i.push(...this._bootstrapListeners),i.forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>qg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new M(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function qg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gV=new k("",{providedIn:"root",factory:()=>$(Ko).handleError.bind(void 0)});function Qte(){const t=$(de),e=$(Ko);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Xte=(()=>{var t;class e{constructor(){this.zone=$(de),this.applicationRef=$(Jo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let Wg=(()=>{class e{}return e.__NG_ELEMENT_ID__=Jte,e})();function Jte(t){return function ene(t,e,n){if($o(t)&&!n){const r=Ir(t.index,e);return new ud(r,r)}return 47&t.type?new ud(e[Pt],e):null}(wn(),S(),16==(16&t))}class wV{constructor(){}supports(e){return xg(e)}create(e){return new one(e)}}const sne=(t,e)=>e;class one{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<EV(r,i,s)?n:r,a=EV(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!xg(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function MX(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new ane(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ane{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bV{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new lne,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EV(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class CV{constructor(){}supports(e){return e instanceof Map||EE(e)}create(){return new cne}}class cne{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||EE(e)))throw new M(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new une(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class une{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IV(){return new Qg([new wV])}let Qg=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(null!=i){const s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||IV()),deps:[[e,new Qp,new Yt]]}}find(r){const i=this.factories.find(s=>s.supports(r));if(null!=i)return i;throw new M(901,!1)}}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:IV}),e})();function DV(){return new Ad([new CV])}let Ad=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(i){const s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||DV()),deps:[[e,new Qp,new Yt]]}}find(r){const i=this.factories.find(s=>s.supports(r));if(i)return i;throw new M(901,!1)}}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:DV}),e})();const fne=lV(null,"core",[]);let pne=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Jo))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})();let SC=null;function Ks(){return SC}class Ane{}const ke=new k("DocumentToken");let AC=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return $(Mne)},providedIn:"platform"}),e})();const xne=new k("Location Initialized");let Mne=(()=>{var t;class e extends AC{constructor(){super(),this._doc=$(ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ks().getBaseHref(this._doc)}onPopState(r){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function xC(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function NV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ds(t){return t&&"?"!==t[0]?"?"+t:t}let ta=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return $(PV)},providedIn:"root"}),e})();const OV=new k("appBaseHref");let PV=(()=>{var t;class e extends ta{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??$(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xC(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+ds(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){const a=this.prepareExternalUrl(s+ds(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){const a=this.prepareExternalUrl(s+ds(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(AC),C(OV,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Rne=(()=>{var t;class e extends ta{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=xC(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ds(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ds(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(AC),C(OV,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})(),xd=(()=>{var t;class e{constructor(r){this._subject=new We,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function One(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(NV(FV(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ds(i))}normalize(r){return e.stripTrailingSlash(function Nne(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,FV(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ds(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ds(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}}return(t=e).normalizeQueryParams=ds,t.joinWithSlash=xC,t.stripTrailingSlash=NV,t.\u0275fac=function(r){return new(r||t)(C(ta))},t.\u0275prov=F({token:t,factory:function(){return function kne(){return new xd(C(ta))}()},providedIn:"root"}),e})();function FV(t){return t.replace(/\/index.html$/,"")}function GV(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class wre{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zr=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new wre(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===o?void 0:o);else if(null!==o){const l=i.get(o);i.move(l,a),KV(l,s)}});for(let s=0,o=i.length;s<o;s++){const l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{KV(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(w(jr),w(Ai),w(Qg))},t.\u0275dir=J({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function KV(t,e){t.context.$implicit=e.item}let Mi=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new bre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){YV("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){YV("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(w(jr),w(Ai))},t.\u0275dir=J({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class bre{constructor(){this.$implicit=null,this.ngIf=null}}function YV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Wt(e)}'.`)}let XV=(()=>{var t;class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){const[s,o]=r.split("."),a=-1===s.indexOf("-")?void 0:Hs.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Qt),w(Ad),w(ls))},t.\u0275dir=J({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),Wre=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})();const JV="browser";function eB(t){return"server"===t}let Zre=(()=>{var t;class e{}return(t=e).\u0275prov=F({token:t,providedIn:"root",factory:()=>new Jre(C(ke),window)}),e})();class Jre{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function eie(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class tB{}class Cie extends Ane{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qC extends Cie{static makeCurrent(){!function Sne(t){SC||(SC=t)}(new qC)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Iie(){return Nd=Nd||document.querySelector("base"),Nd?Nd.getAttribute("href"):null}();return null==n?null:function Die(t){um=um||document.createElement("a"),um.setAttribute("href",t);const e=um.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Nd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GV(document.cookie,e)}}let um,Nd=null,Sie=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const WC=new k("EventManagerPlugins");let oB=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new M(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(C(WC),C(de))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();class aB{constructor(e){this._doc=e}}const KC="ng-app-id";let lB=(()=>{var t;class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eB(o),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${KC}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(KC),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(KC,this.appId),a}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke),C(mg),C(Yb,8),C(Ci))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const YC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},QC=/%COMP%/g,Rie=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function uB(t,e){return e.map(n=>n.replace(QC,t))}let dB=(()=>{var t;class e{constructor(r,i,s,o,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=eB(l),this.defaultRenderer=new XC(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xr.ShadowDom&&(i={...i,encapsulation:Xr.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof fB?s.applyToHost(r):s instanceof ZC&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let o=s.get(i.id);if(!o){const a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Xr.Emulated:o=new fB(c,u,i,this.appId,d,a,l,h);break;case Xr.ShadowDom:return new Pie(c,u,r,i,a,l,this.nonce,h);default:o=new ZC(c,u,i,d,a,l,h)}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(C(oB),C(lB),C(mg),C(Rie),C(ke),C(Ci),C(de),C(Yb))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();class XC{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(YC[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(hB(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(hB(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=YC[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=YC[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Hs.DashCase|Hs.Important)?e.style.setProperty(n,r,i&Hs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Hs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Ks().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function hB(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Pie extends XC{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=uB(i.id,i.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ZC extends XC{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?uB(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class fB extends ZC{constructor(e,n,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=function kie(t){return"_ngcontent-%COMP%".replace(QC,t)}(c),this.hostAttr=function Nie(t){return"_nghost-%COMP%".replace(QC,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Fie=(()=>{var t;class e extends aB{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const pB=["alt","control","meta","shift"],Lie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vie={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Bie=(()=>{var t;class e extends aB{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ks().onAndCancel(r,o.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(i.pop());let a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),pB.forEach(u=>{const d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=Lie[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),pB.forEach(a=>{a!==s&&(0,Vie[a])(r)&&(o+=a+".")}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const mB=[{provide:Ci,useValue:JV},{provide:yP,useValue:function Uie(){qC.makeCurrent()},multi:!0},{provide:ke,useFactory:function $ie(){return function EY(t){Ob=t}(document),document},deps:[]}],Hie=lV(fne,"browser",mB),zie=new k(""),_B=[{provide:Gg,useClass:class Tie{addToWindow(e){qe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new M(5103,!1);return s},qe.getAllAngularTestabilities=()=>e.getAllTestabilities(),qe.getAllAngularRootElements=()=>e.getAllRootElements(),qe.frameworkStabilizers||(qe.frameworkStabilizers=[]),qe.frameworkStabilizers.push(r=>{const i=qe.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Ks().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:rV,useClass:mC,deps:[de,_C,Gg]},{provide:mC,useClass:mC,deps:[de,_C,Gg]}],yB=[{provide:zb,useValue:"root"},{provide:Ko,useFactory:function jie(){return new Ko},deps:[]},{provide:WC,useClass:Fie,multi:!0,deps:[ke,de,Ci]},{provide:WC,useClass:Bie,multi:!0,deps:[ke]},dB,lB,oB,{provide:DP,useExisting:dB},{provide:tB,useClass:Sie,deps:[]},[]];let Gie=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:mg,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(C(zie,12))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[...yB,..._B],imports:[Wre,pne]}),e})(),vB=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke))},t.\u0275prov=F({token:t,factory:function(r){let i=null;return i=r?new r:function Wie(){return new vB(C(ke))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;const{isArray:Zie}=Array,{getPrototypeOf:Jie,prototype:ese,keys:tse}=Object;function CB(t){if(1===t.length){const e=t[0];if(Zie(e))return{args:e,keys:null};if(function nse(t){return t&&"object"==typeof t&&Jie(t)===ese}(e)){const n=tse(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:rse}=Array;function eI(t){return ye(e=>function ise(t,e){return rse(e)?t(...e):t(e)}(t,e))}function IB(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let DB=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(w(ls),w(Qt))},t.\u0275dir=J({type:t}),e})(),na=(()=>{var t;class e extends DB{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}(),t.\u0275dir=J({type:t,features:[Me]}),e})();const Ri=new k("NgValueAccessor"),ase={provide:Ri,useExisting:Xe(()=>oc),multi:!0},cse=new k("CompositionEventMode");let oc=(()=>{var t;class e extends DB{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lse(){const t=Ks()?Ks().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(w(ls),w(Qt),w(cse,8))},t.\u0275dir=J({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&oe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[gt([ase]),Me]}),e})();function Qs(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Ln=new k("NgValidators"),Xs=new k("NgAsyncValidators");function dm(t){return null}function FB(t){return null!=t}function LB(t){return md(t)?qt(t):t}function VB(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function BB(t,e){return e.map(n=>n(t))}function UB(t){return t.map(e=>function dse(t){return!t.validate}(e)?e:n=>e.validate(n))}function tI(t){return null!=t?function jB(t){if(!t)return null;const e=t.filter(FB);return 0==e.length?null:function(n){return VB(BB(n,e))}}(UB(t)):null}function nI(t){return null!=t?function $B(t){if(!t)return null;const e=t.filter(FB);return 0==e.length?null:function(n){return function sse(...t){const e=Qk(t),{args:n,keys:r}=CB(t),i=new He(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Wn(n[u]).subscribe(ft(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?IB(r,a):a),s.complete())}))}});return e?i.pipe(eI(e)):i}(BB(n,e).map(LB)).pipe(ye(VB))}}(UB(t)):null}function HB(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zB(t){return t._rawValidators}function GB(t){return t._rawAsyncValidators}function rI(t){return t?Array.isArray(t)?t:[t]:[]}function hm(t,e){return Array.isArray(t)?t.includes(e):t===e}function qB(t,e){const n=rI(e);return rI(t).forEach(i=>{hm(n,i)||n.push(i)}),n}function WB(t,e){return rI(e).filter(n=>!hm(t,n))}class KB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class tr extends KB{get formDirective(){return null}get path(){return null}}class Zs extends KB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class YB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let fm=(()=>{var t;class e extends YB{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Zs,2))},t.\u0275dir=J({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&_d("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Me]}),e})(),QB=(()=>{var t;class e extends YB{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(w(tr,10))},t.\u0275dir=J({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&_d("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Me]}),e})();const Od="VALID",gm="INVALID",ac="PENDING",Pd="DISABLED";function oI(t){return(mm(t)?t.validators:t)||null}function aI(t,e){return(mm(e)?e.asyncValidators:t)||null}function mm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class eU{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Od}get invalid(){return this.status===gm}get pending(){return this.status==ac}get disabled(){return this.status===Pd}get enabled(){return this.status!==Pd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WB(e,this._rawAsyncValidators))}hasValidator(e){return hm(this._rawValidators,e)}hasAsyncValidator(e){return hm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ac,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Pd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Od,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Od||this.status===ac)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pd:Od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ac,this._hasOwnPendingAsyncValidator=!0;const n=LB(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Pd:this.errors?gm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ac)?ac:this._anyControlsHaveStatus(gm)?gm:Od}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function gse(t){return Array.isArray(t)?tI(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function mse(t){return Array.isArray(t)?nI(t):t||null}(this._rawAsyncValidators)}}class _m extends eU{constructor(e,n,r){super(oI(n),aI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function JB(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new M(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ZB(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new M(1e3,"");if(!r[n])throw new M(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ra=new k("CallSetDisabledState",{providedIn:"root",factory:()=>Fd}),Fd="always";function ym(t,e){return[...e.path,t]}function Ld(t,e,n=Fd){lI(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function vse(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&tU(t,e)})}(t,e),function bse(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function wse(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&tU(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function yse(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function vm(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),bm(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function wm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function lI(t,e){const n=zB(t);null!==e.validator?t.setValidators(HB(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=GB(t);null!==e.asyncValidator?t.setAsyncValidators(HB(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();wm(e._rawValidators,i),wm(e._rawAsyncValidators,i)}function bm(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=zB(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const i=GB(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}const r=()=>{};return wm(e._rawValidators,r),wm(e._rawAsyncValidators,r),n}function tU(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uI(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function dI(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===oc?n=s:function Ise(t){return Object.getPrototypeOf(t.constructor)===na}(s)?r=s:i=s}),i||r||n||null}function iU(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function sU(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Em=class extends eU{constructor(e=null,n,r){super(oI(n),aI(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=sU(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){sU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},xse={provide:Zs,useExisting:Xe(()=>Cm)},lU=(()=>Promise.resolve())();let Cm=(()=>{var t;class e extends Zs{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Em,this._registered=!1,this.name="",this.update=new We,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=dI(0,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),uI(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ld(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){lU.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,s=0!==i&&function ic(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(i);lU.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?ym(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(w(tr,9),w(Ln,10),w(Xs,10),w(Ri,10),w(Wg,8),w(ra,8))},t.\u0275dir=J({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gt([xse]),Me,Lr]}),e})(),cU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=J({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Mse={provide:Ri,useExisting:Xe(()=>fI),multi:!0};let fI=(()=>{var t;class e extends na{writeValue(r){this.setProperty("value",r??"")}registerOnChange(r){this.onChange=i=>{r(""==i?null:parseFloat(i))}}}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&oe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[gt([Mse]),Me]}),e})(),uU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})();const pI=new k("NgModelWithFormControlWarning"),Pse={provide:tr,useExisting:Xe(()=>Im)};let Im=(()=>{var t;class e extends tr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new We,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return Ld(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){vm(r.control||null,r,!1),function Dse(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,function rU(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,s=this.form.get(r.path);i!==s&&(vm(i||null,r),(t=>t instanceof Em)(s)&&(Ld(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);(function nU(t,e){lI(t,e)})(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function Ese(t,e){return bm(t,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lI(this.form,this),this._oldForm&&bm(this._oldForm,this)}_checkFormPresent(){}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Ln,10),w(Xs,10),w(ra,8))},t.\u0275dir=J({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&oe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gt([Pse]),Me,Lr]}),e})();const Vse={provide:Zs,useExisting:Xe(()=>_I)};let _I=(()=>{var t;class e extends Zs{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new We,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=dI(0,o)}ngOnChanges(r){this._added||this._setUpControl(),uI(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return ym(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(t=e)._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(w(tr,13),w(Ln,10),w(Xs,10),w(Ri,10),w(pI,8))},t.\u0275dir=J({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[gt([Vse]),Me,Lr]}),e})();function yU(t){return"number"==typeof t?t:parseFloat(t)}let ia=(()=>{var t;class e{constructor(){this._validator=dm}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):dm,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=J({type:t,features:[Lr]}),e})();const Gse={provide:Ln,useExisting:Xe(()=>wI),multi:!0};let wI=(()=>{var t;class e extends ia{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>yU(r),this.createValidator=r=>function xB(t){return e=>{if(Qs(e.value)||Qs(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Ur("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[gt([Gse]),Me]}),e})();const qse={provide:Ln,useExisting:Xe(()=>bI),multi:!0};let bI=(()=>{var t;class e extends ia{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>yU(r),this.createValidator=r=>function AB(t){return e=>{if(Qs(e.value)||Qs(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Ur("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[gt([qse]),Me]}),e})(),IU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[uU]}),e})(),eoe=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:[{provide:ra,useValue:r.callSetDisabledState??Fd}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[IU]}),e})(),toe=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:[{provide:pI,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:ra,useValue:r.callSetDisabledState??Fd}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[IU]}),e})();function Dm(...t){const e=ku(t),n=Qk(t),{args:r,keys:i}=CB(t);if(0===r.length)return qt([],e);const s=new He(function roe(t,e,n=Fs){return r=>{DU(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)DU(e,()=>{const c=qt(t[l],e);let u=!1;c.subscribe(ft(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>IB(i,o):Fs));return n?s.pipe(eI(n)):s}function DU(t,e,n){t?ts(n,t,e):e()}const Tm=Mu(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Sm(...t){return function ioe(){return hl(1)}()(qt(t,ku(t)))}function Am(t){return new He(e=>{Wn(t()).subscribe(e)})}function Bd(t,e){const n=Ce(t)?t:()=>t,r=i=>i.error(n());return new He(e?i=>e.schedule(r,0,i):r)}function CI(){return Dt((t,e)=>{let n=null;t._refCount++;const r=ft(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class TU extends He{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pk(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nn;const n=this.getSubject();e.add(this.source.subscribe(ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nn.EMPTY)}return e}refCount(){return CI()(this)}}function Gr(t){return t<=0?()=>gi:Dt((e,n)=>{let r=0;e.subscribe(ft(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ud(...t){const e=ku(t);return Dt((n,r)=>{(e?Sm(t,n,e):Sm(t,n)).subscribe(r)})}function rn(t,e){return Dt((n,r)=>{let i=0;n.subscribe(ft(r,s=>t.call(e,s,i++)&&r.next(s)))})}function xm(t){return Dt((e,n)=>{let r=!1;e.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function SU(t=soe){return Dt((e,n)=>{let r=!1;e.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function soe(){return new Tm}function sa(t,e){const n=arguments.length>=2;return r=>r.pipe(t?rn((i,s)=>t(i,s,r)):Fs,Gr(1),n?xm(e):SU(()=>new Tm))}function lc(t,e){return Ce(e)?tn(t,e,1):tn(t,1)}function Vn(t,e,n){const r=Ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?Dt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ft(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Fs}function oa(t){return Dt((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ft(n,void 0,void 0,o=>{s=Wn(t(o,oa(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function II(t){return t<=0?()=>gi:Dt((e,n)=>{let r=[];e.subscribe(ft(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jd(t){return Dt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const he="primary",$d=Symbol("RouteTitle");class uoe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function cc(t){return new uoe(t)}function doe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ki(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!AU(t[i],e[i]))return!1;return!0}function AU(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function xU(t){return t.length>0?t[t.length-1]:null}function Js(t){return function noe(t){return!!t&&(t instanceof He||Ce(t.lift)&&Ce(t.subscribe))}(t)?t:md(t)?qt(Promise.resolve(t)):Y(t)}const foe={exact:function kU(t,e,n){if(!aa(t.segments,e.segments)||!Mm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!kU(t.children[r],e.children[r],n))return!1;return!0},subset:NU},MU={exact:function poe(t,e){return ki(t,e)},subset:function goe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AU(t[n],e[n]))},ignored:()=>!0};function RU(t,e,n){return foe[n.paths](t.root,e.root,n.matrixParams)&&MU[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function NU(t,e,n){return OU(t,e,e.segments,n)}function OU(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!aa(i,n)||e.hasChildren()||!Mm(i,n,r))}if(t.segments.length===n.length){if(!aa(t.segments,n)||!Mm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!NU(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(aa(t.segments,i)&&Mm(t.segments,i,r)&&t.children[he])&&OU(t.children[he],e,s,r)}}function Mm(t,e,n){return e.every((r,i)=>MU[n](t[i].parameters,r.parameters))}class uc{constructor(e=new Ue([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return yoe.serialize(this)}}class Ue{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rm(this)}}class Hd{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=cc(this.parameters)),this._parameterMap}toString(){return LU(this)}}function aa(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let zd=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return new DI},providedIn:"root"}),e})();class DI{parse(e){const n=new xoe(e);return new uc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Gd(e.root,!0)}`,r=function boe(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${km(n)}=${km(i)}`).join("&"):`${km(n)}=${km(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function voe(t){return encodeURI(t)}(e.fragment)}`:""}`}}const yoe=new DI;function Rm(t){return t.segments.map(e=>LU(e)).join("/")}function Gd(t,e){if(!t.hasChildren())return Rm(t);if(e){const n=t.children[he]?Gd(t.children[he],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${Gd(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function _oe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===he&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==he&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===he?[Gd(t.children[he],!1)]:[`${i}:${Gd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[he]?`${Rm(t)}/${n[0]}`:`${Rm(t)}/(${n.join("//")})`}}function PU(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function km(t){return PU(t).replace(/%3B/gi,";")}function TI(t){return PU(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nm(t){return decodeURIComponent(t)}function FU(t){return Nm(t.replace(/\+/g,"%20"))}function LU(t){return`${TI(t.path)}${function woe(t){return Object.keys(t).map(e=>`;${TI(e)}=${TI(t[e])}`).join("")}(t.parameters)}`}const Eoe=/^[^\/()?;#]+/;function SI(t){const e=t.match(Eoe);return e?e[0]:""}const Coe=/^[^\/()?;=#]+/,Doe=/^[^=?&#]+/,Soe=/^[^&#]+/;class xoe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new Ue(e,n)),r}parseSegment(){const e=SI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new Hd(Nm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Ioe(t){const e=t.match(Coe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=SI(this.remaining);i&&(r=i,this.capture(r))}e[Nm(n)]=Nm(r)}parseQueryParam(e){const n=function Toe(t){const e=t.match(Doe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function Aoe(t){const e=t.match(Soe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=FU(n),s=FU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=SI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[he]:new Ue([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}}function VU(t){return t.segments.length>0?new Ue([],{[he]:t}):t}function BU(t){const e={};for(const r of Object.keys(t.children)){const s=BU(t.children[r]);if(r===he&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Moe(t){if(1===t.numberOfChildren&&t.children[he]){const e=t.children[he];return new Ue(t.segments.concat(e.segments),e.children)}return t}(new Ue(t.segments,e))}function la(t){return t instanceof uc}function UU(t){let e;const i=VU(function n(s){const o={};for(const l of s.children){const c=n(l);o[l.outlet]=c}const a=new Ue(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function jU(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return AI(i,i,i,n,r);const s=function koe(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new HU(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new HU(n,e,r)}(e);if(s.toRoot())return AI(i,i,new Ue([],{}),n,r);const o=function Noe(t,e,n){if(t.isAbsolute)return new Pm(e,!0,0);if(!n)return new Pm(e,!1,NaN);if(null===n.parent)return new Pm(n,!0,0);const r=Om(t.commands[0])?0:1;return function Ooe(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Pm(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Wd(o.segmentGroup,o.index,s.commands):zU(o.segmentGroup,o.index,s.commands);return AI(i,o.segmentGroup,a,n,r)}function Om(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function qd(t){return"object"==typeof t&&null!=t&&t.outlets}function AI(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=t===e?n:$U(t,e,n);const a=VU(BU(o));return new uc(a,s,i)}function $U(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:$U(s,e,n)}),new Ue(t.segments,r)}class HU{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Om(r[0]))throw new M(4003,!1);const i=r.find(qd);if(i&&i!==xU(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function zU(t,e,n){if(t||(t=new Ue([],{})),0===t.segments.length&&t.hasChildren())return Wd(t,e,n);const r=function Foe(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(qd(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!qU(l,c,o))return s;r+=2}else{if(!qU(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ue(t.segments.slice(0,r.pathIndex),{});return s.children[he]=new Ue(t.segments.slice(r.pathIndex),t.children),Wd(s,0,i)}return r.match&&0===i.length?new Ue(t.segments,{}):r.match&&!t.hasChildren()?xI(t,e,n):r.match?Wd(t,0,i):xI(t,e,n)}function Wd(t,e,n){if(0===n.length)return new Ue(t.segments,{});{const r=function Poe(t){return qd(t[0])?t[0].outlets:{[he]:t}}(n),i={};if(Object.keys(r).some(s=>s!==he)&&t.children[he]&&1===t.numberOfChildren&&0===t.children[he].segments.length){const s=Wd(t.children[he],e,n);return new Ue(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=zU(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ue(t.segments,i)}}function xI(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(qd(s)){const l=Loe(s.outlets);return new Ue(r,l)}if(0===i&&Om(n[0])){r.push(new Hd(t.segments[e].path,GU(n[0]))),i++;continue}const o=qd(s)?s.outlets[he]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Om(a)?(r.push(new Hd(o,GU(a))),i+=2):(r.push(new Hd(o,{})),i++)}return new Ue(r,{})}function Loe(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=xI(new Ue([],{}),0,r))}),e}function GU(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function qU(t,e,n){return t==n.path&&ki(e,n.parameters)}const Kd="imperative";class Ni{constructor(e,n){this.id=e,this.url=n}}class MI extends Ni{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ca extends Ni{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fm extends Ni{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Yd extends Ni{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class RI extends Ni{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Voe extends Ni{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Boe extends Ni{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uoe extends Ni{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class joe extends Ni{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $oe extends Ni{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hoe{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zoe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Goe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qoe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Woe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Koe{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WU{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Yoe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qd,this.attachRef=null}}let Qd=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Yoe,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class KU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=kI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=kI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=NI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return NI(e,this._root).map(n=>n.value)}}function kI(t,e){if(t===e.value)return e;for(const n of e.children){const r=kI(t,n);if(r)return r}return null}function NI(t,e){if(t===e.value)return[e];for(const n of e.children){const r=NI(t,n);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function dc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class YU extends KU{constructor(e,n){super(e),this.snapshot=n,OI(this,e)}toString(){return this.snapshot.toString()}}function QU(t,e){const n=function Qoe(t,e){const o=new Lm([],{},{},"",{},he,e,null,{});return new ZU("",new ps(o,[]))}(0,e),r=new br([new Hd("",{})]),i=new br({}),s=new br({}),o=new br({}),a=new br(""),l=new hc(r,i,o,a,s,he,e,n.root);return l.snapshot=n.root,new YU(new ps(l,[]),n)}class hc{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ye(c=>c[$d]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ye(e=>cc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ye(e=>cc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XU(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Xoe(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Lm{get title(){return this.data?.[$d]}constructor(e,n,r,i,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZU extends KU{constructor(e,n){super(n),this.url=e,OI(this,n)}toString(){return JU(this._root)}}function OI(t,e){e.value._routerState=t,e.children.forEach(n=>OI(t,n))}function JU(t){const e=t.children.length>0?` { ${t.children.map(JU).join(", ")} } `:"";return`${t.value}${e}`}function PI(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ki(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ki(e.params,n.params)||t.paramsSubject.next(n.params),function hoe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ki(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),ki(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function FI(t,e){const n=ki(t.params,e.params)&&function moe(t,e){return aa(t,e)&&t.every((n,r)=>ki(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||FI(t.parent,e.parent))}let LI=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new We,this.deactivateEvents=new We,this.attachEvents=new We,this.detachEvents=new We,this.parentContexts=$(Qd),this.location=$(jr),this.changeDetector=$(Wg),this.environmentInjector=$(Sr),this.inputBinder=$(Vm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=r;const s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Zoe(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=J({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lr]}),e})();class Zoe{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===hc?this.route:e===Qd?this.childContexts:this.parent.get(e,n)}}const Vm=new k("");let ej=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,s=Dm([i.queryParams,i.params,i.data]).pipe(Qr(([o,a,l],c)=>(l={...o,...a,...l},0===c?Y(l):Promise.resolve(l)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const a=function Tne(t){const e=De(t);if(!e)return null;const n=new dd(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(a)for(const{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,o[l]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,s)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();function Xd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function eae(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Xd(t,r,i);return Xd(t,r)})}(t,e,n);return new ps(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Xd(t,a)),o}}const r=function tae(t){return new hc(new br(t.url),new br(t.params),new br(t.queryParams),new br(t.fragment),new br(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Xd(t,s));return new ps(r,i)}}const VI="ngNavigationCancelingError";function tj(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=la(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nj(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function nj(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[VI]=!0,r.cancellationCode=e,n&&(r.url=n),r}function rj(t){return ij(t)&&la(t.url)}function ij(t){return t&&t[VI]}let sj=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Tt({type:t,selectors:[["ng-component"]],standalone:!0,features:[t2],decls:1,vars:0,template:function(r,i){1&r&&at(0,"router-outlet")},dependencies:[LI],encapsulation:2}),e})();function BI(t){const e=t.children&&t.children.map(BI),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=sj),n}function si(t){return t.outlet||he}function Zd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class lae{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),PI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=dc(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=dc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=dc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=dc(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Koe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qoe(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(PI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Zd(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class oj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bm{constructor(e,n){this.component=e,this.route=n}}function cae(t,e,n){const r=t._root;return Jd(r,e?e._root:null,n,[r.value])}function fc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function V8(t){return null!==Cp(t)}(t)?e.get(t):t:r}function Jd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=dc(e);return t.children.forEach(o=>{(function dae(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function hae(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!aa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!aa(t.url,e.url)||!ki(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FI(t,e)||!ki(t.queryParams,e.queryParams);default:return!FI(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new oj(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Jd(t,e,s.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bm(a.outlet.component,o))}else o&&eh(e,a,i),i.canActivateChecks.push(new oj(r)),Jd(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>eh(a,n.getContext(o),i)),i}function eh(t,e,n){const r=dc(t),i=t.value;Object.entries(r).forEach(([s,o])=>{eh(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Bm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function th(t){return"function"==typeof t}function aj(t){return t instanceof Tm||"EmptyError"===t?.name}const Um=Symbol("INITIAL_VALUE");function pc(){return Qr(t=>Dm(t.map(e=>e.pipe(Gr(1),Ud(Um)))).pipe(ye(e=>{for(const n of e)if(!0!==n){if(n===Um)return Um;if(!1===n||n instanceof uc)return n}return!0}),rn(e=>e!==Um),Gr(1)))}function lj(t){return Ew(Vn(e=>{if(la(e))throw tj(0,e)}),ye(e=>!0===e))}class jm{constructor(e){this.segmentGroup=e||null}}class cj{constructor(e){this.urlTree=e}}function gc(t){return Bd(new jm(t))}function uj(t){return Bd(new cj(t))}class kae{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new M(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Y(r);if(i.numberOfChildren>1||!i.children[he])return Bd(new M(4e3,!1));i=i.children[he]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new uc(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Ue(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const UI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nae(t,e,n,r,i){const s=jI(t,e,n);return s.matched?(r=function nae(t,e){return t.providers&&!t._injector&&(t._injector=WE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function xae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Y(i.map(o=>{const a=fc(o,t);return Js(function yae(t){return t&&th(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(pc(),lj()):Y(!0)}(r,e,n).pipe(ye(o=>!0===o?s:{...UI}))):Y(s)}function jI(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...UI}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||doe)(n,t,e);if(!i)return{...UI};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function dj(t,e,n,r){return n.length>0&&function Fae(t,e,n){return n.some(r=>$m(t,e,r)&&si(r)!==he)}(t,n,r)?{segmentGroup:new Ue(e,Pae(r,new Ue(n,t.children))),slicedSegments:[]}:0===n.length&&function Lae(t,e,n){return n.some(r=>$m(t,e,r))}(t,n,r)?{segmentGroup:new Ue(t.segments,Oae(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ue(t.segments,t.children),slicedSegments:n}}function Oae(t,e,n,r,i){const s={};for(const o of r)if($m(t,n,o)&&!i[si(o)]){const a=new Ue([],{});s[si(o)]=a}return{...i,...s}}function Pae(t,e){const n={};n[he]=e;for(const r of t)if(""===r.path&&si(r)!==he){const i=new Ue([],{});n[si(r)]=i}return n}function $m(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class jae{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new kae(this.urlSerializer,this.urlTree)}noMatchError(e){return new M(4002,!1)}recognize(){const e=dj(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,he).pipe(oa(n=>{if(n instanceof cj)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof jm?this.noMatchError(n):n}),ye(n=>{const r=new Lm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},he,this.rootComponentType,null,{}),i=new ps(r,n),s=new ZU("",i),o=function Roe(t,e,n=null,r=null){return jU(UU(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,he).pipe(oa(r=>{throw r instanceof jm?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=XU(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return qt(i).pipe(lc(s=>{const o=r.children[s],a=function oae(t,e){const n=t.filter(r=>si(r)===e);return n.push(...t.filter(r=>si(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function aoe(t,e){return Dt(function ooe(t,e,n,r,i){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(ft(o,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),xm(null),function loe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?rn((i,s)=>t(i,s,r)):Fs,II(1),n?xm(e):SU(()=>new Tm))}(),tn(s=>{if(null===s)return gc(r);const o=hj(s);return function $ae(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}(o),Y(o)}))}processSegment(e,n,r,i,s,o){return qt(n).pipe(lc(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(oa(l=>{if(l instanceof jm)return Y(null);throw l}))),sa(a=>!!a),oa(a=>{if(aj(a))return function Bae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?Y([]):gc(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function Vae(t,e,n,r){return!!(si(t)===r||r!==he&&$m(e,n,t))&&("**"===t.path||jI(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):gc(i):gc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uj(s):this.applyRedirects.lineralizeSegments(r,s).pipe(tn(o=>{const a=new Ue(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=jI(n,i,s);if(!a)return gc(n);const d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?uj(d):this.applyRedirects.lineralizeSegments(i,d).pipe(tn(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?xU(i).parameters:{};a=Y({snapshot:new Lm(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fj(r),si(r),r.component??r._loadedComponent??null,r,pj(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=Nae(n,r,i,e).pipe(ye(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new Lm(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fj(r),si(r),r.component??r._loadedComponent??null,r,pj(r)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Qr(l=>null===l?gc(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Qr(({routes:c})=>{const u=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=l,{segmentGroup:p,slicedSegments:g}=dj(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(u,c,p).pipe(ye(v=>null===v?null:[new ps(d,v)]));if(0===c.length&&0===g.length)return Y([new ps(d,[])]);const _=si(r)===s;return this.processSegment(u,c,p,g,_?he:s,!0).pipe(ye(v=>[new ps(d,v)]))}))))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):function Aae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Y(!0):Y(i.map(o=>{const a=fc(o,t);return Js(function pae(t){return t&&th(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(pc(),lj())}(e,n,r).pipe(tn(i=>i?this.configLoader.loadChildren(e,n).pipe(Vn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Rae(t){return Bd(nj(!1,3))}())):Y({routes:[],injector:e})}}function Hae(t){const e=t.value.routeConfig;return e&&""===e.path}function hj(t){const e=[],n=new Set;for(const r of t){if(!Hae(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=hj(r.children);e.push(new ps(r.value,i))}return e.filter(r=>!n.has(r))}function fj(t){return t.data||{}}function pj(t){return t.resolve||{}}function gj(t){return"string"==typeof t.title||null===t.title}function $I(t){return Qr(e=>{const n=t(e);return n?qt(n).pipe(ye(()=>e)):Y(e)})}const mc=new k("ROUTES");let HI=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(K2)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Js(r.loadComponent()).pipe(ye(mj),Vn(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),jd(()=>{this.componentLoaders.delete(r)})),s=new TU(i,()=>new ze).pipe(CI());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ye(l=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,u;return Array.isArray(l)?u=l:(c=l.create(r).injector,u=c.get(mc,[],pe.Self|pe.Optional).flat()),{routes:u.map(BI),injector:c}}),jd(()=>{this.childrenLoaders.delete(i)})),a=new TU(o,()=>new ze).pipe(CI());return this.childrenLoaders.set(i,a),a}loadModuleFactoryOrRoutes(r){return Js(r()).pipe(ye(mj),tn(i=>i instanceof JL||Array.isArray(i)?Y(i):qt(this.compiler.compileModuleAsync(i))))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function mj(t){return function Qae(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Hm=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.configLoader=$(HI),this.environmentInjector=$(Sr),this.urlSerializer=$(zd),this.rootContexts=$(Qd),this.inputBindingEnabled=null!==$(Vm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new zoe(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Hoe(s))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r){return this.transitions=new br({id:0,currentUrlTree:r.currentUrlTree,currentRawUrl:r.currentUrlTree,extractedUrl:r.urlHandlingStrategy.extract(r.currentUrlTree),urlAfterRedirects:r.urlHandlingStrategy.extract(r.currentUrlTree),rawUrl:r.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Kd,restoredState:null,currentSnapshot:r.routerState.snapshot,targetSnapshot:null,currentRouterState:r.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rn(i=>0!==i.id),ye(i=>({...i,extractedUrl:r.urlHandlingStrategy.extract(i.rawUrl)})),Qr(i=>{let s=!1,o=!1;return Y(i).pipe(Vn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qr(a=>{const l=r.browserUrlTree.toString(),c=!r.navigated||a.extractedUrl.toString()!==l||l!==r.currentUrlTree.toString();if(!c&&"reload"!==(a.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const d="";return this.events.next(new Yd(a.id,r.serializeUrl(i.rawUrl),d,0)),r.rawUrlTree=a.rawUrl,a.resolve(null),gi}if(r.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return _j(a.source)&&(r.browserUrlTree=a.extractedUrl),Y(a).pipe(Qr(d=>{const h=this.transitions?.getValue();return this.events.next(new MI(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?gi:Promise.resolve(d)}),function zae(t,e,n,r,i,s){return tn(o=>function Uae(t,e,n,r,i,s,o="emptyOnly"){return new jae(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ye(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),Vn(d=>{if(i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},"eager"===r.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=r.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);r.setBrowserUrl(f,d)}r.browserUrlTree=d.urlAfterRedirects}const h=new Voe(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&r.urlHandlingStrategy.shouldProcessUrl(r.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=a,_=new MI(d,this.urlSerializer.serialize(h),f,p);this.events.next(_);const v=QU(0,this.rootComponentType).snapshot;return Y(i={...a,targetSnapshot:v,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new Yd(a.id,r.serializeUrl(i.extractedUrl),d,1)),r.rawUrlTree=a.rawUrl,a.resolve(null),gi}}),Vn(a=>{const l=new Boe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),ye(a=>i={...a,guards:cae(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function wae(t,e){return tn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Y({...n,guardsResult:!0}):function bae(t,e,n,r){return qt(t).pipe(tn(i=>function Sae(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Y(s.map(a=>{const l=Zd(e)??i,c=fc(a,l);return Js(function _ae(t){return t&&th(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):l.runInContext(()=>c(t,e,n,r))).pipe(sa())})).pipe(pc()):Y(!0)}(i.component,i.route,n,e,r)),sa(i=>!0!==i,!0))}(o,r,i,t).pipe(tn(a=>a&&function fae(t){return"boolean"==typeof t}(a)?function Eae(t,e,n,r){return qt(e).pipe(lc(i=>Sm(function Iae(t,e){return null!==t&&e&&e(new Goe(t)),Y(!0)}(i.route.parent,r),function Cae(t,e){return null!==t&&e&&e(new Woe(t)),Y(!0)}(i.route,r),function Tae(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function uae(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Am(()=>Y(o.guards.map(l=>{const c=Zd(o.node)??n,u=fc(l,c);return Js(function mae(t){return t&&th(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe(sa())})).pipe(pc())));return Y(s).pipe(pc())}(t,i.path,n),function Dae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Y(!0);const i=r.map(s=>Am(()=>{const o=Zd(e)??n,a=fc(s,o);return Js(function gae(t){return t&&th(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(sa())}));return Y(i).pipe(pc())}(t,i.route,n))),sa(i=>!0!==i,!0))}(r,s,t,e):Y(a)),ye(a=>({...n,guardsResult:a})))})}(this.environmentInjector,a=>this.events.next(a)),Vn(a=>{if(i.guardsResult=a.guardsResult,la(a.guardsResult))throw tj(0,a.guardsResult);const l=new Uoe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(l)}),rn(a=>!!a.guardsResult||(r.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),$I(a=>{if(a.guards.canActivateChecks.length)return Y(a).pipe(Vn(l=>{const c=new joe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Qr(l=>{let c=!1;return Y(l).pipe(function Gae(t,e){return tn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=0;return qt(i).pipe(lc(o=>function qae(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!gj(i)&&(s[$d]=i.title),function Wae(t,e,n,r){const i=function Kae(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return Y({});const s={};return qt(i).pipe(tn(o=>function Yae(t,e,n,r){const i=Zd(e)??r,s=fc(t,i);return Js(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(sa(),Vn(a=>{s[o]=a}))),II(1),function coe(t){return ye(()=>t)}(s),oa(o=>aj(o)?gi:Bd(o)))}(s,t,e,r).pipe(ye(o=>(t._resolvedData=o,t.data=XU(t,n).resolve,i&&gj(i)&&(t.data[$d]=i.title),null)))}(o.route,r,t,e)),Vn(()=>s++),II(1),tn(o=>s===i.length?Y(n):gi))})}(r.paramsInheritanceStrategy,this.environmentInjector),Vn({next:()=>c=!0,complete:()=>{c||(r.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Vn(l=>{const c=new $oe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}))}),$I(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(Vn(d=>{c.component=d}),ye(()=>{})));for(const d of c.children)u.push(...l(d));return u};return Dm(l(a.targetSnapshot.root)).pipe(xm(),Gr(1))}),$I(()=>this.afterPreactivation()),ye(a=>{const l=function Joe(t,e,n){const r=Xd(t,e._root,n?n._root:void 0);return new YU(r,e)}(r.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:l}}),Vn(a=>{r.currentUrlTree=a.urlAfterRedirects,r.rawUrlTree=r.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),r.routerState=a.targetRouterState,"deferred"===r.urlUpdateStrategy&&(a.extras.skipLocationChange||r.setBrowserUrl(r.rawUrlTree,a),r.browserUrlTree=a.urlAfterRedirects)}),((t,e,n,r)=>ye(i=>(new lae(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),Gr(1),Vn({next:a=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,r.navigated=!0,this.events.next(new ca(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(r.currentUrlTree))),r.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{s=!0}}),jd(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),oa(a=>{if(o=!0,ij(a)){rj(a)||(r.navigated=!0,r.restoreHistory(i,!0));const l=new Fm(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode);if(this.events.next(l),rj(a)){const c=r.urlHandlingStrategy.merge(a.url,r.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===r.urlUpdateStrategy||_j(i.source)};r.scheduleNavigation(c,Kd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{r.restoreHistory(i,!0);const l=new RI(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);this.events.next(l);try{i.resolve(r.errorHandler(a))}catch(c){i.reject(c)}}return gi}))}))}cancelNavigationTransition(r,i,s){const o=new Fm(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function _j(t){return t!==Kd}let yj=(()=>{var t;class e{buildTitle(r){let i,s=r.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===he);return i}getResolvedTitleForRoute(r){return r.data[$d]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return $(Xae)},providedIn:"root"}),e})(),Xae=(()=>{var t;class e extends yj{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(vB))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Zae=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return $(ele)},providedIn:"root"}),e})();class Jae{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let ele=(()=>{var t;class e extends Jae{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}(),t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const zm=new k("",{providedIn:"root",factory:()=>({})});let tle=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:function(){return $(nle)},providedIn:"root"}),e})(),nle=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var nh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(nh||{});function vj(t,e){t.events.pipe(rn(n=>n instanceof ca||n instanceof Fm||n instanceof RI||n instanceof Yd),ye(n=>n instanceof ca||n instanceof Yd?nh.COMPLETE:n instanceof Fm&&(0===n.code||1===n.code)?nh.REDIRECTING:nh.FAILED),rn(n=>n!==nh.REDIRECTING),Gr(1)).subscribe(()=>{e()})}function rle(t){throw t}function ile(t,e,n){return e.parse("/")}const sle={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ole={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sn=(()=>{var t;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=$(W2),this.isNgZoneEnabled=!1,this.options=$(zm,{optional:!0})||{},this.pendingTasks=$(Hg),this.errorHandler=this.options.errorHandler||rle,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ile,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=$(tle),this.routeReuseStrategy=$(Zae),this.titleStrategy=$(yj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=$(mc,{optional:!0})?.flat()??[],this.navigationTransitions=$(Hm),this.urlSerializer=$(zd),this.location=$(xd),this.componentInputBindingEnabled=!!$(Vm,{optional:!0}),this.isNgZoneEnabled=$(de)instanceof de&&de.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new uc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=QU(0,null),this.navigationTransitions.setupNavigations(this).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId??0},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Kd,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,s){const o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(BI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,i={}){const{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a;let h,d=null;switch(l){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=UU(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return jU(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){const s=la(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Kd,null,i)}navigate(r,i={skipLocationChange:!1}){return function ale(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new M(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,r)}return i}isActive(r,i){let s;if(s=!0===i?{...sle}:!1===i?{...ole}:i,la(r))return RU(this.currentUrlTree,r,s);const o=this.parseUrl(r);return RU(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{const o=r[s];return null!=o&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});const d=this.pendingTasks.add();return vj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(r,i){const s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",a)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(s,"",o)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class wj{}let ule=(()=>{var t;class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(rn(r=>r instanceof ca),lc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const s=[];for(const o of i){o.providers&&!o._injector&&(o._injector=WE(o.providers,r,`Route: ${o.path}`));const a=o._injector??r,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return qt(s).pipe(hl())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):Y(null);const o=s.pipe(tn(a=>null===a?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));return i.loadComponent&&!i._loadedComponent?qt([o,this.loader.loadComponent(i)]).pipe(hl()):o})}}return(t=e).\u0275fac=function(r){return new(r||t)(C(sn),C(K2),C(Sr),C(wj),C(HI))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const GI=new k("");let bj=(()=>{var t;class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof MI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ca?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Yd&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof WU&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new WU(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){uE()},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();function gs(t,e){return{\u0275kind:t,\u0275providers:e}}function Cj(){const t=$(wt);return e=>{const n=t.get(Jo);if(e!==n.components[0])return;const r=t.get(sn),i=t.get(Ij);1===t.get(qI)&&r.initialNavigation(),t.get(Dj,null,pe.Optional)?.setUpPreloading(),t.get(GI,null,pe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Ij=new k("",{factory:()=>new ze}),qI=new k("",{providedIn:"root",factory:()=>1}),Dj=new k("");function ple(t){return gs(0,[{provide:Dj,useExisting:ule},{provide:wj,useExisting:t}])}const Tj=new k("ROUTER_FORROOT_GUARD"),mle=[xd,{provide:zd,useClass:DI},sn,Qd,{provide:hc,useFactory:function Ej(t){return t.routerState.root},deps:[sn]},HI,[]];function _le(){return new oV("Router",sn)}let Sj=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[mle,[],{provide:mc,multi:!0,useValue:r},{provide:Tj,useFactory:ble,deps:[[sn,new Yt,new Qp]]},{provide:zm,useValue:i||{}},i?.useHash?{provide:ta,useClass:Rne}:{provide:ta,useClass:PV},{provide:GI,useFactory:()=>{const t=$(Zre),e=$(de),n=$(zm),r=$(Hm),i=$(zd);return n.scrollOffset&&t.setOffset(n.scrollOffset),new bj(i,r,t,e,n)}},i?.preloadingStrategy?ple(i.preloadingStrategy).\u0275providers:[],{provide:oV,multi:!0,useFactory:_le},i?.initialNavigation?Ele(i):[],i?.bindToComponentInputs?gs(8,[ej,{provide:Vm,useExisting:ej}]).\u0275providers:[],[{provide:Aj,useFactory:Cj},{provide:wC,multi:!0,useExisting:Aj}]]}}static forChild(r){return{ngModule:e,providers:[{provide:mc,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Tj,8))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})();function ble(t){return"guarded"}function Ele(t){return["disabled"===t.initialNavigation?gs(3,[{provide:uC,multi:!0,useFactory:()=>{const e=$(sn);return()=>{e.setUpLocationChangeListener()}}},{provide:qI,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?gs(2,[{provide:qI,useValue:0},{provide:uC,multi:!0,deps:[wt],useFactory:e=>{const n=e.get(xne,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(sn),s=e.get(Ij);vj(i,()=>{r(!0)}),e.get(Hm).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Aj=new k("");function xj(t,e=0){return function Ile(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Gm(t){return Array.isArray(t)?t:[t]}function $t(t){return null==t?"":"string"==typeof t?t:`${t}px`}function _c(t){return t instanceof Qt?t.nativeElement:t}const Dle=["addListener","removeListener"],Tle=["addEventListener","removeEventListener"],Sle=["on","off"];function WI(t,e,n,r){if(Ce(n)&&(r=n,n=void 0),r)return WI(t,e,n).pipe(eI(r));const[i,s]=function Mle(t){return Ce(t.addEventListener)&&Ce(t.removeEventListener)}(t)?Tle.map(o=>a=>t[o](e,a,n)):function Ale(t){return Ce(t.addListener)&&Ce(t.removeListener)}(t)?Dle.map(Mj(t,e)):function xle(t){return Ce(t.on)&&Ce(t.off)}(t)?Sle.map(Mj(t,e)):[];if(!i&&Aw(t))return tn(o=>WI(o,e,n))(Wn(t));if(!i)throw new TypeError("Invalid event target");return new He(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function Mj(t,e){return n=>r=>t[n](e,r)}class Rle extends Nn{constructor(e,n){super()}schedule(e,n=0){return this}}const qm={setInterval(t,e,...n){const{delegate:r}=qm;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=qm;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class Wm extends Rle{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return qm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&qm.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,dl(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const rh={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:r}=rh;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);const i=e(s=>{n=void 0,t(s)});return new Nn(()=>n?.(i))},requestAnimationFrame(...t){const{delegate:e}=rh;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=rh;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},Rj={now:()=>(Rj.delegate||Date).now(),delegate:void 0};class ih{constructor(e,n=ih.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}ih.now=Rj.now;class Km extends ih{constructor(e,n=ih.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}new class Nle extends Km{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}}(class kle extends Wm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return null!==r&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=rh.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);const{actions:s}=e;null!=n&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==n&&(rh.cancelAnimationFrame(n),e._scheduled=void 0)}});let KI,Ple=1;const Ym={};function kj(t){return t in Ym&&(delete Ym[t],!0)}const Fle={setImmediate(t){const e=Ple++;return Ym[e]=!0,KI||(KI=Promise.resolve()),KI.then(()=>kj(e)&&t()),e},clearImmediate(t){kj(t)}},{setImmediate:Lle,clearImmediate:Vle}=Fle,Qm={setImmediate(...t){const{delegate:e}=Qm;return(e?.setImmediate||Lle)(...t)},clearImmediate(t){const{delegate:e}=Qm;return(e?.clearImmediate||Vle)(t)},delegate:void 0},Xm=(new class Ule extends Km{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}}(class Ble extends Wm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return null!==r&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=Qm.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);const{actions:s}=e;null!=n&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==n&&(Qm.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}}),new Km(Wm)),$le=Xm;function Nj(t,e=Xm){return function Hle(t){return Dt((e,n)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const c=i;i=null,n.next(c)}o&&n.complete()},l=()=>{s=null,o&&n.complete()};e.subscribe(ft(n,c=>{r=!0,i=c,s||Wn(t(c)).subscribe(s=ft(n,a,l))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}(()=>function Gle(t=0,e,n=$le){let r=-1;return null!=e&&(Yk(e)?n=e:r=e),new He(i=>{let s=function zle(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,e))}let YI;try{YI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{YI=!1}let sh,ua,QI,Oi=(()=>{var t;class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?function Xre(t){return t===JV}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!YI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Ci))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Zm(t){return function qle(){if(null==sh&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sh=!0}))}finally{sh=sh||!1}return sh}()?t:!!t.capture}function Wle(){if(null==ua){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ua=!1,ua;if("scrollBehavior"in document.documentElement.style)ua=!0;else{const t=Element.prototype.scrollTo;ua=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return ua}function XI(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function eo(t){return t.composedPath?t.composedPath()[0]:t.target}function ZI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Qle=new k("cdk-dir-doc",{providedIn:"root",factory:function Xle(){return $(ke)}}),Zle=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let JI=(()=>{var t;class e{constructor(r){this.value="ltr",this.change=new We,r&&(this.value=function Jle(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Zle.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((r.body?r.body.dir:null)||(r.documentElement?r.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Qle,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),oh=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})(),tce=(()=>{var t;class e{constructor(r,i,s){this._ngZone=r,this._platform=i,this._scrolled=new ze,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){const i=this.scrollContainers.get(r);i&&(i.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=20){return this._platform.isBrowser?new He(i=>{this._globalSubscription||this._addGlobalListener();const s=r>0?this._scrolled.pipe(Nj(r)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Y()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(r,i){const s=this.getAncestorScrollContainers(r);return this.scrolled(i).pipe(rn(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(r){const i=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,r)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,i){let s=_c(i),o=r.getElementRef().nativeElement;do{if(s==o)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>WI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(de),C(Oi),C(ke,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Pj=(()=>{var t;class e{constructor(r,i,s){this._platform=r,this._change=new ze,this._changeListener=o=>{this._change.next(o)},this._document=s,i.runOutsideAngular(()=>{if(r.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){const r=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+s,right:r.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const r=this._document,i=this._getWindow(),s=r.documentElement,o=s.getBoundingClientRect();return{top:-o.top||r.body.scrollTop||i.scrollY||s.scrollTop||0,left:-o.left||r.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(r=20){return r>0?this._change.pipe(Nj(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Oi),C(de),C(ke,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Fj=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})(),Lj=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[oh,Fj,oh,Fj]}),e})();function e0(t){return Dt((e,n)=>{Wn(t).subscribe(ft(n,()=>n.complete(),mw)),!n.closed&&e.subscribe(n)})}class t0{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class n0 extends t0{constructor(e,n,r,i,s){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class Vj extends t0{constructor(e,n,r,i){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class rce extends t0{constructor(e){super(),this.element=e instanceof Qt?e.nativeElement:e}}class r0{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof n0?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Vj?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof rce?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ice extends r0{constructor(e,n,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||wt.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(r);-1!==i&&n.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let s0=(()=>{var t;class e extends r0{constructor(r,i,s){super(),this._componentFactoryResolver=r,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new We,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(l,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);const i=null!=r.viewContainerRef?r.viewContainerRef:this._viewContainerRef,o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),a=i.createComponent(o,i.length,r.injector||i.injector,r.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=r,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(r){r.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Bl),w(jr),w(ke))},t.\u0275dir=J({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Me]}),e})(),e_=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({}),e})();const Bj=Wle();class sce{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=$t(-this._previousScrollPosition.left),e.style.top=$t(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Bj&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Bj&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}}class oce{constructor(e,n,r,i){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(rn(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Uj{enable(){}disable(){}attach(){}}function o0(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function jj(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class ace{constructor(e,n,r,i){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();o0(n,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let lce=(()=>{var t;class e{constructor(r,i,s,o){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Uj,this.close=a=>new oce(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new sce(this._viewportRuler,this._document),this.reposition=a=>new ace(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}}return(t=e).\u0275fac=function(r){return new(r||t)(C(tce),C(Pj),C(de),C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class $j{constructor(e){if(this.scrollStrategy=new Uj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const r of n)void 0!==e[r]&&(this[r]=e[r])}}}class cce{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let Hj=(()=>{var t;class e{constructor(r){this._attachedOverlays=[],this._document=r}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){const i=this._attachedOverlays.indexOf(r);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),uce=(()=>{var t;class e extends Hj{constructor(r,i){super(r),this._ngZone=i,this._keydownListener=s=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const l=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(r){super.add(r),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke),C(de,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),dce=(()=>{var t;class e extends Hj{constructor(r,i,s){super(r),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=eo(o)},this._clickListener=o=>{const a=eo(o),l="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let u=c.length-1;u>-1;u--){const d=c[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(l))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(r){if(super.add(r),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const r=this._document.body;r.removeEventListener("pointerdown",this._pointerDownListener,!0),r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(r){r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke),C(Oi),C(de,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),t_=(()=>{var t;class e{constructor(r,i){this._platform=i,this._document=r}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const r="cdk-overlay-container";if(this._platform.isBrowser||ZI()){const s=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}const i=this._document.createElement("div");i.classList.add(r),ZI()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke),C(Oi))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class ah{constructor(e,n,r,i,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new ze,this._attachments=new ze,this._detachments=new ze,this._locationChanges=Nn.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new ze,this._outsidePointerEvents=new ze,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Gr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=$t(this._config.width),e.height=$t(this._config.height),e.minWidth=$t(this._config.minWidth),e.minHeight=$t(this._config.minHeight),e.maxWidth=$t(this._config.maxWidth),e.maxHeight=$t(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,r){const i=Gm(n||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(e0(Mw(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const zj="cdk-overlay-connected-position-bounding-box",hce=/([A-Za-z%]+)$/;class fce{get positions(){return this._preferredPositions}constructor(e,n,r,i,s){this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ze,this._resizeSubscription=Nn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(zj),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&da(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return n.left<0&&(i-=n.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(e,n,r){let i,s;return i="center"==r.overlayX?-n.width/2:"start"===r.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==r.overlayY?-n.height/2:"top"==r.overlayY?0:-n.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,n,r,i){const s=qj(n);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-r.height,p=this._subtractOverflows(s.width,0-o,o+s.width-r.width),g=this._subtractOverflows(s.height,h,f),_=p*g;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,n,r){if(this._hasFlexibleDimensions){const i=r.bottom-n.y,s=r.right-n.x,o=Gj(this._overlayRef.getConfig().minHeight),a=Gj(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=qj(n),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new cce(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,n){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,h;if("top"===n.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const f=Math.min(r.bottom-e.y+r.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===n.overlayX&&!i||"start"===n.overlayX&&i)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===n.overlayX&&!i||"end"===n.overlayX&&i)d=e.x,u=r.right-e.x;else{const f=Math.min(r.right-e.x+r.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){const r=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=$t(r.height),i.top=$t(r.top),i.bottom=$t(r.bottom),i.width=$t(r.width),i.left=$t(r.left),i.right=$t(r.right),i.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",i.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=$t(s)),o&&(i.maxWidth=$t(o))}this._lastBoundingBoxSize=r,da(this._boundingBox.style,i)}_resetBoundingBoxStyles(){da(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){da(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();da(r,this._getExactOverlayY(n,e,u)),da(r,this._getExactOverlayX(n,e,u))}else r.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=$t(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=$t(o.maxWidth):s&&(r.maxWidth="")),da(this._pane.style,r)}_getExactOverlayY(e,n,r){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=$t(s.y),i}_getExactOverlayX(e,n,r){let o,i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=$t(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:jj(e,r),isOriginOutsideView:o0(e,r),isOverlayClipped:jj(n,r),isOverlayOutsideView:o0(n,r)}}_subtractOverflows(e,...n){return n.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Gm(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Qt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+n,height:r,width:n}}}function da(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Gj(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(hce);return n&&"px"!==n?null:parseFloat(e)}return t||null}function qj(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const Wj="cdk-global-overlay-wrapper";class pce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Wj),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";l?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(Wj),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let gce=(()=>{var t;class e{constructor(r,i,s,o){this._viewportRuler=r,this._document=i,this._platform=s,this._overlayContainer=o}global(){return new pce}flexibleConnectedTo(r){return new fce(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Pj),C(ke),C(Oi),C(t_))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),mce=0,vc=(()=>{var t;class e{constructor(r,i,s,o,a,l,c,u,d,h,f,p){this.scrollStrategies=r,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=l,this._ngZone=c,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(r){const i=this._createHostElement(),s=this._createPaneElement(i),o=this._createPortalOutlet(s),a=new $j(r);return a.direction=a.direction||this._directionality.value,new ah(o,i,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(r){const i=this._document.createElement("div");return i.id="cdk-overlay-"+mce++,i.classList.add("cdk-overlay-pane"),r.appendChild(i),i}_createHostElement(){const r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(Jo)),new ice(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(lce),C(t_),C(Bl),C(gce),C(uce),C(wt),C(de),C(ke),C(JI),C(xd),C(dce),C(Kb,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const vce={provide:new k("cdk-connected-overlay-scroll-strategy"),deps:[vc],useFactory:function yce(t){return()=>t.scrollStrategies.reposition()}};let Kj=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[vc,vce],imports:[oh,e_,Lj,Lj]}),e})();function Qj(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function Xj(t){return rn((e,n)=>t<=n)}let Dce=(()=>{var t;class e{create(r){return typeof MutationObserver>"u"?null:new MutationObserver(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Tce=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[Dce]}),e})();const Zj=new Set;let ha,Ace=(()=>{var t;class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Mce}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&function xce(t,e){if(!Zj.has(t))try{ha||(ha=document.createElement("style"),e&&(ha.nonce=e),ha.setAttribute("type","text/css"),document.head.appendChild(ha)),ha.sheet&&(ha.sheet.insertRule(`@media ${t} {body{ }}`,0),Zj.add(t))}catch(n){console.error(n)}}(r,this._nonce),this._matchMedia(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Oi),C(Yb,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Mce(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let Rce=(()=>{var t;class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new ze}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return Jj(Gm(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let o=Dm(Jj(Gm(r)).map(a=>this._registerQuery(a).observable));return o=Sm(o.pipe(Gr(1)),o.pipe(Xj(1),function Sce(t,e=Xm){return Dt((n,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+t,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}n.subscribe(ft(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),o.pipe(ye(a=>{const l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);const i=this._mediaMatcher.matchMedia(r),o={observable:new He(a=>{const l=c=>this._zone.run(()=>a.next(c));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(Ud(i),ye(({matches:a})=>({query:r,matches:a})),e0(this._destroySubject)),mql:i};return this._queries.set(r,o),o}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Ace),C(de))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Jj(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}let n_=(()=>{var t;class e{constructor(r){this._platform=r}isDisabled(r){return r.hasAttribute("disabled")}isVisible(r){return function Pce(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(r)&&"visible"===getComputedStyle(r).visibility}isTabbable(r){if(!this._platform.isBrowser)return!1;const i=function Oce(t){try{return t.frameElement}catch{return null}}(function Hce(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(r));if(i&&(-1===r$(i)||!this.isVisible(i)))return!1;let s=r.nodeName.toLowerCase(),o=r$(r);return r.hasAttribute("contenteditable")?-1!==o:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function jce(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(r))&&("audio"===s?!!r.hasAttribute("controls")&&-1!==o:"video"===s?-1!==o&&(null!==o||this._platform.FIREFOX||r.hasAttribute("controls")):r.tabIndex>=0)}isFocusable(r,i){return function $ce(t){return!function Lce(t){return function Bce(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function Fce(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function Vce(t){return function Uce(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||n$(t))}(r)&&!this.isDisabled(r)&&(i?.ignoreVisibility||this.isVisible(r))}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Oi))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function n$(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function r$(t){if(!n$(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class zce{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,r,i,s=!1){this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let r=0;r<n.length;r++){const i=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let r=n.length-1;r>=0;r--){const i=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Gr(1)).subscribe(e)}}let a0=(()=>{var t;class e{constructor(r,i,s){this._checker=r,this._ngZone=i,this._document=s}create(r,i=!1){return new zce(r,this._checker,this._ngZone,this._document,i)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(n_),C(de),C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function i$(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function s$(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Gce=new k("cdk-input-modality-detector-options"),qce={ignoreKeys:[18,17,224,91,16]},wc=Zm({passive:!0,capture:!0});let Wce=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(r,i,s,o){this._platform=r,this._mostRecentTarget=null,this._modality=new br(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=eo(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(i$(a)?"keyboard":"mouse"),this._mostRecentTarget=eo(a))},this._onTouchstart=a=>{s$(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=eo(a))},this._options={...qce,...o},this.modalityDetected=this._modality.pipe(Xj(1)),this.modalityChanged=this.modalityDetected.pipe(Jk()),r.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,wc),s.addEventListener("mousedown",this._onMousedown,wc),s.addEventListener("touchstart",this._onTouchstart,wc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,wc),document.removeEventListener("mousedown",this._onMousedown,wc),document.removeEventListener("touchstart",this._onTouchstart,wc))}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Oi),C(de),C(ke),C(Gce,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Yce=new k("cdk-focus-monitor-default-options"),r_=Zm({passive:!0,capture:!0});let l0=(()=>{var t;class e{constructor(r,i,s,o,a){this._ngZone=r,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ze,this._rootNodeFocusAndBlurListener=l=>{for(let u=eo(l);u;u=u.parentElement)"focus"===l.type?this._onFocus(l,u):this._onBlur(l,u)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(r,i=!1){const s=_c(r);if(!this._platform.isBrowser||1!==s.nodeType)return Y();const o=function Yle(t){if(function Kle(){if(null==QI){const t=typeof document<"u"?document.head:null;QI=!(!t||!t.createShadowRoot&&!t.attachShadow)}return QI}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return i&&(a.checkChildren=!0),a.subject;const l={checkChildren:i,subject:new ze,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(r){const i=_c(r),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(r,i,s){const o=_c(r);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([l,c])=>this._originChanged(l,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((r,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:r&&this._isLastInteractionFromInputLabel(r)?"mouse":"program"}_shouldBeAttributedToTouch(r){return 1===this._detectionMode||!!r?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(r,i){r.classList.toggle("cdk-focused",!!i),r.classList.toggle("cdk-touch-focused","touch"===i),r.classList.toggle("cdk-keyboard-focused","keyboard"===i),r.classList.toggle("cdk-mouse-focused","mouse"===i),r.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(r,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=r,this._originFromTouchInteraction="touch"===r&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(r,i){const s=this._elementInfo.get(i),o=eo(r);!s||!s.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),s)}_onBlur(r,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&r.relatedTarget instanceof Node&&i.contains(r.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(r,i){r.subject.observers.length&&this._ngZone.run(()=>r.subject.next(i))}_registerGlobalListeners(r){if(!this._platform.isBrowser)return;const i=r.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,r_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,r_)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(e0(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(r){const i=r.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,r_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,r_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(r,i,s){this._setClasses(r,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(r){const i=[];return this._elementInfo.forEach((s,o)=>{(o===r||s.checkChildren&&o.contains(r))&&i.push([o,s])}),i}_isLastInteractionFromInputLabel(r){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===r||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName||r.disabled)return!1;const o=r.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0;return!1}}return(t=e).\u0275fac=function(r){return new(r||t)(C(de),C(Oi),C(Wce),C(ke,8),C(Yce,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const a$="cdk-high-contrast-black-on-white",l$="cdk-high-contrast-white-on-black",c0="cdk-high-contrast-active";let c$=(()=>{var t;class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=$(Rce).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const r=this._document.body.classList;r.remove(c0,a$,l$),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?r.add(c0,a$):2===i&&r.add(c0,l$)}}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Oi),C(ke))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Qce=(()=>{var t;class e{constructor(r){r._applyBodyHighContrastModeCssClasses()}}return(t=e).\u0275fac=function(r){return new(r||t)(C(c$))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[Tce]}),e})();function Xce(t,e){}class i_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let u$=(()=>{var t;class e extends r0{constructor(r,i,s,o,a,l,c,u){super(),this._elementRef=r,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._overlayRef=c,this._focusMonitor=u,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),i}attachTemplatePortal(r){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,i){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{r.removeEventListener("blur",s),r.removeEventListener("mousedown",s),r.removeAttribute("tabindex")};r.addEventListener("blur",s),r.addEventListener("mousedown",s)})),r.focus(i)}_focusByCssSelector(r,i){let s=this._elementRef.nativeElement.querySelector(r);s&&this._forceFocus(s,i)}_trapFocus(){const r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const r=this._config.restoreFocus;let i=null;if("string"==typeof r?i=this._document.querySelector(r):"boolean"==typeof r?i=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(i=r),this._config.restoreFocus&&i&&"function"==typeof i.focus){const s=XI(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const r=this._elementRef.nativeElement,i=XI();return r===i||r.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=XI())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Qt),w(a0),w(ke,8),w(i_),w(n_),w(de),w(ah),w(l0))},t.\u0275cmp=Tt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&T2(s0,7),2&r){let s;rC(s=function iC(){return function qee(t,e){return t[_i].queries[e].queryList}(S(),KN())}())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&Ur("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Me],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&we(0,Xce,0,0,"ng-template",0)},dependencies:[s0],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class u0{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new ze,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!Qj(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const d$=new k("DialogScrollStrategy"),Zce=new k("DialogData"),Jce=new k("DefaultDialogConfig"),tue={provide:d$,deps:[vc],useFactory:function eue(t){return()=>t.scrollStrategies.block()}};let nue=0,h$=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(r,i,s,o,a,l){this._overlay=r,this._injector=i,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ze,this._afterOpenedAtThisLevel=new ze,this._ariaHiddenElements=new Map,this.afterAllClosed=Am(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ud(void 0))),this._scrollStrategy=l}open(r,i){(i={...this._defaultOptions||new i_,...i}).id=i.id||"cdk-dialog-"+nue++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),a=this._overlay.create(o),l=new u0(a,i),c=this._attachContainer(a,l,i);return l.containerInstance=c,this._attachDialogContent(r,l,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){d0(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){d0(this._openDialogsAtThisLevel,r=>{!1===r.config.closeOnDestroy&&this._removeOpenDialog(r,!1)}),d0(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){const i=new $j({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(i.backdropClass=r.backdropClass),i}_attachContainer(r,i,s){const o=s.injector||s.viewContainerRef?.injector,a=[{provide:i_,useValue:s},{provide:u0,useValue:i},{provide:ah,useValue:r}];let l;s.container?"function"==typeof s.container?l=s.container:(l=s.container.type,a.push(...s.container.providers(s))):l=u$;const c=new n0(l,s.viewContainerRef,wt.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return r.attach(c).instance}_attachDialogContent(r,i,s,o){if(r instanceof Ai){const a=this._createInjector(o,i,s,void 0);let l={$implicit:o.data,dialogRef:i};o.templateContext&&(l={...l,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),s.attachTemplatePortal(new Vj(r,null,l,a))}else{const a=this._createInjector(o,i,s,this._injector),l=s.attachComponentPortal(new n0(r,o.viewContainerRef,a,o.componentFactoryResolver));i.componentRef=l,i.componentInstance=l.instance}}_createInjector(r,i,s,o){const a=r.injector||r.viewContainerRef?.injector,l=[{provide:Zce,useValue:r.data},{provide:u0,useValue:i}];return r.providers&&("function"==typeof r.providers?l.push(...r.providers(i,r,s)):l.push(...r.providers)),r.direction&&(!a||!a.get(JI,null,{optional:!0}))&&l.push({provide:JI,useValue:{value:r.direction,change:Y()}}),wt.create({parent:a||o,providers:l})}_removeOpenDialog(r,i){const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const r=this._overlayContainer.getContainerElement();if(r.parentElement){const i=r.parentElement.children;for(let s=i.length-1;s>-1;s--){const o=i[s];o!==r&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(r){return new(r||t)(C(vc),C(wt),C(Jce,8),C(t,12),C(t_),C(d$))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();function d0(t,e){let n=t.length;for(;n--;)e(t[n])}let rue=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[h$,tue],imports:[Kj,e_,Qce,e_]}),e})();const sue=new k("mat-sanity-checks",{providedIn:"root",factory:function iue(){return!0}});let m$=(()=>{var t;class e{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return!ZI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[r])}}return(t=e).\u0275fac=function(r){return new(r||t)(C(c$),C(sue,8),C(ke))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[oh,oh]}),e})();class aue{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const _$=Zm({passive:!0,capture:!0});class lue{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=eo(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,r,i){const s=this._events.get(n);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,_$)})}removeHandler(e,n,r){const i=this._events.get(e);if(!i)return;const s=i.get(n);s&&(s.delete(r),0===s.size&&i.delete(n),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,_$)))}}const y$={enterDuration:225,exitDuration:150},v$=Zm({passive:!0,capture:!0}),w$=["mousedown","touchstart"],b$=["mouseup","mouseleave","touchend","touchcancel"];class s_{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=_c(r))}fadeInRipple(e,n,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...y$,...r.animation};r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);const o=r.radius||function uue(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(e,n,i),a=e-i.left,l=n-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===i.width&&0===i.height,g=new aue(this,u,r,p);u.style.transform="scale3d(1, 1, 1)",g.state=0,r.persistent||(this._mostRecentTransientRipple=g);let _=null;return!p&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(g),y=()=>this._destroyRipple(g);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",y),_={onTransitionEnd:v,onTransitionCancel:y}}),this._activeRipples.set(g,_),(p||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,r={...y$,...e.config.animation};n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=_c(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,w$.forEach(r=>{s_._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{b$.forEach(n=>{this._triggerElement.addEventListener(n,this,v$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=i$(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!s$(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(w$.forEach(n=>s_._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&b$.forEach(n=>e.removeEventListener(n,this,v$)))}}function hue(t,e){}s_._eventManager=new lue;class a_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const h0="mdc-dialog--open",A$="mdc-dialog--opening",x$="mdc-dialog--closing";let gue=(()=>{var t;class e extends u${constructor(r,i,s,o,a,l,c,u){super(r,i,s,o,a,l,c,u),this._animationStateChanged=new We}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Qt),w(a0),w(ke,8),w(a_),w(n_),w(de),w(ah),w(l0))},t.\u0275cmp=Tt({type:t,selectors:[["ng-component"]],features:[Me],decls:0,vars:0,template:function(r,i){},encapsulation:2}),e})();const M$="--mat-dialog-transition-duration";function R$(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?xj(t.substring(0,t.length-2)):t.endsWith("s")?1e3*xj(t.substring(0,t.length-1)):"0"===t?0:null}let mue=(()=>{var t;class e extends gue{constructor(r,i,s,o,a,l,c,u,d){super(r,i,s,o,a,l,c,d),this._animationMode=u,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?R$(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?R$(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(M$,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(A$,h0)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(h0),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(h0),this._animationsEnabled?(this._hostElement.style.setProperty(M$,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(x$)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(A$,x$)}_waitForAnimationToComplete(r,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(r):r()})}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Qt),w(a0),w(ke,8),w(a_),w(n_),w(de),w(ah),w(Kb,8),w(l0))},t.\u0275cmp=Tt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,i){2&r&&(VE("id",i._config.id),Ur("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),_d("_mat-animation-noopable",!i._animationsEnabled))},features:[Me],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(D(0,"div",0)(1,"div",1),we(2,hue,0,0,"ng-template",2),I()())},dependencies:[s0],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class l_{constructor(e,n,r){this._ref=e,this._containerInstance=r,this._afterOpened=new ze,this._beforeClosed=new ze,this._state=0,this.disableClose=n.disableClose,this.id=e.id,r._animationStateChanged.pipe(rn(i=>"opened"===i.state),Gr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(rn(i=>"closed"===i.state),Gr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Mw(this.backdropClick(),this.keydownEvents().pipe(rn(i=>27===i.keyCode&&!this.disableClose&&!Qj(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function _ue(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(rn(n=>"closing"===n.state),Gr(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const c_=new k("MatMdcDialogData"),yue=new k("mat-mdc-dialog-default-options"),k$=new k("mat-mdc-dialog-scroll-strategy"),wue={provide:k$,deps:[vc],useFactory:function vue(t){return()=>t.scrollStrategies.block()}};let bue=0,Eue=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(r,i,s,o,a,l,c,u,d,h){this._overlay=r,this._defaultOptions=s,this._parentDialog=o,this._dialogRefConstructor=c,this._dialogContainerType=u,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ze,this._afterOpenedAtThisLevel=new ze,this._idPrefix="mat-dialog-",this.dialogConfigClass=a_,this.afterAllClosed=Am(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ud(void 0))),this._scrollStrategy=l,this._dialog=i.get(h$)}open(r,i){let s;(i={...this._defaultOptions||new a_,...i}).id=i.id||`${this._idPrefix}${bue++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(r,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:i_,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(a,l,c)=>(s=new this._dialogRefConstructor(a,i,c),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let i=r.length;for(;i--;)r[i].close()}}return(t=e).\u0275fac=function(r){uE()},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})(),u_=(()=>{var t;class e extends Eue{constructor(r,i,s,o,a,l,c,u){super(r,i,o,l,c,a,l_,mue,c_,u),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(r){return new(r||t)(C(vc),C(wt),C(xd,8),C(yue,8),C(k$),C(t,12),C(t_),C(Kb,8))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})(),Cue=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[u_,wue],imports:[rue,Kj,e_,m$,m$]}),e})(),Iue=(()=>{var t;class e{constructor(){}geticon(r){return Pi[r]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var Pi=function(t){return t.Initial="./assets/sobres/sobre1.png",t.Peasant="",t.Heroe="./assets/PJ/Heroe1.png",t.Guerrero="./assets/PJ/hacha1.png",t.Arquero="./assets/PJ/ballesta1.png",t.Paladin="./assets/PJ/caballero1.png",t.picaro="./assets/PJ/espada1.png",t.caballero="../../assets/PJ/caballo1.png",t.heal="./assets/PJ/heal1.png",t.Sorcerer="./assets/PJ/sorcer1.png",t.Guerrero1="./assets/PJ/hacha1.png",t.Arquero1="./assets/PJ/ballesta1.png",t.Paladin1="./assets/PJ/caballero1.png",t.picaro1="./assets/PJ/espada1.png",t.caballero1="./assets/PJ/caballo1.png",t.heal1="./assets/PJ/heal1.png",t.Sorcerer1="./assets/PJ/sorcer1.png",t.Guerrero2="./assets/PJ/hacha2.png",t.Arquero2="./assets/PJ/ballesta2.png",t.Paladin2="./assets/PJ/caballero2.png",t.picaro2="./assets/PJ/espada2.png",t.caballero2="./assets/PJ/caballo2.png",t.heal2="./assets/PJ/heal2.png",t.Sorcerer2="./assets/PJ/sorcer2.png",t.arco="./assets/arma/arco.png",t.palo="./assets/arma/porra.png",t.ballesta="./assets/arma/ballesta01.png",t.lanza="./assets/arma/lanza.png",t.daga="./assets/arma/daga2.png",t.vara="./assets/arma/baston3.png",t.lanzaCab="./assets/arma/lanzaC.png",t.espada="./assets/arma/espada01.png",t.noArma="./assets/arma/puno.png",t.cuero="./assets/armadura/armadura5.png",t.ligera="./assets/armadura/armadura2.png",t.media="./assets/armadura/armadura1.png",t.pesada="./assets/armadura/armadura3.png",t.completa="./assets/armadura/armadura4.png",t.noArmadura="./assets/armadura/cuerpo.png",t["Pocion PV peque\xf1a"]="./assets/pociones/pocion.png",t["Pocion mp peque\xf1a"]="./assets/pociones/pocion5.png",t.UPDEF="./assets/pociones/pocion1.png",t.UPVEL="./assets/pociones/pocion3.png",t.UPFUE="./assets/pociones/pocion4.png",t.UPMOV="./assets/pociones/pocion2.png",t.Carga="./assets/skills/carga.png",t.Da\u00f1o="./assets/skills/explosion.png",t.romperdef="./assets/skills/romper.png",t.taunt="./assets/skills/taunt.png",t.alcance="./assets/skills/mirilla.png",t.critico="./assets/skills/explosion.png",t.untaunt="./assets/skills/untaunt.png",t.Fuego="./assets/skills/dom.png",t.hielo="./assets/skills/hielo.png",t.rayo="./assets/skills/electrico.png",t.confusion="./assets/skills/depresion.png",t.mute="./assets/skills/mute.png",t.curar="./assets/skills/soltar.png",t.escudo="./assets/skills/proteger.png",t.Movimiento="./assets/skills/huracan.png",t.velocidad="./assets/skills/huracan1.png",t.quitardebuff="./assets/skills/sol.png",t.ocultarse="./assets/skills/ninja.png",t.sangrante="./assets/skills/sangre.png",t.vacio="./assets/pociones/vacio1.png",t.river1="./assets/mapariver1.bmp",t}(Pi||{});function O$(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){O$(s,r,i,o,a,"next",l)}function a(l){O$(s,r,i,o,a,"throw",l)}o(void 0)})}}const P=function(t,e){if(!t)throw bc(e)},bc=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},P$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},d_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new Aue;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Aue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F$=function(t){const e=P$(t);return d_.encodeByteArray(e,!0)},h_=function(t){return F$(t).replace(/\./g,"")},f_=function(t){try{return d_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xue(t){return L$(void 0,t)}function L$(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mue(n)||(t[n]=L$(t[n],e[n]));return t}function Mue(t){return"__proto__"!==t}const p_=()=>{try{return function Rue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&f_(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},V$=t=>{var e,n;return null===(n=null===(e=p_())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},B$=t=>{const e=V$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},U$=()=>{var t;return null===(t=p_())||void 0===t?void 0:t.config},j$=t=>{var e;return null===(e=p_())||void 0===e?void 0:e[`_${t}`]};class fa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function $$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[h_(JSON.stringify({alg:"none",type:"JWT"})),h_(JSON.stringify(o)),""].join(".")}function on(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function g0(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function H$(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pa(){try{return"object"==typeof indexedDB}catch{return!1}}function ch(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function m0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fi.prototype.create)}}class Fi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Vue(t,e){return t.replace(Bue,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new qr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Bue=/\{\$([^}]+)}/g;function uh(t){return JSON.parse(t)}function an(t){return JSON.stringify(t)}const g_=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=uh(f_(s[0])||""),n=uh(f_(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function _s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ec(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function _0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function m_(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function __(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(z$(s)&&z$(o)){if(!__(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z$(t){return null!==t&&"object"==typeof t}function dh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class $ue{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class zue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Gue(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=y0),void 0===i.error&&(i.error=y0),void 0===i.complete&&(i.complete=y0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y0(){}function Cc(t,e){return`${t} failed: ${e} argument `}const y_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Wue=1e3,Kue=2,Yue=144e5,Que=.5;function v0(t,e=Wue,n=Kue){const r=e*Math.pow(n,t),i=Math.round(Que*r*(Math.random()-.5)*2);return Math.min(Yue,r+i)}function Ye(t){return t&&t._delegate?t._delegate:t}class Cn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ga="[DEFAULT]";class Zue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function ede(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ga?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const w0=[];var Se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Se||{});const G$={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},nde=Se.INFO,rde={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},ide=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=rde[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class ma{constructor(e){this.name=e,this._logLevel=nde,this._logHandler=ide,this._userLogHandler=null,w0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?G$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const sde=(t,e)=>e.some(n=>t instanceof n);let q$,W$;const K$=new WeakMap,b0=new WeakMap,Y$=new WeakMap,E0=new WeakMap,C0=new WeakMap;let I0={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return b0.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Y$.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return to(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function hde(t){return"function"==typeof t?function dde(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ade(){return W$||(W$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(D0(this),e),to(K$.get(this))}:function(...e){return to(t.apply(D0(this),e))}:function(e,...n){const r=t.call(D0(this),e,...n);return Y$.set(r,e.sort?e.sort():[e]),to(r)}}(t):(t instanceof IDBTransaction&&function cde(t){if(b0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});b0.set(t,e)}(t),sde(t,function ode(){return q$||(q$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,I0):t)}function to(t){if(t instanceof IDBRequest)return function lde(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(to(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K$.set(n,t)}).catch(()=>{}),C0.set(e,t),e}(t);if(E0.has(t))return E0.get(t);const e=hde(t);return e!==t&&(E0.set(t,e),C0.set(e,t)),e}const D0=t=>C0.get(t),pde=["get","getKey","getAll","getAllKeys","count"],gde=["put","add","delete","clear"],T0=new Map;function Q$(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(T0.get(e))return T0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pde.includes(n))return;const s=function(){var o=m(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return T0.set(e,s),s}!function ude(t){I0=t(I0)}(t=>({...t,get:(e,n,r)=>Q$(e,n)||t.get(e,n,r),has:(e,n)=>!!Q$(e,n)||t.has(e,n)}));class mde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function _de(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const S0="@firebase/app",_a=new ma("@firebase/app"),v_="[DEFAULT]",Hde={[S0]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ya=new Map,w_=new Map;function zde(t,e){try{t.container.addComponent(e)}catch(n){_a.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bn(t){const e=t.name;if(w_.has(e))return _a.debug(`There were multiple attempts to register component ${e}.`),!1;w_.set(e,t);for(const n of ya.values())zde(n,t);return!0}function va(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ys=new Fi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qde{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}const no="9.23.0";function Z$(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:v_,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ys.create("bad-app-name",{appName:String(i)});if(n||(n=U$()),!n)throw ys.create("no-options");const s=ya.get(i);if(s){if(__(n,s.options)&&__(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}const o=new tde(i);for(const l of w_.values())o.addComponent(l);const a=new qde(n,r,o);return ya.set(i,a),a}function b_(t=v_){const e=ya.get(t);if(!e&&t===v_&&U$())return Z$();if(!e)throw ys.create("no-app",{appName:t});return e}function J$(){return Array.from(ya.values())}function lt(t,e,n){var r;let i=null!==(r=Hde[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void _a.warn(a.join(" "))}Bn(new Cn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Wde="firebase-heartbeat-database",Kde=1,ph="firebase-heartbeat-store";let x0=null;function eH(){return x0||(x0=function fde(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=to(o);return r&&o.addEventListener("upgradeneeded",l=>{r(to(o.result),l.oldVersion,l.newVersion,to(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Wde,Kde,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ph)}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),x0}function M0(){return(M0=m(function*(t){try{return yield(yield eH()).transaction(ph).objectStore(ph).get(nH(t))}catch(e){if(e instanceof qr)_a.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e?.message});_a.warn(n.message)}}})).apply(this,arguments)}function tH(t,e){return R0.apply(this,arguments)}function R0(){return(R0=m(function*(t,e){try{const r=(yield eH()).transaction(ph,"readwrite");yield r.objectStore(ph).put(e,nH(t)),yield r.done}catch(n){if(n instanceof qr)_a.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n?.message});_a.warn(r.message)}}})).apply(this,arguments)}function nH(t){return`${t.name}!${t.options.appId}`}class Zde{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ehe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rH();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=rH(),{heartbeatsToSend:r,unsentEntries:i}=function Jde(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iH(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iH(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=h_(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function rH(){return(new Date).toISOString().substring(0,10)}class ehe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!pa()&&ch().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Yde(t){return M0.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return tH(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return tH(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function iH(t){return h_(JSON.stringify({version:2,heartbeats:t})).length}!function the(t){Bn(new Cn("platform-logger",e=>new mde(e),"PRIVATE")),Bn(new Cn("heartbeat",e=>new Zde(e),"PRIVATE")),lt(S0,"0.9.13",t),lt(S0,"0.9.13","esm2017"),lt("fire-js","")}(""),lt("firebase","9.23.0","app");const ihe=(t,e)=>e.some(n=>t instanceof n);let sH,oH;const aH=new WeakMap,k0=new WeakMap,lH=new WeakMap,N0=new WeakMap,O0=new WeakMap;let P0={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return k0.get(t);if("objectStoreNames"===e)return t.objectStoreNames||lH.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function dhe(t){return"function"==typeof t?function uhe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ohe(){return oH||(oH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(F0(this),e),ro(aH.get(this))}:function(...e){return ro(t.apply(F0(this),e))}:function(e,...n){const r=t.call(F0(this),e,...n);return lH.set(r,e.sort?e.sort():[e]),ro(r)}}(t):(t instanceof IDBTransaction&&function lhe(t){if(k0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});k0.set(t,e)}(t),ihe(t,function she(){return sH||(sH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,P0):t)}function ro(t){if(t instanceof IDBRequest)return function ahe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ro(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aH.set(n,t)}).catch(()=>{}),O0.set(e,t),e}(t);if(N0.has(t))return N0.get(t);const e=dhe(t);return e!==t&&(N0.set(t,e),O0.set(e,t)),e}const F0=t=>O0.get(t),fhe=["get","getKey","getAll","getAllKeys","count"],phe=["put","add","delete","clear"],L0=new Map;function cH(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(L0.get(e))return L0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=phe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!fhe.includes(n))return;const s=function(){var o=m(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return L0.set(e,s),s}!function che(t){P0=t(P0)}(t=>({...t,get:(e,n,r)=>cH(e,n)||t.get(e,n,r),has:(e,n)=>!!cH(e,n)||t.has(e,n)}));const uH="@firebase/installations",V0="0.6.4",dH=1e4,hH=`w:${V0}`,fH="FIS_v2",ghe="https://firebaseinstallations.googleapis.com/v1",mhe=36e5,vs=new Fi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pH(t){return t instanceof qr&&t.code.includes("request-failed")}function B0({projectId:t}){return`${ghe}/projects/${t}/installations`}function gH(t){return{token:t.token,requestStatus:2,expiresIn:whe(t.expiresIn),creationTime:Date.now()}}function U0(t,e){return j0.apply(this,arguments)}function j0(){return(j0=m(function*(t,e){const r=(yield e.json()).error;return vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function mH({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $0(t){return H0.apply(this,arguments)}function H0(){return(H0=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function whe(t){return Number(t.replace("s","000"))}function z0(){return(z0=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=B0(t),i=mH(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:fH,appId:t.appId,sdkVersion:hH})},l=yield $0(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:gH(c.authToken)}}throw yield U0("Create Installation",l)})).apply(this,arguments)}function yH(t){return new Promise(e=>{setTimeout(e,t)})}const Ihe=/^[cdef][\w-]{21}$/,G0="";function Dhe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function The(t){return function Che(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Ihe.test(n)?n:G0}catch{return G0}}function Ic(t){return`${t.appName}!${t.appId}`}const Dc=new Map;function vH(t,e){const n=Ic(t);wH(n,e),function xhe(t,e){const n=function bH(){return!wa&&"BroadcastChannel"in self&&(wa=new BroadcastChannel("[Firebase] FID Change"),wa.onmessage=t=>{wH(t.data.key,t.data.fid)}),wa}();n&&n.postMessage({key:t,fid:e}),function EH(){0===Dc.size&&wa&&(wa.close(),wa=null)}()}(n,e)}function wH(t,e){const n=Dc.get(t);if(n)for(const r of n)r(e)}let wa=null;const Mhe="firebase-installations-database",Rhe=1,ba="firebase-installations-store";let q0=null;function W0(){return q0||(q0=function hhe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ro(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ro(o.result),l.oldVersion,l.newVersion,ro(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Mhe,Rhe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ba)}})),q0}function E_(t,e){return K0.apply(this,arguments)}function K0(){return(K0=m(function*(t,e){const n=Ic(t),i=(yield W0()).transaction(ba,"readwrite"),s=i.objectStore(ba),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&vH(t,e.fid),e})).apply(this,arguments)}function Y0(t){return Q0.apply(this,arguments)}function Q0(){return(Q0=m(function*(t){const e=Ic(t),r=(yield W0()).transaction(ba,"readwrite");yield r.objectStore(ba).delete(e),yield r.done})).apply(this,arguments)}function gh(t,e){return X0.apply(this,arguments)}function X0(){return(X0=m(function*(t,e){const n=Ic(t),i=(yield W0()).transaction(ba,"readwrite"),s=i.objectStore(ba),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&vH(t,a.fid),a})).apply(this,arguments)}function Z0(t){return J0.apply(this,arguments)}function J0(){return J0=m(function*(t){let e;const n=yield gh(t.appConfig,r=>{const i=function khe(t){return IH(t||{fid:Dhe(),registrationStatus:0})}(r),s=function Nhe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(vs.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Ohe(t,e){return eD.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Phe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===G0?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),J0.apply(this,arguments)}function eD(){return eD=m(function*(t,e){try{const n=yield function Ehe(t,e){return z0.apply(this,arguments)}(t,e);return E_(t.appConfig,n)}catch(n){throw pH(n)&&409===n.customData.serverCode?yield Y0(t.appConfig):yield E_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),eD.apply(this,arguments)}function Phe(t){return tD.apply(this,arguments)}function tD(){return(tD=m(function*(t){let e=yield CH(t.appConfig);for(;1===e.registrationStatus;)yield yH(100),e=yield CH(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Z0(t);return r||n}return e})).apply(this,arguments)}function CH(t){return gh(t,e=>{if(!e)throw vs.create("installation-not-found");return IH(e)})}function IH(t){return function Fhe(t){return 1===t.registrationStatus&&t.registrationTime+dH<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function nD(){return(nD=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Vhe(t,{fid:e}){return`${B0(t)}/${e}/authTokens:generate`}(t,n),i=function _H(t,{refreshToken:e}){const n=mH(t);return n.append("Authorization",function bhe(t){return`${fH} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:hH,appId:t.appId}})},l=yield $0(()=>fetch(r,a));if(l.ok)return gH(yield l.json());throw yield U0("Generate Auth Token",l)})).apply(this,arguments)}function rD(t){return iD.apply(this,arguments)}function iD(){return iD=m(function*(t,e=!1){let n;const r=yield gh(t.appConfig,s=>{if(!TH(s))throw vs.create("not-registered");const o=s.authToken;if(!e&&function jhe(t){return 2===t.requestStatus&&!function $he(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mhe}(t)}(o))return s;if(1===o.requestStatus)return n=function Bhe(t,e){return sD.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw vs.create("app-offline");const a=function Hhe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function Uhe(t,e){return oD.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),iD.apply(this,arguments)}function sD(){return(sD=m(function*(t,e){let n=yield DH(t.appConfig);for(;1===n.authToken.requestStatus;)yield yH(100),n=yield DH(t.appConfig);const r=n.authToken;return 0===r.requestStatus?rD(t,e):r})).apply(this,arguments)}function DH(t){return gh(t,e=>{if(!TH(e))throw vs.create("not-registered");return function zhe(t){return 1===t.requestStatus&&t.requestTime+dH<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function oD(){return oD=m(function*(t,e){try{const n=yield function Lhe(t,e){return nD.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield E_(t.appConfig,r),n}catch(n){if(!pH(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield E_(t.appConfig,r)}else yield Y0(t.appConfig);throw n}}),oD.apply(this,arguments)}function TH(t){return void 0!==t&&2===t.registrationStatus}function aD(){return(aD=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield Z0(e);return r?r.catch(console.error):rD(e).catch(console.error),n.fid})).apply(this,arguments)}function lD(){return lD=m(function*(t,e=!1){const n=t;return yield function Whe(t){return cD.apply(this,arguments)}(n),(yield rD(n,e)).token}),lD.apply(this,arguments)}function cD(){return(cD=m(function*(t){const{registrationPromise:e}=yield Z0(t);e&&(yield e)})).apply(this,arguments)}function hD(t){return vs.create("missing-app-config-values",{valueName:t})}const SH="installations",Zhe=t=>{const e=t.getProvider("app").getImmediate(),n=function Qhe(t){if(!t||!t.options)throw hD("App Configuration");if(!t.name)throw hD("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hD(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:va(e,"heartbeat"),_delete:()=>Promise.resolve()}},Jhe=t=>{const n=va(t.getProvider("app").getImmediate(),SH).getImmediate();return{getId:()=>function Ghe(t){return aD.apply(this,arguments)}(n),getToken:i=>function qhe(t){return lD.apply(this,arguments)}(n,i)}};(function efe(){Bn(new Cn(SH,Zhe,"PUBLIC")),Bn(new Cn("installations-internal",Jhe,"PRIVATE"))})(),lt(uH,V0),lt(uH,V0,"esm2017");const fD="@firebase/remote-config",pr=new Fi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dfe{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function hfe(t=navigator){return t.languages&&t.languages[0]||t.language}class ffe{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:hfe()},c={method:"POST",headers:a,body:JSON.stringify(l)},u=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const T=new Error("The operation was aborted.");T.name="AbortError",y(T)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(v){let y="fetch-client-network";throw"AbortError"===v?.name&&(y="fetch-timeout"),pr.create(y,{originalErrorMessage:v?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,_;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw pr.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=v.entries,_=v.state}if("INSTANCE_STATE_UNSPECIFIED"===_?f=500:"NO_CHANGE"===_?f=304:("NO_TEMPLATE"===_||"EMPTY_CONFIG"===_)&&(g={}),304!==f&&200!==f)throw pr.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class mfe{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function pfe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(pr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function gfe(t){if(!(t instanceof qr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+v0(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class vfe{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function I_(t,e){const n=t.target.error||void 0;return pr.create(e,{originalErrorMessage:n&&n?.message})}const Ea="app_namespace_store";class Cfe{constructor(e,n,r,i=function Efe(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(I_(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ea,{keyPath:"compositeKey"})}}catch(n){e(pr.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ea],"readonly").objectStore(Ea),l=n.createCompositeKey(e);try{const c=a.get(l);c.onerror=u=>{s(I_(u,"storage-get"))},c.onsuccess=u=>{const d=u.target.result;i(d?d.value:void 0)}}catch(c){s(pr.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const l=i.transaction([Ea],"readwrite").objectStore(Ea),c=r.createCompositeKey(e);try{const u=l.put({compositeKey:c,value:n});u.onerror=d=>{o(I_(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(pr.create("storage-set",{originalErrorMessage:u?.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ea],"readwrite").objectStore(Ea),l=n.createCompositeKey(e);try{const c=a.delete(l);c.onerror=u=>{s(I_(u,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(pr.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Ife{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Tfe(){return yD.apply(this,arguments)}function yD(){return(yD=m(function*(){if(!pa())return!1;try{return yield ch()}catch{return!1}})).apply(this,arguments)}!function Dfe(){Bn(new Cn("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pr.create("registration-window");if(!pa())throw pr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw pr.create("registration-project-id");if(!o)throw pr.create("registration-api-key");if(!a)throw pr.create("registration-app-id");const l=new Cfe(a,r.name,n=n||"firebase"),c=new Ife(l),u=new ma(fD);u.logLevel=Se.ERROR;const d=new ffe(i,no,n,s,o,a),h=new mfe(d,l),f=new dfe(h,l,c,u),p=new vfe(r,f,c,l,u);return function lfe(t){const e=Ye(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),lt(fD,"0.4.4"),lt(fD,"0.4.4","esm2017")}();const Sfe=(t,e)=>e.some(n=>t instanceof n);let RH,kH;const NH=new WeakMap,vD=new WeakMap,OH=new WeakMap,wD=new WeakMap,bD=new WeakMap;let ED={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return vD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||OH.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ofe(t){return"function"==typeof t?function Nfe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xfe(){return kH||(kH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(CD(this),e),ws(NH.get(this))}:function(...e){return ws(t.apply(CD(this),e))}:function(e,...n){const r=t.call(CD(this),e,...n);return OH.set(r,e.sort?e.sort():[e]),ws(r)}}(t):(t instanceof IDBTransaction&&function Rfe(t){if(vD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vD.set(t,e)}(t),Sfe(t,function Afe(){return RH||(RH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,ED):t)}function ws(t){if(t instanceof IDBRequest)return function Mfe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ws(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NH.set(n,t)}).catch(()=>{}),bD.set(e,t),e}(t);if(wD.has(t))return wD.get(t);const e=Ofe(t);return e!==t&&(wD.set(t,e),bD.set(e,t)),e}const CD=t=>bD.get(t);function PH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ws(o.result),l.oldVersion,l.newVersion,ws(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function ID(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),ws(n).then(()=>{})}const Pfe=["get","getKey","getAll","getAllKeys","count"],Ffe=["put","add","delete","clear"],DD=new Map;function FH(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(DD.get(e))return DD.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ffe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pfe.includes(n))return;const s=function(){var o=m(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return DD.set(e,s),s}!function kfe(t){ED=t(ED)}(t=>({...t,get:(e,n,r)=>FH(e,n)||t.get(e,n,r),has:(e,n)=>!!FH(e,n)||t.has(e,n)}));const Lfe="/firebase-messaging-sw.js",Vfe="/firebase-cloud-messaging-push-scope",LH="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bfe="https://fcmregistrations.googleapis.com/v1",VH="google.c.a.c_id",Ufe="google.c.a.c_l",jfe="google.c.a.ts";var D_=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(D_||{});function bs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zfe(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const TD="fcm_token_details_db",Gfe=5,BH="fcm_token_object_Store";function SD(){return SD=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(TD))return null;let e=null;return(yield PH(TD,Gfe,{upgrade:(r=m(function*(i,s,o,a){var l;if(s<2||!i.objectStoreNames.contains(BH))return;const c=a.objectStore(BH),u=yield c.index("fcmSenderId").get(t);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:bs(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:bs(d.auth),p256dh:bs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:bs(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:bs(d.auth),p256dh:bs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:bs(d.vapidKey)}}}}),function(s,o,a,l){return r.apply(this,arguments)})})).close(),yield ID(TD),yield ID("fcm_vapid_details_db"),yield ID("undefined"),function Wfe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),SD.apply(this,arguments)}const Kfe="firebase-messaging-database",Yfe=1,Ca="firebase-messaging-store";let AD=null;function xD(){return AD||(AD=PH(Kfe,Yfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ca)}})),AD}function UH(t){return MD.apply(this,arguments)}function MD(){return MD=m(function*(t){const e=OD(t),r=yield(yield xD()).transaction(Ca).objectStore(Ca).get(e);if(r)return r;{const i=yield function qfe(t){return SD.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield RD(t,i),i}}),MD.apply(this,arguments)}function RD(t,e){return kD.apply(this,arguments)}function kD(){return(kD=m(function*(t,e){const n=OD(t),i=(yield xD()).transaction(Ca,"readwrite");return yield i.objectStore(Ca).put(e,n),yield i.done,e})).apply(this,arguments)}function ND(){return(ND=m(function*(t){const e=OD(t),r=(yield xD()).transaction(Ca,"readwrite");yield r.objectStore(Ca).delete(e),yield r.done})).apply(this,arguments)}function OD({appConfig:t}){return t.appId}const In=new Fi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Zfe(t,e){return PD.apply(this,arguments)}function PD(){return(PD=m(function*(t,e){const n=yield BD(t),r=$H(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(VD(t.appConfig),i)).json()}catch(o){throw In.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw In.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw In.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function FD(){return(FD=m(function*(t,e){const n=yield BD(t),r=$H(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${VD(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw In.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw In.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw In.create("token-update-no-token");return s.token})).apply(this,arguments)}function jH(t,e){return LD.apply(this,arguments)}function LD(){return(LD=m(function*(t,e){const r={method:"DELETE",headers:yield BD(t)};try{const s=yield(yield fetch(`${VD(t.appConfig)}/${e}`,r)).json();if(s.error)throw In.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw In.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function VD({projectId:t}){return`${Bfe}/projects/${t}/registrations`}function BD(t){return UD.apply(this,arguments)}function UD(){return(UD=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function $H({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==LH&&(i.web.applicationPubKey=r),i}const epe=6048e5;function jD(){return jD=m(function*(t){const e=yield function rpe(t,e){return GD.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:bs(e.getKey("auth")),p256dh:bs(e.getKey("p256dh"))},r=yield UH(t.firebaseDependencies);if(r){if(function ipe(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+epe?function npe(t,e){return HD.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield jH(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return zH(t.firebaseDependencies,n)}return zH(t.firebaseDependencies,n)}),jD.apply(this,arguments)}function $D(){return $D=m(function*(t){const e=yield UH(t.firebaseDependencies);e&&(yield jH(t.firebaseDependencies,e.token),yield function Qfe(t){return ND.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),$D.apply(this,arguments)}function HD(){return HD=m(function*(t,e){try{const n=yield function Jfe(t,e){return FD.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield RD(t.firebaseDependencies,r),n}catch(n){throw yield function HH(t){return $D.apply(this,arguments)}(t),n}}),HD.apply(this,arguments)}function zH(t,e){return zD.apply(this,arguments)}function zD(){return(zD=m(function*(t,e){const r={token:yield Zfe(t,e),createTime:Date.now(),subscriptionOptions:e};return yield RD(t,r),r.token})).apply(this,arguments)}function GD(){return(GD=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zfe(e)})})).apply(this,arguments)}function GH(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function spe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function ope(t,e){e.data&&(t.data=e.data)}(e,t),function ape(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}(e,t),e}function qH(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function qD(t){return In.create("missing-app-config-values",{valueName:t})}qH("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qH("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class upe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function cpe(t){if(!t||!t.options)throw qD("App Configuration Object");if(!t.name)throw qD("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw qD(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function WD(){return(WD=m(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Lfe,{scope:Vfe}),t.swRegistration.update().catch(()=>{})}catch(e){throw In.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function KD(){return(KD=m(function*(t,e){if(!e&&!t.swRegistration&&(yield function WH(t){return WD.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function YD(){return(YD=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=LH)})).apply(this,arguments)}function QD(){return QD=m(function*(t,e){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield function hpe(t,e){return YD.apply(this,arguments)}(t,e?.vapidKey),yield function dpe(t,e){return KD.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function tpe(t){return jD.apply(this,arguments)}(t)}),QD.apply(this,arguments)}function XD(){return(XD=m(function*(t,e,n){const r=function ppe(t){switch(t){case D_.NOTIFICATION_CLICKED:return"notification_open";case D_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[VH],message_name:n[Ufe],message_time:n[jfe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ZD(){return ZD=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===D_.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(GH(n)):t.onMessageHandler.next(GH(n)));const r=n.data;(function lpe(t){return"object"==typeof t&&!!t&&VH in t})(r)&&"1"===r["google.c.a.e"]&&(yield function fpe(t,e,n){return XD.apply(this,arguments)}(t,n.messageType,r))}),ZD.apply(this,arguments)}const YH="@firebase/messaging",mpe=t=>{const e=new upe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function gpe(t,e){return ZD.apply(this,arguments)}(e,n)),e},_pe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function KH(t,e){return QD.apply(this,arguments)}(e,r)}};function XH(){return JD.apply(this,arguments)}function JD(){return(JD=m(function*(){try{yield ch()}catch{return!1}return typeof window<"u"&&pa()&&m0()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ype(){Bn(new Cn("messaging",mpe,"PUBLIC")),Bn(new Cn("messaging-internal",_pe,"PRIVATE")),lt(YH,"0.12.4"),lt(YH,"0.12.4","esm2017")}();const T_="analytics",bpe="firebase_id",Epe="origin",Cpe=6e4,Ipe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nT="https://www.googletagmanager.com/gtag/js",ln=new ma("@firebase/analytics"),nr=new Fi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Tpe(t){if(!t.startsWith(nT)){const e=nr.create("invalid-gtag-resource",{gtagURL:t});return ln.warn(e.message),""}return t}function ZH(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rT(){return(rT=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield ZH(n)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){ln.error(a)}t("config",i,s)})).apply(this,arguments)}function iT(){return(iT=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield ZH(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){ln.error(s)}})).apply(this,arguments)}const Ppe=30,JH=new class Lpe{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Vpe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function sT(){return(sT=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Vpe(r)},s=Ipe.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function oT(){return(oT=m(function*(t,e=JH,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw nr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw nr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Hpe;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:Cpe),e3({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function e3(t,e,n){return aT.apply(this,arguments)}function aT(){return aT=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=JH){var s;const{appId:o,measurementId:a}=t;try{yield function jpe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(nr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(a)return ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function Bpe(t){return sT.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function $pe(t){if(!(t instanceof qr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?v0(n,i.intervalMillis,Ppe):v0(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,d),ln.debug(`Calling attemptFetch again in ${u} millis`),e3(t,d,r,i)}}),aT.apply(this,arguments)}class Hpe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let lT,gT;function cT(){return(cT=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function mT(){return(mT=m(function*(){if(!pa())return ln.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield ch()}catch(t){return ln.warn(nr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function _T(){return _T=m(function*(t,e,n,r,i,s,o){var a;const l=function Upe(t){return oT.apply(this,arguments)}(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ln.error(f)),e.push(l);const c=function Qpe(){return mT.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([l,c]);(function Ope(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(nT)&&n.src.includes(t))return n;return null})(s)||function Ape(t,e){const n=function Spe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Tpe}),r=document.createElement("script"),i=`${nT}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),gT&&(i("consent","default",gT),function t3(t){gT=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Epe]="firebase",h.update=!0,null!=d&&(h[bpe]=d),i("config",u.measurementId,h),lT&&(i("set",lT),function n3(t){lT=t}(void 0)),u.measurementId}),_T.apply(this,arguments)}class Zpe{constructor(e){this.app=e}_delete(){return delete Li[this.app.options.appId],Promise.resolve()}}let Li={},r3=[];const s3={};let a3,Vi,S_="dataLayer",yT=!1;function ege(t,e,n){!function Jpe(){const t=[];if(g0()&&t.push("This is a browser extension environment."),m0()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=nr.create("invalid-analytics-context",{errorInfo:e});ln.warn(n.message)}}();const r=t.options.appId;if(!r)throw nr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw nr.create("no-api-key");ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Li[r])throw nr.create("already-exists",{id:r});if(!yT){!function xpe(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(S_);const{wrappedGtag:s,gtagCore:o}=function Npe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function kpe(t,e,n,r){function s(){return s=m(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function Rpe(t,e,n,r,i){return iT.apply(this,arguments)}(t,e,n,l,c)}else if("config"===o){const[l,c]=a;yield function Mpe(t,e,n,r,i,s){return rT.apply(this,arguments)}(t,e,n,r,l,c)}else if("consent"===o){const[l]=a;t("consent","update",l)}else if("get"===o){const[l,c,u]=a;t("get",l,c,u)}else if("set"===o){const[l]=a;t("set",l)}else t(o,...a)}catch(l){ln.error(l)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Li,r3,s3,S_,"gtag");Vi=s,a3=o,yT=!0}return Li[r]=function Xpe(t,e,n,r,i,s,o){return _T.apply(this,arguments)}(t,r3,s3,e,a3,S_,n),new Zpe(t)}function nge(){return vT.apply(this,arguments)}function vT(){return(vT=m(function*(){if(g0()||!m0()||!pa())return!1;try{return yield ch()}catch{return!1}})).apply(this,arguments)}const l3="@firebase/analytics";!function ige(){Bn(new Cn(T_,(e,{options:n})=>ege(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Bn(new Cn("analytics-internal",function t(e){try{const n=e.getProvider(T_).getImmediate();return{logEvent:(r,i,s)=>function rge(t,e,n,r){t=Ye(t),function zpe(t,e,n,r,i){return cT.apply(this,arguments)}(Vi,Li[t.app.options.appId],e,n,r).catch(i=>ln.error(i))}(n,r,i,s)}}catch(n){throw nr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),lt(l3,"0.10.0"),lt(l3,"0.10.0","esm2017")}();const age=new class oge extends Km{}(class sge extends Wm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),mh=new Gs("7.6.1"),bT="__angularfire_symbol__analyticsIsSupportedValue",ET="__angularfire_symbol__analyticsIsSupported",CT="__angularfire_symbol__remoteConfigIsSupportedValue",IT="__angularfire_symbol__remoteConfigIsSupported",DT="__angularfire_symbol__messagingIsSupportedValue",TT="__angularfire_symbol__messagingIsSupported";function A_(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[ET]||(globalThis[ET]=nge().then(t=>globalThis[bT]=t).catch(()=>globalThis[bT]=!1)),globalThis[TT]||(globalThis[TT]=XH().then(t=>globalThis[DT]=t).catch(()=>globalThis[DT]=!1)),globalThis[IT]||(globalThis[IT]=Tfe().then(t=>globalThis[CT]=t).catch(()=>globalThis[CT]=!1));const x_=(t,e)=>{const n=e?[e]:J$(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Tc(){}class u3{constructor(e,n=age){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class lge{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tc,{},Tc,Tc)),n.pipe(Vn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let M_=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new u3(Zone.current)),this.insideAngular=n.run(()=>new u3(Zone.current,Xm)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(C(de))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ia(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Da(t){return Ia().ngZone.run(()=>t())}function uge(t){return Ia(),function dge(t){return function(n){return(n=n.lift(new lge(t.ngZone))).pipe(wp(t.outsideAngular),vp(t.insideAngular))}}(Ia())(t)}const hge=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Da(()=>t.apply(void 0,r))},At=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Da(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tc,{},Tc,Tc)))),r[s]=hge(r[s],n));const i=function cge(t){return Ia().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof He){const s=Ia();return i.pipe(wp(s.outsideAngular),vp(s.insideAngular))}return Da(()=>i)}return i instanceof He?i.pipe(uge):i instanceof Promise?Da(()=>new Promise((s,o)=>i.then(a=>Da(()=>s(a)),a=>Da(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Da(()=>i)};class Ta{constructor(e){return e}}class R_{constructor(){return J$()}}const AT=new k("angularfire2._apps"),pge={provide:Ta,useFactory:function fge(t){return t&&1===t.length?t[0]:new Ta(b_())},deps:[[new Yt,AT]]},gge={provide:R_,deps:[[new Yt,AT]]};function mge(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ta(r)}}let _ge=(()=>{class t{constructor(n){lt("angularfire",mh.full,"core"),lt("angularfire",mh.full,"app"),lt("angular",TP.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(C(Ci))},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[pge,gge]}),t})();function yge(t,...e){return{ngModule:_ge,providers:[{provide:AT,useFactory:mge(t),multi:!0,deps:[de,wt,M_,...e]}]}}const vge=At(Z$,!0),xT=new Map,d3={activated:!1,tokenObservers:[]},wge={initialized:!1,enabled:!1};function xt(t){return xT.get(t)||Object.assign({},d3)}function k_(){return wge}const MT="https://content-firebaseappcheck.googleapis.com/v1",Ige="exchangeDebugToken",h3={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Tge{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new fa,yield function Sge(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new fa,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Dn=new Fi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RT(t){if(!xt(t).activated)throw Dn.create("use-before-activation",{appName:t.name})}function P_(t,e){return NT.apply(this,arguments)}function NT(){return(NT=m(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw Dn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Dn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Dn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Dn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}})).apply(this,arguments)}function f3(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${MT}/projects/${n}/apps/${r}:${Ige}?key=${i}`,body:{debug_token:e}}}const Rge="firebase-app-check-database",kge=1,_h="firebase-app-check-store";let F_=null;function OT(){return(OT=m(function*(t,e){const r=(yield function g3(){return F_||(F_=new Promise((t,e)=>{try{const n=indexedDB.open(Rge,kge);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Dn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_h,{keyPath:"compositeKey"})}}catch(n){e(Dn.create("storage-open",{originalErrorMessage:n?.message}))}}),F_)}()).transaction(_h,"readwrite"),s=r.objectStore(_h).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Dn.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const yh=new ma("@firebase/app-check");function LT(t,e){return pa()?function Oge(t,e){return function m3(t,e){return OT.apply(this,arguments)}(function y3(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{yh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function BT(){return k_().enabled}function UT(){return jT.apply(this,arguments)}function jT(){return(jT=m(function*(){const t=k_();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Uge={error:"UNKNOWN_ERROR"};function jge(t){return d_.encodeString(JSON.stringify(t),!1)}function L_(t){return $T.apply(this,arguments)}function $T(){return($T=m(function*(t,e=!1){const n=t.app;RT(n);const r=xt(n);let s,i=r.token;if(i&&!Sc(i)&&(r.token=void 0,i=void 0),!i){const l=yield r.cachedTokenPromise;l&&(Sc(l)?i=l:yield LT(n,void 0))}if(!e&&i&&Sc(i))return{token:i.token};let a,o=!1;if(BT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=P_(f3(n,yield UT()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=yield r.exchangeTokenPromise;return yield LT(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield xt(n).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?yh.warn(l.message):yh.error(l),s=l}return i?s?a=Sc(i)?{token:i.token,internalError:s}:E3(s):(a={token:i.token},r.token=i,yield LT(n,i)):a=E3(s),o&&function b3(t,e){const n=xt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function v3(t){return HT.apply(this,arguments)}function HT(){return(HT=m(function*(t){const e=t.app;RT(e);const{provider:n}=xt(e);if(BT()){const r=yield UT(),{token:i}=yield P_(f3(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function GT(t,e){const n=xt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function w3(t){const{app:e}=t,n=xt(e);let r=n.tokenRefresher;r||(r=function $ge(t){const{app:e}=t;return new Tge(m(function*(){let r;if(r=xt(e).token?yield L_(t,!0):yield L_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},h3.RETRIAL_MIN_WAIT,h3.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Sc(t){return t.expireTimeMillis-Date.now()>0}function E3(t){return{token:jge(Uge),error:t}}class Hge{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xt(this.app);for(const n of e)GT(this.app,n.next);return Promise.resolve()}}const M3="app-check-internal";!function rme(){Bn(new Cn("app-check",t=>function zge(t,e){return new Hge(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(M3).initialize()})),Bn(new Cn(M3,t=>function Gge(t){return{getToken:e=>L_(t,e),getLimitedUseToken:()=>v3(t),addTokenListener:e=>function zT(t,e,n,r){const{app:i}=t,s=xt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Sc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),w3(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>w3(t))}(t,"INTERNAL",e),removeTokenListener:e=>GT(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),lt("@firebase/app-check","0.8.0")}();class B_{constructor(){return x_("app-check")}}typeof window<"u"&&window;const lme=function k3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},N3=new Fi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),U_=new ma("@firebase/auth");function j_(t,...e){U_.logLevel<=Se.ERROR&&U_.error(`Auth (${no}): ${t}`,...e)}function gr(t,...e){throw QT(t,...e)}function Bi(t,...e){return QT(t,...e)}function QT(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return N3.create(t,...e)}function L(t,e,...n){if(!t)throw QT(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw j_(e),new Error(e)}function io(t,e){t||Ui(e)}function vh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function P3(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class wh{constructor(e,n){this.shortDelay=e,this.longDelay=n,io(n>e,"Short delay should be less than long delay!"),this.isMobile=p0()||H$()}get(){return function ume(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function XT(){return"http:"===P3()||"https:"===P3()}()||g0()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ZT(t,e){io(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class F3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fme=new wh(3e4,6e4);function Et(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Mt(t,e,n,r){return JT.apply(this,arguments)}function JT(){return(JT=m(function*(t,e,n,r,i={}){return L3(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=dh(Object.assign({key:t.config.apiKey},o)).slice(1),l=yield t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),F3.fetch()(V3(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function L3(t,e,n){return eS.apply(this,arguments)}function eS(){return(eS=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hme),e);try{const i=new pme(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw bh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw bh(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw bh(t,"email-already-in-use",o);if("USER_DISABLED"===l)throw bh(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function O3(t,e,n){const r=Object.assign(Object.assign({},lme()),{[e]:n});return new Fi("auth","Firebase",r).create(e,{appName:t.name})}(t,u,c);gr(t,u)}}catch(i){if(i instanceof qr)throw i;gr(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Es(t,e,n,r){return tS.apply(this,arguments)}function tS(){return(tS=m(function*(t,e,n,r,i={}){const s=yield Mt(t,e,n,r,i);return"mfaPendingCredential"in s&&gr(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function V3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ZT(t.config,i):`${t.config.apiScheme}://${i}`}class pme{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),fme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bi(t,e,r);return i.customData._tokenResponse=n,i}function nS(){return(nS=m(function*(t,e){return Mt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function iS(){return(iS=m(function*(t,e){return Mt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sS(){return(sS=m(function*(t,e=!1){const n=Ye(t),r=yield n.getIdToken(e),i=$_(r);L(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Eh(oS(i.auth_time)),issuedAtTime:Eh(oS(i.iat)),expirationTime:Eh(oS(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function oS(t){return 1e3*Number(t)}function $_(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return j_("JWT malformed, contained fewer than 3 sections"),null;try{const i=f_(n);return i?JSON.parse(i):(j_("Failed to decode base64 JWT payload"),null)}catch(i){return j_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Cs(t,e){return aS.apply(this,arguments)}function aS(){return(aS=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof qr&&function wme({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class bme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class B3{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eh(this.lastLoginAt),this.creationTime=Eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ch(t){return lS.apply(this,arguments)}function lS(){return lS=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Cs(t,function _me(t,e){return iS.apply(this,arguments)}(n,{idToken:r}));L(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Ime(t){return t.map(e=>{var{providerId:n}=e,r=Dw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function Cme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new B3(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}),lS.apply(this,arguments)}function cS(){return(cS=m(function*(t){const e=Ye(t);yield Ch(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function uS(){return(uS=m(function*(t,e){const n=yield L3(t,{},m(function*(){const r=dh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=V3(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",F3.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Ih{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function vme(t){const e=$_(t);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return L(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Dme(t,e){return uS.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ih;return r&&(L("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(L("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(L("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ih,this.toJSON())}_performRefresh(){return Ui("not implemented")}}function so(t,e){L("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Sa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Dw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new B3(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield Cs(n,n.stsTokenManager.getToken(n.auth,e));return L(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function yme(t){return sS.apply(this,arguments)}(this,e)}reload(){return function Eme(t){return cS.apply(this,arguments)}(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Ch(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield Cs(e,function gme(t,e){return nS.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(l=n._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(u=n.lastLoginAt)&&void 0!==u?u:void 0,{uid:T,emailVerified:O,isAnonymous:G,providerData:ne,stsTokenManager:Fe}=n;L(T&&Fe,e,"internal-error");const kn=Ih.fromJSON(this.name,Fe);L("string"==typeof T,e,"internal-error"),so(d,e.name),so(h,e.name),L("boolean"==typeof O,e,"internal-error"),L("boolean"==typeof G,e,"internal-error"),so(f,e.name),so(p,e.name),so(g,e.name),so(_,e.name),so(v,e.name),so(y,e.name);const pi=new Sa({uid:T,auth:e,email:h,emailVerified:O,displayName:d,isAnonymous:G,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:kn,createdAt:v,lastLoginAt:y});return ne&&Array.isArray(ne)&&(pi.providerData=ne.map(Sk=>Object.assign({},Sk))),_&&(pi._redirectEventId=_),pi}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new Ih;i.updateFromServerResponse(n);const s=new Sa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ch(s),s})()}}const U3=new Map;function Is(t){io(t instanceof Function,"Expected a class definition");let e=U3.get(t);return e?(io(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U3.set(t,e),e)}const j3=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function H_(t,e,n){return`firebase:${t}:${e}:${n}`}class xc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=H_(this.userKey,i.apiKey,s),this.fullPersistenceKey=H_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Sa._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new xc(Is(j3),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Is(j3);const o=H_(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=yield c._get(o);if(u){const d=Sa._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new xc(s,e,r)):new xc(s,e,r)})()}}function $3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W3(e))return"Blackberry";if(K3(e))return"Webos";if(dS(e))return"Safari";if((e.includes("chrome/")||z3(e))&&!e.includes("edge/"))return"Chrome";if(q3(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function H3(t=on()){return/firefox\//i.test(t)}function dS(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z3(t=on()){return/crios\//i.test(t)}function G3(t=on()){return/iemobile/i.test(t)}function q3(t=on()){return/android/i.test(t)}function W3(t=on()){return/blackberry/i.test(t)}function K3(t=on()){return/webos/i.test(t)}function z_(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Y3(t=on()){return z_(t)||q3(t)||K3(t)||W3(t)||/windows phone/i.test(t)||G3(t)}function Q3(t,e=[]){let n;switch(t){case"Browser":n=$3(on());break;case"Worker":n=`${$3(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}function X3(t,e){return fS.apply(this,arguments)}function fS(){return(fS=m(function*(t,e){return Mt(t,"GET","/v2/recaptchaConfig",Et(t,e))})).apply(this,arguments)}function J3(t){return void 0!==t&&void 0!==t.enterprise}class ez{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function pS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Bi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function Mme(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}function tz(t){return`__${t}${Math.floor(1e6*Math.random())}`}class nz{constructor(e){this.type="recaptcha-enterprise",this.auth=cn(e)}verify(e="verify",n=!1){var r=this;return m(function*(){function s(){return s=m(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var l=m(function*(c,u){X3(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new ez(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(c,u){return l.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,l,c){const u=window.grecaptcha;J3(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&J3(window.grecaptcha))o(c,a,l);else{if(typeof window>"u")return void l(new Error("RecaptchaVerifier is only supported in browser"));pS("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,l)}).catch(u=>{l(u)})}}).catch(c=>{l(c)})})})()}}function oo(t,e,n){return gS.apply(this,arguments)}function gS(){return(gS=m(function*(t,e,n,r=!1){const i=new nz(t);let s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}const o=Object.assign({},e);return Object.assign(o,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class Ome{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Pme{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rz(this),this.idTokenSubscription=new rz(this),this.beforeStateQueue=new Ome(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Is(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield xc.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return L(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield Ch(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function dme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?Ye(e):null;return r&&L(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&L(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(Is(e))}))}initializeRecaptchaConfig(){var e=this;return m(function*(){const n=yield X3(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ez(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new nz(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&Is(e)||n._popupRedirectResolver;L(r,n,"argument-error"),n.redirectPersistenceManager=yield xc.create(n,[Is(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return L(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return m(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function cme(t,...e){U_.logLevel<=Se.WARN&&U_.warn(`Auth (${no}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function cn(t){return Ye(t)}class rz{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Hue(t,e){const n=new zue(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function iz(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sz(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class oz{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}function lz(t,e){return _S.apply(this,arguments)}function _S(){return(_S=m(function*(t,e){return Mt(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function vS(t,e){return wS.apply(this,arguments)}function wS(){return(wS=m(function*(t,e){return Es(t,"POST","/v1/accounts:signInWithPassword",Et(t,e))})).apply(this,arguments)}function AS(){return(AS=m(function*(t,e){return Es(t,"POST","/v1/accounts:signInWithEmailLink",Et(t,e))})).apply(this,arguments)}function xS(){return(xS=m(function*(t,e){return Es(t,"POST","/v1/accounts:signInWithEmailLink",Et(t,e))})).apply(this,arguments)}class Dh extends oz{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Dh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Dh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return m(function*(){var r;switch(n.signInMethod){case"password":const i={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(r=e._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const s=yield oo(e,i,"signInWithPassword");return vS(e,s)}return vS(e,i).catch(function(){var s=m(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield oo(e,i,"signInWithPassword");return vS(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function zme(t,e){return AS.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:gr(e,"internal-error")}})()}_linkToIdToken(e,n){var r=this;return m(function*(){switch(r.signInMethod){case"password":return lz(e,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function Gme(t,e){return xS.apply(this,arguments)}(e,{idToken:n,email:r._email,oobCode:r._password});default:gr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ds(t,e){return MS.apply(this,arguments)}function MS(){return(MS=m(function*(t,e){return Es(t,"POST","/v1/accounts:signInWithIdp",Et(t,e))})).apply(this,arguments)}class Ah{constructor(e){var n,r,i,s,o,a;const l=hh(fh(e)),c=null!==(n=l.apiKey)&&void 0!==n?n:null,u=null!==(r=l.oobCode)&&void 0!==r?r:null,d=function Zme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);L(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function Jme(t){const e=hh(fh(t)).link,n=e?hh(fh(e)).deep_link_id:null,r=hh(fh(t)).deep_link_id;return(r?hh(fh(r)).link:null)||r||n||e||t}(e);try{return new Ah(n)}catch{return null}}}let cz=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Dh._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=Ah.parseLink(r);return L(i,"argument-error"),Dh._fromEmailAndCode(n,i.code,i.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class ao{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class e_e extends ao{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function W_(t,e){return FS.apply(this,arguments)}function FS(){return(FS=m(function*(t,e){return Es(t,"POST","/v1/accounts:signUp",Et(t,e))})).apply(this,arguments)}class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(function*(){const s=yield Sa._fromIdTokenResponse(e,r,i),o=uz(r);return new Wr({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=uz(r);return new Wr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function uz(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class K_ extends qr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,K_.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new K_(e,n,r,i)}}function dz(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?K_._fromErrorAndOperation(t,s,e,r):s})}function US(){return(US=m(function*(t,e,n=!1){const r=yield Cs(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Wr._forOperation(t,"link",r)})).apply(this,arguments)}function $S(){return($S=m(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield Cs(t,dz(r,i,e,t),n);L(s.idToken,r,"internal-error");const o=$_(s.idToken);L(o,r,"internal-error");const{sub:a}=o;return L(t.uid===a,r,"user-mismatch"),Wr._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&gr(r,"user-mismatch"),s}})).apply(this,arguments)}function pz(t,e){return HS.apply(this,arguments)}function HS(){return(HS=m(function*(t,e,n=!1){const r="signIn",i=yield dz(t,r,e),s=yield Wr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function GS(){return(GS=m(function*(t,e){return pz(cn(t),e)})).apply(this,arguments)}function a_e(t,e,n){return iA.apply(this,arguments)}function iA(){return iA=m(function*(t,e,n){var r;const i=cn(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null!==(r=i._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const c=yield oo(i,s,"signUpPassword");o=W_(i,c)}else o=W_(i,s).catch(function(){var c=m(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield oo(i,s,"signUpPassword");return W_(i,d)}return Promise.reject(u)});return function(u){return c.apply(this,arguments)}}());const a=yield o.catch(c=>Promise.reject(c)),l=yield Wr._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(l.user),l}),iA.apply(this,arguments)}function l_e(t,e,n){return function zS(t,e){return GS.apply(this,arguments)}(Ye(t),cz.credential(e,n))}function y_e(t){return Ye(t).signOut()}const Q_="__sak";class mz{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Q_,"1"),this.storage.removeItem(Q_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const T_e=(()=>{class t extends mz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function C_e(){const t=on();return dS(t)||z_(t)}()&&function Ame(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Y3(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Sme(){return function Fue(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return m(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return m(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),_z=(()=>{class t extends mz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let A_e=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return m(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function S_e(t){return Promise.all(t.map(function(){var e=m(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function vA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class x_e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return m(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=vA("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ht(){return window}function wA(){return typeof Ht().WorkerGlobalScope<"u"&&"function"==typeof Ht().importScripts}function bA(){return(bA=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yz="firebaseLocalStorageDb",X_="firebaseLocalStorage",vz="fbase_key";class Mh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Z_(t,e){return t.transaction([X_],e?"readwrite":"readonly").objectStore(X_)}function EA(){const t=indexedDB.open(yz,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(X_,{keyPath:vz})}catch(i){n(i)}}),t.addEventListener("success",m(function*(){const r=t.result;r.objectStoreNames.contains(X_)?e(r):(r.close(),yield function P_e(){const t=indexedDB.deleteDatabase(yz);return new Mh(t).toPromise()}(),e(yield EA()))}))})}function wz(t,e,n){return CA.apply(this,arguments)}function CA(){return(CA=m(function*(t,e,n){const r=Z_(t,!0).put({[vz]:e,value:n});return new Mh(r).toPromise()})).apply(this,arguments)}function IA(){return(IA=m(function*(t,e){const n=Z_(t,!1).get(e),r=yield new Mh(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function bz(t,e){const n=Z_(t,!0).delete(e);return new Mh(n).toPromise()}const B_e=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return m(function*(){return n.db||(n.db=yield EA()),n.db})()}_withRetries(n){var r=this;return m(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return m(function*(){return wA()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return m(function*(){n.receiver=A_e._getInstance(function N_e(){return wA()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=m(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=m(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return m(function*(){var r,i;if(n.activeServiceWorker=yield function R_e(){return bA.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new x_e(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function k_e(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const n=yield EA();return yield wz(n,Q_,"1"),yield bz(n,Q_),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return m(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(s=>wz(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return m(function*(){const i=yield r._withRetries(s=>function F_e(t,e){return IA.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>bz(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return m(function*(){const r=yield n._withRetries(o=>{const a=Z_(o,!1).getAll();return new Mh(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();tz("rcb"),new wh(3e4,6e4);class NA extends oz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tye(t){return pz(t.auth,new NA(t),t.bypassAuthState)}function nye(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),function fz(t,e){return $S.apply(this,arguments)}(n,new NA(t),t.bypassAuthState)}function rye(t){return OA.apply(this,arguments)}function OA(){return(OA=m(function*(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),function BS(t,e){return US.apply(this,arguments)}(n,new NA(t),t.bypassAuthState)})).apply(this,arguments)}class iye{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(l)(c))}catch(u){n.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tye;case"linkViaPopup":case"linkViaRedirect":return rye;case"reauthViaPopup":case"reauthViaRedirect":return nye;default:gr(this.auth,"internal-error")}}resolve(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new wh(2e3,1e4);const sye="pendingRedirect",Rh=new Map;class oye extends iye{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return m(function*(){let r=Rh.get(n.auth._key());if(!r){try{const s=(yield function aye(t,e){return BA.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Rh.set(n.auth._key(),r)}return n.bypassAuthState||Rh.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function BA(){return(BA=m(function*(t,e){const n=function Iz(t){return H_(sye,t.config.apiKey,t.name)}(e),r=function Cz(t){return Is(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function lye(t,e){Rh.set(t._key(),e)}function Dz(t,e){return qA.apply(this,arguments)}function qA(){return(qA=m(function*(t,e,n=!1){const r=cn(t),i=function xa(t,e){return e?Is(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),o=yield new oye(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class fye{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function pye(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Az(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Az(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sz(e))}saveEventToCache(e){this.cachedEventUids.add(Sz(e)),this.lastProcessedEventTime=Date.now()}}function Sz(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Az({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function KA(){return(KA=m(function*(t,e={}){return Mt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const mye=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_ye=/^https?/;function YA(){return YA=m(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function gye(t){return KA.apply(this,arguments)}(t);for(const n of e)try{if(vye(n))return}catch{}gr(t,"unauthorized-domain")}),YA.apply(this,arguments)}function vye(t){const e=vh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!_ye.test(n))return!1;if(mye.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wye=new wh(3e4,6e4);function xz(){const t=Ht().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let ey=null;const Cye=new wh(5e3,15e3),Iye="__/auth/iframe",Dye="emulator/auth/iframe",Tye={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aye(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ZT(e,Dye):`https://${t.config.authDomain}/${Iye}`,r={apiKey:e.apiKey,appName:t.name,v:no},i=Sye.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${dh(r).slice(1)}`}function QA(){return QA=m(function*(t){const e=yield function Eye(t){return ey=ey||function bye(t){return new Promise((e,n)=>{var r,i,s;function o(){xz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xz(),n(Bi(t,"network-request-failed"))},timeout:wye.get()})}if(null!==(i=null===(r=Ht().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Ht().gapi)||void 0===s||!s.load){const a=tz("iframefcb");return Ht()[a]=()=>{gapi.load?o():n(Bi(t,"network-request-failed"))},pS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}o()}}).catch(e=>{throw ey=null,e})}(t),ey}(t),n=Ht().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:Aye(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tye,dontclear:!0},r=>new Promise(function(){var i=m(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Bi(t,"network-request-failed"),l=Ht().setTimeout(()=>{o(a)},Cye.get());function c(){Ht().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),QA.apply(this,arguments)}const Mye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Mz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Lye="__/auth/handler",Vye="emulator/auth/handler",Bye=encodeURIComponent("fac");function Rz(t,e,n,r,i,s){return XA.apply(this,arguments)}function XA(){return(XA=m(function*(t,e,n,r,i,s){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:no,eventId:i};if(e instanceof ao){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof e_e){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield t._getAppCheckToken(),c=l?`#${Bye}=${encodeURIComponent(l)}`:"";return`${function Uye({config:t}){return t.emulator?ZT(t,Vye):`https://${t.authDomain}/${Lye}`}(t)}?${dh(a).slice(1)}${c}`})).apply(this,arguments)}const ZA="webStorageSupport",$ye=class jye{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_z,this._completeRedirectFn=Dz,this._overrideRedirectResult=lye}_openPopup(e,n,r,i){var s=this;return m(function*(){var o;io(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield Rz(e,n,r,vh(),i);return function Pye(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Mye),{width:r.toString(),height:i.toString(),top:s,left:o}),c=on().toLowerCase();n&&(a=z3(c)?"_blank":n),H3(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function Tme(t=on()){var e;return z_(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Fye(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new Mz(null);const d=window.open(e||"",a,u);L(d,t,"popup-blocked");try{d.focus()}catch{}return new Mz(d)}(e,a,vA())})()}_openRedirect(e,n,r,i){var s=this;return m(function*(){return yield s._originValidation(e),function M_e(t){Ht().location.href=t}(yield Rz(e,n,r,vh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(io(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return m(function*(){const r=yield function xye(t){return QA.apply(this,arguments)}(e),i=new fye(e);return r.register("authEvent",s=>(L(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ZA,{type:ZA},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[ZA];void 0!==o&&n(!!o),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function yye(t){return YA.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y3()||dS()||z_()}};var Oz="@firebase/auth";class Hye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wye=j$("authIdTokenMaxAge")||300;let Fz=null;const Kye=t=>function(){var e=m(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Wye)return;const s=r?.token;Fz!==s&&(Fz=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function Yye(t=b_()){const e=va(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Fme(t,e){const n=va(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(__(n.getOptions(),e??{}))return i;gr(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:$ye,persistence:[B_e,T_e,_z]}),r=j$("authTokenSyncURL");if(r){const s=Kye(r);(function __e(t,e,n){Ye(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function m_e(t,e,n,r){Ye(t).onIdTokenChanged(e,n,r)}(n,o=>s(o))}const i=V$("auth");return i&&function Vme(t,e,n){const r=cn(t);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=iz(e),{host:o,port:a}=function Bme(t){const e=iz(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sz(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:sz(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Ume(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function Gye(t){Bn(new Cn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;L(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q3(t)},c=new Pme(r,i,s,l);return function Lme(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Is);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bn(new Cn("auth-internal",e=>{const n=cn(e.getProvider("auth").getImmediate());return new Hye(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(Oz,"0.23.2",function zye(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),lt(Oz,"0.23.2","esm2017")}("Browser");class ny{constructor(e){return e}}class ex{constructor(){return x_("auth")}}const tx=new k("angularfire2.auth-instances");function Xye(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new ny(r)}}const Zye={provide:ex,deps:[[new Yt,tx]]},Jye={provide:ny,useFactory:function Qye(t,e){const n=A_("auth",t,e);return n&&new ny(n)},deps:[[new Yt,tx],Ta]};let eve=(()=>{class t{constructor(){lt("angularfire",mh.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[Jye,Zye]}),t})();function tve(t,...e){return{ngModule:eve,providers:[{provide:tx,useFactory:Xye(t),multi:!0,deps:[de,wt,M_,R_,[new Yt,B_],...e]}]}}const nve=At(a_e,!0),rve=At(Yye,!0),ive=At(l_e,!0),sve=At(y_e,!0);var j,ove=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oi={},nx=nx||{},ae=ove||self;function ry(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function kh(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var rx="closure_uid_"+(1e9*Math.random()>>>0),lve=0;function cve(t,e,n){return t.call.apply(t.bind,arguments)}function uve(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Un(t,e,n){return(Un=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cve:uve).apply(null,arguments)}function iy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function un(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function lo(){this.s=this.s,this.o=this.o}lo.prototype.s=!1,lo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ave(t){Object.prototype.hasOwnProperty.call(t,rx)&&t[rx]||(t[rx]=++lve)}(this)},lo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vz=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ix(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Bz(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ry(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function jn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jn.prototype.h=function(){this.defaultPrevented=!0};var hve=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Nh(t){return/^[\s\xa0]*$/.test(t)}function sy(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function ji(t){return-1!=sy().indexOf(t)}function sx(t){return sx[" "](t),t}sx[" "]=function(){};var ax,t,pve=ji("Opera"),Rc=ji("Trident")||ji("MSIE"),Uz=ji("Edge"),ox=Uz||Rc,jz=ji("Gecko")&&!(-1!=sy().toLowerCase().indexOf("webkit")&&!ji("Edge"))&&!(ji("Trident")||ji("MSIE"))&&!ji("Edge"),gve=-1!=sy().toLowerCase().indexOf("webkit")&&!ji("Edge");function $z(){var t=ae.document;return t?t.documentMode:void 0}e:{var lx="",cx=(t=sy(),jz?/rv:([^\);]+)(\)|;)/.exec(t):Uz?/Edge\/([\d\.]+)/.exec(t):Rc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):gve?/WebKit\/(\S+)/.exec(t):pve?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(cx&&(lx=cx?cx[1]:""),Rc){var ux=$z();if(null!=ux&&ux>parseFloat(lx)){ax=String(ux);break e}}ax=lx}var mve=ae.document&&Rc&&($z()||parseInt(ax,10))||void 0;function Oh(t,e){if(jn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(jz){e:{try{sx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_ve[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Oh.$.h.call(this)}}un(Oh,jn);var _ve={2:"touch",3:"pen",4:"mouse"};Oh.prototype.h=function(){Oh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ph="closure_listenable_"+(1e6*Math.random()|0),yve=0;function vve(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++yve,this.fa=this.ia=!1}function oy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function hx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function zz(t){const e={};for(const n in t)e[n]=t[n];return e}const Gz="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qz(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<Gz.length;s++)n=Gz[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ay(t){this.src=t,this.g={},this.h=0}function fx(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=Vz(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(oy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function px(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}ay.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=px(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new vve(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var gx="closure_lm_"+(1e6*Math.random()|0),mx={};function Wz(t,e,n,r,i){if(r&&r.once)return Yz(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Wz(t,e[s],n,r,i);return null}return n=wx(n),t&&t[Ph]?t.O(e,n,kh(r)?!!r.capture:!!r,i):Kz(t,e,n,!1,r,i)}function Kz(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=kh(i)?!!i.capture:!!i,a=yx(t);if(a||(t[gx]=a=new ay(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function bve(){const e=Eve;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hve||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xz(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Yz(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Yz(t,e[s],n,r,i);return null}return n=wx(n),t&&t[Ph]?t.P(e,n,kh(r)?!!r.capture:!!r,i):Kz(t,e,n,!0,r,i)}function Qz(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Qz(t,e[s],n,r,i);else r=kh(r)?!!r.capture:!!r,n=wx(n),t&&t[Ph]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=px(s=t.g[e],n,r,i))&&(oy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=yx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=px(e,n,r,i)),(n=-1<t?e[t]:null)&&_x(n))}function _x(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Ph])fx(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xz(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yx(e))?(fx(n,t),0==n.h&&(n.src=null,e[gx]=null)):oy(t)}}}function Xz(t){return t in mx?mx[t]:mx[t]="on"+t}function Eve(t,e){if(t.fa)t=!0;else{e=new Oh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&_x(t),t=n.call(r,e)}return t}function yx(t){return(t=t[gx])instanceof ay?t:null}var vx="__closure_events_fn_"+(1e9*Math.random()>>>0);function wx(t){return"function"==typeof t?t:(t[vx]||(t[vx]=function(e){return t.handleEvent(e)}),t[vx])}function dn(){lo.call(this),this.i=new ay(this),this.S=this,this.J=null}function Tn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new jn(e,t);else if(e instanceof jn)e.target=e.target||t;else{var i=e;qz(e=new jn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ly(o,r,!0,e)&&i}if(i=ly(o=e.g=t,r,!0,e)&&i,i=ly(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=ly(o=e.g=n[s],r,!1,e)&&i}function ly(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fx(t.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}un(dn,lo),dn.prototype[Ph]=!0,dn.prototype.removeEventListener=function(t,e,n,r){Qz(this,t,e,n,r)},dn.prototype.N=function(){if(dn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oy(n[r]);delete t.g[e],t.h--}}this.J=null},dn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},dn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var bx=ae.JSON.stringify;function Ive(){var t=Ex;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Zz=new class Cve{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Tve,t=>t.reset());class Tve{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Sve(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ave(t){ae.setTimeout(()=>{throw t},0)}let Fh,Lh=!1,Ex=new class Dve{constructor(){this.h=this.g=null}add(e,n){const r=Zz.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Jz=()=>{const t=ae.Promise.resolve(void 0);Fh=()=>{t.then(xve)}};var xve=()=>{for(var t;t=Ive();){try{t.h.call(t.g)}catch(n){Ave(n)}var e=Zz;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lh=!1};function cy(t,e){dn.call(this),this.h=t||1,this.g=e||ae,this.j=Un(this.qb,this),this.l=Date.now()}function Cx(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ix(t,e,n){if("function"==typeof t)n&&(t=Un(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Un(t.handleEvent,t)}return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function e4(t){t.g=Ix(()=>{t.g=null,t.i&&(t.i=!1,e4(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}un(cy,dn),(j=cy.prototype).ga=!1,j.T=null,j.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(Cx(this),this.start()))}},j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},j.N=function(){cy.$.N.call(this),Cx(this),delete this.g};class Mve extends lo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:e4(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vh(t){lo.call(this),this.h=t,this.g={}}un(Vh,lo);var t4=[];function n4(t,e,n,r){Array.isArray(n)||(n&&(t4[0]=n.toString()),n=t4);for(var i=0;i<n.length;i++){var s=Wz(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function r4(t){hx(t.g,function(e,n){this.g.hasOwnProperty(n)&&_x(e)},t),t.g={}}function uy(){this.g=!0}function kc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ove(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return bx(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Vh.prototype.N=function(){Vh.$.N.call(this),r4(this)},Vh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uy.prototype.Ea=function(){this.g=!1},uy.prototype.info=function(){};var Ma={},i4=null;function dy(){return i4=i4||new dn}function s4(t){jn.call(this,Ma.Ta,t)}function Bh(t){const e=dy();Tn(e,new s4(e))}function o4(t,e){jn.call(this,Ma.STAT_EVENT,t),this.stat=e}function rr(t){const e=dy();Tn(e,new o4(e,t))}function a4(t,e){jn.call(this,Ma.Ua,t),this.size=e}function Uh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}Ma.Ta="serverreachability",un(s4,jn),Ma.STAT_EVENT="statevent",un(o4,jn),Ma.Ua="timingevent",un(a4,jn);var hy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},l4={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dx(){}function u4(){}Dx.prototype.h=null;var Ax,jh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tx(){jn.call(this,"d")}function Sx(){jn.call(this,"c")}function fy(){}function $h(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Vh(this),this.P=Pve,this.V=new cy(t=ox?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new d4}function d4(){this.i=null,this.g="",this.h=!1}un(Tx,jn),un(Sx,jn),un(fy,Dx),fy.prototype.g=function(){return new XMLHttpRequest},fy.prototype.i=function(){return{}},Ax=new fy;var Pve=45e3,xx={},py={};function Mx(t,e,n){t.L=1,t.v=yy(Ts(e)),t.s=n,t.S=!0,h4(t,null)}function h4(t,e){t.G=Date.now(),Hh(t),t.A=Ts(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),E4(n.i,"t",r),t.C=0,n=t.l.J,t.h=new d4,t.g=q4(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Mve(Un(t.Pa,t,t.g),t.O)),n4(t.U,t.g,"readystatechange",t.nb),e=t.I?zz(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Bh(),function Rve(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function f4(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function p4(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=Fve(t,n),i==py){4==e&&(t.o=4,rr(14),r=!1),kc(t.j,t.m,null,"[Incomplete Response]");break}if(i==xx){t.o=4,rr(15),kc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}kc(t.j,t.m,i,null),Rx(t,i)}f4(t)&&i!=py&&i!=xx&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,rr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vx(e),e.M=!0,rr(11))):(kc(t.j,t.m,n,"[Invalid Chunked Response]"),Ra(t),zh(t))}function Fve(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?py:(n=Number(e.substring(n,r)),isNaN(n)?xx:(r+=1)+n>e.length?py:(e=e.slice(r,r+n),t.C=r+n,e))}function Hh(t){t.Y=Date.now()+t.P,g4(t,t.P)}function g4(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Uh(Un(t.lb,t),e)}function gy(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}function zh(t){0==t.l.H||t.J||$4(t.l,t)}function Ra(t){gy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Cx(t.V),r4(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Rx(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||kx(n.i,t)))if(!t.K&&kx(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Iy(n),Ey(n)}Lx(n),rr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Uh(Un(n.ib,n),6e3));if(1>=D4(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Na(n,11)}else if((t.K||n.g==t)&&Iy(n),!Nh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const u=c[3];null!=u&&(n.ra=u,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Nx(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,ct(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=G4(r,r.J?r.pa:null,r.Y),o.K){T4(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(gy(a),Hh(a)),r.g=o}else U4(r);0<n.j.length&&Cy(n)}else"stop"!=c[0]&&"close"!=c[0]||Na(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Na(n,7):Fx(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Bh()}catch{}}function m4(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ry(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function Vve(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ry(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Lve(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ry(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(j=$h.prototype).setTimeout=function(t){this.P=t},j.nb=function(t){t=t.target;const e=this.M;e&&3==$i(t)?e.l():this.Pa(t)},j.Pa=function(t){try{if(t==this.g)e:{const u=$i(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||ox||this.g&&(this.h.h||this.g.ja()||O4(this.g)))){this.J||4!=u||7==e||Bh(),gy(this);var n=this.g.da();this.ca=n;t:if(f4(this)){var r=O4(this.g);t="";var i=r.length,s=4==$i(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ra(this),zh(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function kve(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nh(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,rr(12),Ra(this),zh(this);break e}kc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rx(this,n)}this.S?(p4(this,u,o),ox&&this.i&&3==u&&(n4(this.U,this.V,"tick",this.mb),this.V.start())):(kc(this.j,this.m,o,null),Rx(this,o)),4==u&&Ra(this),this.i&&!this.J&&(4==u?$4(this.l,this):(this.i=!1,Hh(this)))}else(function nwe(t){const e={};t=(t.g&&2<=$i(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Nh(t[r]))continue;var n=Sve(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function wve(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,rr(12)):(this.o=0,rr(13)),Ra(this),zh(this)}}}catch{}},j.mb=function(){if(this.g){var t=$i(this.g),e=this.g.ja();this.C<e.length&&(gy(this),p4(this,t,e),this.i&&4!=t&&Hh(this))}},j.cancel=function(){this.J=!0,Ra(this)},j.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function Nve(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Bh(),rr(17)),Ra(this),this.o=2,zh(this)):g4(this,this.Y-t)};var _4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ka(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ka){this.h=t.h,my(this,t.j),this.s=t.s,this.g=t.g,_y(this,t.m),this.l=t.l;var e=t.i,n=new Wh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),y4(this,n),this.o=t.o}else t&&(e=String(t).match(_4))?(this.h=!1,my(this,e[1]||"",!0),this.s=Gh(e[2]||""),this.g=Gh(e[3]||"",!0),_y(this,e[4]),this.l=Gh(e[5]||"",!0),y4(this,e[6]||"",!0),this.o=Gh(e[7]||"")):(this.h=!1,this.i=new Wh(null,this.h))}function Ts(t){return new ka(t)}function my(t,e,n){t.j=n?Gh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _y(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function y4(t,e,n){e instanceof Wh?(t.i=e,function Gve(t,e){e&&!t.j&&(co(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(w4(this,r),E4(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=qh(e,Hve)),t.i=new Wh(e,t.h))}function ct(t,e,n){t.i.set(e,n)}function yy(t){return ct(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Gh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Uve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Uve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ka.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qh(e,v4,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qh(e,v4,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qh(n,"/"==n.charAt(0)?$ve:jve,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qh(n,zve)),t.join("")};var v4=/[#\/\?@]/g,jve=/[#\?:]/g,$ve=/[#\?]/g,Hve=/[#\?@]/g,zve=/#/g;function Wh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function co(t){t.g||(t.g=new Map,t.h=0,t.i&&function Bve(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function w4(t,e){co(t),e=Nc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function b4(t,e){return co(t),e=Nc(t,e),t.g.has(e)}function E4(t,e,n){w4(t,e),0<n.length&&(t.i=null,t.g.set(Nc(t,e),ix(n)),t.h+=n.length)}function Nc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function C4(t){this.l=t||Wve,t=ae.PerformanceNavigationTiming?0<(t=ae.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(j=Wh.prototype).add=function(t,e){co(this),this.i=null,t=Nc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},j.forEach=function(t,e){co(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},j.ta=function(){co(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},j.Z=function(t){co(this);let e=[];if("string"==typeof t)b4(this,t)&&(e=e.concat(this.g.get(Nc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},j.set=function(t,e){return co(this),this.i=null,b4(this,t=Nc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},j.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var Wve=10;function I4(t){return!!t.h||!!t.g&&t.g.size>=t.j}function D4(t){return t.h?1:t.g?t.g.size:0}function kx(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Nx(t,e){t.g?t.g.add(e):t.h=e}function T4(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function S4(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ix(t.i)}C4.prototype.cancel=function(){if(this.i=S4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Kve=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function Yve(){this.g=new Kve}function Qve(t,e,n){const r=n||"";try{m4(t,function(i,s){let o=i;kh(i)&&(o=bx(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Kh(t){this.l=t.fc||null,this.j=t.ob||!1}function wy(t,e){dn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ox,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un(Kh,Dx),Kh.prototype.g=function(){return new wy(this.l,this.j)},Kh.prototype.i=function(t){return function(){return t}}({}),un(wy,dn);var Ox=0;function A4(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Yh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qh(t)}function Qh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(j=wy.prototype).open=function(t,e){if(this.readyState!=Ox)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qh(this)},j.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yh(this)),this.readyState=Ox},j.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qh(this)),this.g&&(this.readyState=3,Qh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;A4(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},j.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Yh(this):Qh(this),3==this.readyState&&A4(this)}},j.Za=function(t){this.g&&(this.response=this.responseText=t,Yh(this))},j.Ya=function(t){this.g&&(this.response=t,Yh(this))},j.ka=function(){this.g&&Yh(this)},j.setRequestHeader=function(t,e){this.v.append(t,e)},j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Zve=ae.JSON.parse;function Rt(t){dn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=x4,this.L=this.M=!1}un(Rt,dn);var x4="",Jve=/^https?$/i,ewe=["POST","PUT"];function M4(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,R4(t),by(t)}function R4(t){t.F||(t.F=!0,Tn(t,"complete"),Tn(t,"error"))}function k4(t){if(t.h&&typeof nx<"u"&&(!t.C[1]||4!=$i(t)||2!=t.da()))if(t.v&&4==$i(t))Ix(t.La,0,t);else if(Tn(t,"readystatechange"),4==$i(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(_4)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!Jve.test(i?i.toLowerCase():"")}n=r}if(n)Tn(t,"complete"),Tn(t,"success");else{t.m=6;try{var s=2<$i(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",R4(t)}}finally{by(t)}}}function by(t,e){if(t.g){N4(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tn(t,"ready");try{n.onreadystatechange=r}catch{}}}function N4(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}function $i(t){return t.g?t.g.readyState:0}function O4(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case x4:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function P4(t){let e="";return hx(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Px(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=P4(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ct(t,e,n))}function Xh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function F4(t){this.Ga=0,this.j=[],this.l=new uy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xh("baseRetryDelayMs",5e3,t),this.hb=Xh("retryDelaySeedMs",1e4,t),this.eb=Xh("forwardChannelMaxRetries",2,t),this.xa=Xh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new C4(t&&t.concurrentRequestLimit),this.Ja=new Yve,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Fx(t){if(L4(t),3==t.H){var e=t.W++,n=Ts(t.I);if(ct(n,"SID",t.K),ct(n,"RID",e),ct(n,"TYPE","terminate"),Zh(t,n),(e=new $h(t,t.l,e)).L=2,e.v=yy(Ts(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&((new Image).src=e.v,n=!0),n||(e.g=q4(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Hh(e)}z4(t)}function Ey(t){t.g&&(Vx(t),t.g.cancel(),t.g=null)}function L4(t){Ey(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Iy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ae.clearTimeout(t.m),t.m=null)}function Cy(t){if(!I4(t.i)&&!t.m){t.m=!0;var e=t.Na;Fh||Jz(),Lh||(Fh(),Lh=!0),Ex.add(e,t),t.C=0}}function V4(t,e){var n;n=e?e.m:t.W++;const r=Ts(t.I);ct(r,"SID",t.K),ct(r,"RID",n),ct(r,"AID",t.V),Zh(t,r),t.o&&t.s&&Px(r,t.o,t.s),n=new $h(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=B4(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nx(t.i,n),Mx(n,r,e)}function Zh(t,e){t.na&&hx(t.na,function(n,r){ct(e,r,n)}),t.h&&m4({},function(n,r){ct(e,r,n)})}function B4(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Un(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{Qve(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function U4(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fh||Jz(),Lh||(Fh(),Lh=!0),Ex.add(e,t),t.A=0}}function Lx(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Uh(Un(t.Ma,t),H4(t,t.A)),t.A++,0))}function Vx(t){null!=t.B&&(ae.clearTimeout(t.B),t.B=null)}function j4(t){t.g=new $h(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ts(t.wa);ct(e,"RID","rpc"),ct(e,"SID",t.K),ct(e,"AID",t.V),ct(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ct(e,"TO",t.qa),ct(e,"TYPE","xmlhttp"),Zh(t,e),t.o&&t.s&&Px(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=yy(Ts(e)),n.s=null,n.S=!0,h4(n,t)}function Iy(t){null!=t.v&&(ae.clearTimeout(t.v),t.v=null)}function $4(t,e){var n=null;if(t.g==e){Iy(t),Vx(t),t.g=null;var r=2}else{if(!kx(t.i,e))return;n=e.F,T4(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Tn(r=dy(),new a4(r,n)),Cy(t)}else U4(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function rwe(t,e){return!(D4(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Uh(Un(t.Na,t,e),H4(t,t.C)),t.C++,0)))}(t,e)||2==r&&Lx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Na(t,5);break;case 4:Na(t,10);break;case 3:Na(t,6);break;default:Na(t,2)}}function H4(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Na(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Un(t.pb,t);n||(n=new ka("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||my(n,"https"),yy(n)),function Xve(t,e){const n=new uy;if(ae.Image){const r=new Image;r.onload=iy(vy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=iy(vy,n,r,"TestLoadImage: error",!1,e),r.onabort=iy(vy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=iy(vy,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else rr(2);t.H=0,t.h&&t.h.za(e),z4(t),L4(t)}function z4(t){if(t.H=0,t.ma=[],t.h){const e=S4(t.i);(0!=e.length||0!=t.j.length)&&(Bz(t.ma,e),Bz(t.ma,t.j),t.i.i.length=0,ix(t.j),t.j.length=0),t.h.ya()}}function G4(t,e,n){var r=n instanceof ka?Ts(n):new ka(n);if(""!=r.g)e&&(r.g=e+"."+r.g),_y(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ka(null);r&&my(s,r),e&&(s.g=e),i&&_y(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&ct(r,n,e),ct(r,"VER",t.ra),Zh(t,r),r}function q4(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rt(n&&t.Ha&&!t.va?new Kh({ob:!0}):t.va)).Oa(t.J),e}function W4(){}function Dy(){if(Rc&&!(10<=Number(mve)))throw Error("Environmental error: no available transport.")}function Mr(t,e){dn.call(this),this.g=new F4(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Nh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nh(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Oc(this)}function K4(t){Tx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Y4(){Sx.call(this),this.status=1}function Oc(t){this.g=t}function ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bx(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function je(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(j=Rt.prototype).Oa=function(t){this.M=t},j.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ax.g(),this.C=function c4(t){return t.h||(t.h=t.i())}(this.u?this.u:Ax),this.g.onreadystatechange=Un(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void M4(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=ae.FormData&&t instanceof ae.FormData,!(0<=Vz(ewe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{N4(this),0<this.B&&((this.L=function twe(t){return Rc&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Un(this.ua,this)):this.A=Ix(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){M4(this,s)}},j.ua=function(){typeof nx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))},j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tn(this,"complete"),Tn(this,"abort"),by(this))},j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),by(this,!0)),Rt.$.N.call(this)},j.La=function(){this.s||(this.G||this.v||this.l?k4(this):this.kb())},j.kb=function(){k4(this)},j.isActive=function(){return!!this.g},j.da=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},j.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},j.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Zve(e)}},j.Ia=function(){return this.m},j.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(j=F4.prototype).ra=8,j.H=1,j.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new $h(this,this.l,t);let s=this.s;if(this.U&&(s?(s=zz(s),qz(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=B4(this,i,e),ct(n=Ts(this.I),"RID",t),ct(n,"CVER",22),this.F&&ct(n,"X-HTTP-Session-Id",this.F),Zh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(P4(s)))+"&"+e:this.o&&Px(n,this.o,s)),Nx(this.i,i),this.bb&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",e),ct(n,"SID","null"),i.aa=!0,Mx(i,n,null)):Mx(i,n,e),this.H=2}}else 3==this.H&&(t?V4(this,t):0==this.j.length||I4(this.i)||V4(this))},j.Ma=function(){if(this.u=null,j4(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Uh(Un(this.jb,this),t)}},j.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rr(10),Ey(this),j4(this))},j.ib=function(){null!=this.v&&(this.v=null,Ey(this),Lx(this),rr(19))},j.pb=function(t){t?(this.l.info("Successfully pinged google.com"),rr(2)):(this.l.info("Failed to ping google.com"),rr(1))},j.isActive=function(){return!!this.h&&this.h.isActive(this)},(j=W4.prototype).Ba=function(){},j.Aa=function(){},j.za=function(){},j.ya=function(){},j.isActive=function(){return!0},j.Va=function(){},Dy.prototype.g=function(t,e){return new Mr(t,e)},un(Mr,dn),Mr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;rr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=G4(t,null,t.Y),Cy(t)},Mr.prototype.close=function(){Fx(this.g)},Mr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=bx(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Cy(e)},Mr.prototype.N=function(){this.g.h=null,delete this.j,Fx(this.g),delete this.g,Mr.$.N.call(this)},un(K4,Tx),un(Y4,Sx),un(Oc,W4),Oc.prototype.Ba=function(){Tn(this.g,"a")},Oc.prototype.Aa=function(t){Tn(this.g,new K4(t))},Oc.prototype.za=function(t){Tn(this.g,new Y4)},Oc.prototype.ya=function(){Tn(this.g,"b")},un(ai,function iwe(){this.blockSize=-1}),ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ai.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)Bx(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Bx(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Bx(this,r),i=0;break}}this.h=i,this.i+=e},ai.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var swe={};function Ux(t){return-128<=t&&128>t?function fve(t,e){var n=swe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new je([0|e],0>e?-1:0)}):new je([0|t],0>t?-1:0)}function Hi(t){if(isNaN(t)||!isFinite(t))return Pc;if(0>t)return Sn(Hi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=jx;return new je(e,0)}var jx=4294967296,Pc=Ux(0),$x=Ux(1),X4=Ux(16777216);function Ss(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Kr(t){return-1==t.h}function Sn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new je(n,~t.h).add($x)}function Ty(t,e){return t.add(Sn(e))}function Sy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Jh(t,e){this.g=t,this.h=e}function Ay(t,e){if(Ss(e))throw Error("division by zero");if(Ss(t))return new Jh(Pc,Pc);if(Kr(t))return e=Ay(Sn(t),e),new Jh(Sn(e.g),Sn(e.h));if(Kr(e))return e=Ay(t,Sn(e)),new Jh(Sn(e.g),e.h);if(30<t.g.length){if(Kr(t)||Kr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=$x,r=e;0>=r.X(t);)n=Z4(n),r=Z4(r);var i=Fc(n,1),s=Fc(r,1);for(r=Fc(r,2),n=Fc(n,2);!Ss(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Fc(r,1),n=Fc(n,1)}return e=Ty(t,i.R(e)),new Jh(i,e)}for(i=Pc;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Hi(n)).R(e);Kr(o)||0<o.X(t);)o=(s=Hi(n-=r)).R(e);Ss(s)&&(s=$x),i=i.add(s),t=Ty(t,o)}return new Jh(i,t)}function Z4(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new je(n,t.h)}function Fc(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new je(i,t.h)}(j=je.prototype).ea=function(){if(Kr(this))return-Sn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:jx+r)*e,e*=jx}return t},j.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ss(this))return"0";if(Kr(this))return"-"+Sn(this).toString(t);for(var e=Hi(Math.pow(t,6)),n=this,r="";;){var i=Ay(n,e).g,s=((0<(n=Ty(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ss(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},j.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},j.X=function(t){return Kr(t=Ty(this,t))?-1:Ss(t)?0:1},j.abs=function(){return Kr(this)?Sn(this):this},j.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new je(n,-2147483648&n[n.length-1]?-1:0)},j.R=function(t){if(Ss(this)||Ss(t))return Pc;if(Kr(this))return Kr(t)?Sn(this).R(Sn(t)):Sn(Sn(this).R(t));if(Kr(t))return Sn(this.R(Sn(t)));if(0>this.X(X4)&&0>t.X(X4))return Hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=o*l,Sy(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Sy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Sy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Sy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new je(n,0)},j.gb=function(t){return Ay(this,t).h},j.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new je(n,this.h&t.h)},j.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new je(n,this.h|t.h)},j.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new je(n,this.h^t.h)},Dy.prototype.createWebChannel=Dy.prototype.g,Mr.prototype.send=Mr.prototype.u,Mr.prototype.open=Mr.prototype.m,Mr.prototype.close=Mr.prototype.close,hy.NO_ERROR=0,hy.TIMEOUT=8,hy.HTTP_ERROR=6,l4.COMPLETE="complete",u4.EventType=jh,jh.OPEN="a",jh.CLOSE="b",jh.ERROR="c",jh.MESSAGE="d",dn.prototype.listen=dn.prototype.O,Rt.prototype.listenOnce=Rt.prototype.P,Rt.prototype.getLastError=Rt.prototype.Sa,Rt.prototype.getLastErrorCode=Rt.prototype.Ia,Rt.prototype.getStatus=Rt.prototype.da,Rt.prototype.getResponseJson=Rt.prototype.Wa,Rt.prototype.getResponseText=Rt.prototype.ja,Rt.prototype.send=Rt.prototype.ha,Rt.prototype.setWithCredentials=Rt.prototype.Oa,ai.prototype.digest=ai.prototype.l,ai.prototype.reset=ai.prototype.reset,ai.prototype.update=ai.prototype.j,je.prototype.add=je.prototype.add,je.prototype.multiply=je.prototype.R,je.prototype.modulo=je.prototype.gb,je.prototype.compare=je.prototype.X,je.prototype.toNumber=je.prototype.ea,je.prototype.toString=je.prototype.toString,je.prototype.getBits=je.prototype.D,je.fromNumber=Hi,je.fromString=function Q4(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Sn(Q4(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hi(Math.pow(e,8)),r=Pc,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Hi(Math.pow(e,s)),r=r.R(s).add(Hi(o))):r=(r=r.R(n)).add(Hi(o))}return r};var owe=oi.createWebChannelTransport=function(){return new Dy},awe=oi.getStatEventTarget=function(){return dy()},Hx=oi.ErrorCode=hy,lwe=oi.EventType=l4,cwe=oi.Event=Ma,J4=oi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uwe=oi.FetchXmlHttpFactory=Kh,xy=oi.WebChannel=u4,dwe=oi.XhrIo=Rt,hwe=oi.Md5=ai,Lc=oi.Integer=je;const eG="@firebase/firestore";class hn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let Vc="9.23.0";const uo=new ma("@firebase/firestore");function zx(){return uo.logLevel}function R(t,...e){if(uo.logLevel<=Se.DEBUG){const n=e.map(Gx);uo.debug(`Firestore (${Vc}): ${t}`,...n)}}function Lt(t,...e){if(uo.logLevel<=Se.ERROR){const n=e.map(Gx);uo.error(`Firestore (${Vc}): ${t}`,...n)}}function li(t,...e){if(uo.logLevel<=Se.WARN){const n=e.map(Gx);uo.warn(`Firestore (${Vc}): ${t}`,...n)}}function Gx(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function z(t="Unexpected state"){const e=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: `+t;throw Lt(e),new Error(e)}function q(t,e){t||z()}function U(t,e){return t}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class tG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fwe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class pwe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gwe{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q("string"==typeof r.accessToken),new tG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return q(null===e||"string"==typeof e),new hn(e)}}class mwe{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _we{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new mwe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ywe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(q("string"==typeof n.token),this.T=n.token,new nG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vwe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class rG{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=vwe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Bc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new Ct(0,0))}static max(){return new W(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ef{constructor(e,n,r){void 0===n?n=0:n>e.length&&z(),void 0===r?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ef.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ef?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends ef{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const wwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends ef{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return wwe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new x(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new x(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new x(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new x(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}class B{constructor(e){this.path=e}static fromPath(e){return new B(Ae.fromString(e))}static fromName(e){return new B(Ae.fromString(e).popFirst(5))}static empty(){return new B(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new Ae(e.slice()))}}function oG(t){return new Rr(t.readTime,t.key,-1)}class Rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rr(W.min(),B.empty(),-1)}static max(){return new Rr(W.max(),B.empty(),-1)}}function Wx(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=B.comparator(t.documentKey,e.documentKey),0!==n?n:re(t.largestBatchId,e.largestBatchId))}const aG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cwe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ho(t){return Kx.apply(this,arguments)}function Kx(){return Kx=m(function*(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==aG)throw t;R("LocalStore","Unexpectedly lost primary lease")}),Kx.apply(this,arguments)}class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,r)=>{n(e)})}static reject(e){return new b((n,r)=>{r(e)})}static waitFor(e){return new b((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=b.resolve(!1);for(const r of e)n=n.next(i=>i?b.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new b((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new b((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function fo(t){return"IndexedDbTransactionError"===t.name}let kr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function rf(t){return null==t}function sf(t){return 0===t&&1/t==-1/0}function mG(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _G(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class nt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oy(this.root,e,this.comparator,!0)}}class Oy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=s??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new An(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1,An.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,r,i){return this}insert(t,e,n){return new An(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ut{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yG(this.data.getIterator())}getIteratorFrom(e){return new yG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class yG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mr{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new mr([])}unionWith(e){let n=new ut(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class vG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vG("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const qwe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(t){if(q(!!t),"string"==typeof t){let e=0;const n=qwe.exec(t);if(q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function As(t){return"string"==typeof t?en.fromBase64String(t):en.fromUint8Array(t)}function Py(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fy(t){const e=t.mapValue.fields.__previous_value__;return Py(e)?Fy(e):e}function af(t){const e=go(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}class Wwe{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}const mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Py(t)?4:CG(t)?9007199254740991:10:z()}function Gi(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return af(t).isEqual(af(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=go(r.timestampValue),o=go(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,As(t.bytesValue).isEqual(As(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return kt(r.geoPointValue.latitude)===kt(i.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kt(r.integerValue)===kt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=kt(r.doubleValue),o=kt(i.doubleValue);return s===o?sf(s)===sf(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Bc(t.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(mG(s)!==mG(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Gi(s[a],o[a])))return!1;return!0}(t,e);default:return z()}var i}function lf(t,e){return void 0!==(t.values||[]).find(n=>Gi(n,e))}function yo(t,e){if(t===e)return 0;const n=_o(t),r=_o(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=kt(i.integerValue||i.doubleValue),a=kt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return wG(t.timestampValue,e.timestampValue);case 4:return wG(af(t),af(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(i,s){const o=As(i),a=As(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=re(o[l],a[l]);if(0!==c)return c}return re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=re(kt(i.latitude),kt(s.latitude));return 0!==o?o:re(kt(i.longitude),kt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=yo(o[l],a[l]);if(c)return c}return re(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===mo.mapValue&&s===mo.mapValue)return 0;if(i===mo.mapValue)return 1;if(s===mo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=re(a[u],c[u]);if(0!==d)return d;const h=yo(o[a[u]],l[c[u]]);if(0!==h)return h}return re(a.length,c.length)}(t.mapValue,e.mapValue);default:throw z()}}function wG(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return re(t,e);const n=go(t),r=go(e),i=re(n.seconds,r.seconds);return 0!==i?i:re(n.nanos,r.nanos)}function jc(t){return Xx(t)}function Xx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=go(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?As(t.bytesValue).toBase64():"referenceValue"in t?B.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Xx(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Xx(r.fields[a])}`;return s+"}"}(t.mapValue):z();var e}function La(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zx(t){return!!t&&"integerValue"in t}function cf(t){return!!t&&"arrayValue"in t}function bG(t){return!!t&&"nullValue"in t}function EG(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function By(t){return!!t&&"mapValue"in t}function uf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CG(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!By(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uf(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=uf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());By(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];By(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){po(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xn(uf(this.value))}}function TG(t){const e=[];return po(t.fields,(n,r)=>{const i=new Vt([n]);if(By(r)){const s=TG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}class dt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,W.min(),W.min(),W.min(),xn.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,W.min(),W.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,W.min(),W.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vo{constructor(e,n){this.position=e,this.inclusive=n}}function SG(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),n.key):yo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function AG(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gi(t.position[n],e.position[n]))return!1;return!0}class $c{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qwe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class xG{}class be extends xG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Xwe(e,n,r):"array-contains"===n?new ebe(e,r):"in"===n?new PG(e,r):"not-in"===n?new tbe(e,r):"array-contains-any"===n?new nbe(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Zwe(e,r):new Jwe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(yo(n,this.value)):null!==n&&_o(this.value)===_o(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $e extends xG{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new $e(e,n)}matches(e){return Hc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Hc(t){return"and"===t.op}function eM(t){return function MG(t){for(const e of t.filters)if(e instanceof $e)return!1;return!0}(t)&&Hc(t)}function tM(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+jc(t.value);if(eM(t))return t.filters.map(e=>tM(e)).join(",");{const e=t.filters.map(n=>tM(n)).join(",");return`${t.op}(${e})`}}function RG(t,e){return t instanceof be?(n=t,(r=e)instanceof be&&n.op===r.op&&n.field.isEqual(r.field)&&Gi(n.value,r.value)):t instanceof $e?function(n,r){return r instanceof $e&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&RG(s,r.filters[o]),!0)}(t,e):void z();var n,r}function NG(t){return t instanceof be?`${(e=t).field.canonicalString()} ${e.op} ${jc(e.value)}`:t instanceof $e?function(e){return e.op.toString()+" {"+e.getFilters().map(NG).join(" ,")+"}"}(t):"Filter";var e}class Xwe extends be{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){const n=B.comparator(e.key,this.key);return this.matchesComparison(n)}}class Zwe extends be{constructor(e,n){super(e,"in",n),this.keys=OG(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Jwe extends be{constructor(e,n){super(e,"not-in",n),this.keys=OG(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OG(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}class ebe extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cf(n)&&lf(n.arrayValue,this.value)}}class PG extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&lf(this.value.arrayValue,n)}}class tbe extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!lf(this.value.arrayValue,n)}}class nbe extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lf(this.value.arrayValue,r))}}class rbe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function nM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new rbe(t,e,n,r,i,s,o)}function Va(t){const e=U(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tM(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),e.dt=n}return e.dt}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qwe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AG(t.startAt,e.startAt)&&AG(t.endAt,e.endAt)}function Uy(t){return B.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class xs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null}}function zc(t){return new xs(t)}function BG(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function rM(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function $y(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function iM(t){return null!==t.collectionGroup}function Ba(t){const e=U(t);if(null===e.wt){e.wt=[];const n=$y(e),r=rM(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new $c(n)),e.wt.push(new $c(Vt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new $c(Vt.keyField(),s))}}}return e.wt}function ir(t){const e=U(t);if(!e._t)if("F"===e.limitType)e._t=nM(e.path,e.collectionGroup,Ba(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ba(e))n.push(new $c(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new vo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vo(e.startAt.position,e.startAt.inclusive):null;e._t=nM(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function sM(t,e){e.getFirstInequalityField(),$y(t);const n=t.filters.concat([e]);return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hy(t,e,n){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hf(t,e){return df(ir(t),ir(e))&&t.limitType===e.limitType}function UG(t){return`${Va(ir(t))}|lt:${t.limitType}`}function oM(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>NG(r)).join(", ")}]`),rf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),`Target(${n})`}(ir(t))}; limitType=${t.limitType})`}function ff(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):B.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ba(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=SG(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ba(n),r)||n.endAt&&!function(i,s,o){const a=SG(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ba(n),r)));var n,r}function $G(t){return(e,n)=>{let r=!1;for(const i of Ba(t)){const s=ibe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ibe(t,e,n){const r=t.field.isKeyField()?B.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return null!==a&&null!==l?yo(a,l):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _G(this.inner)}size(){return this.innerSize}}const sbe=new nt(B.comparator);function _r(){return sbe}const HG=new nt(B.comparator);function pf(...t){let e=HG;for(const n of t)e=e.insert(n.key,n);return e}function zG(t){let e=HG;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qi(){return gf()}function GG(){return gf()}function gf(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const obe=new nt(B.comparator),abe=new ut(B.comparator);function fe(...t){let e=abe;for(const n of t)e=e.add(n);return e}const lbe=new ut(re);function qG(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function WG(t){return{integerValue:""+t}}function KG(t,e){return function cG(t){return"number"==typeof t&&Number.isInteger(t)&&!sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?WG(e):qG(t,e)}class zy{constructor(){this._=void 0}}function cbe(t,e,n){return t instanceof Gc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Py(i)&&(i=Fy(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Ua?QG(t,e):t instanceof ja?XG(t,e):function(r,i){const s=YG(r,i),o=ZG(s)+ZG(r.gt);return Zx(s)&&Zx(r.gt)?WG(o):qG(r.serializer,o)}(t,e)}function ube(t,e,n){return t instanceof Ua?QG(t,e):t instanceof ja?XG(t,e):n}function YG(t,e){return t instanceof qc?Zx(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Gc extends zy{}class Ua extends zy{constructor(e){super(),this.elements=e}}function QG(t,e){const n=JG(e);for(const r of t.elements)n.some(i=>Gi(i,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends zy{constructor(e){super(),this.elements=e}}function XG(t,e){let n=JG(e);for(const r of t.elements)n=n.filter(i=>!Gi(i,r));return{arrayValue:{values:n}}}class qc extends zy{constructor(e,n){super(),this.serializer=e,this.gt=n}}function ZG(t){return kt(t.integerValue||t.doubleValue)}function JG(t){return cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class hbe{constructor(e,n){this.version=e,this.transformResults=n}}class mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class qy{}function eq(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Kc(t.key,mt.none()):new Wc(t.key,t.data,mt.none());{const n=t.data,r=xn.empty();let i=new ut(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Rs(t.key,r,new mr(i.toArray()),mt.none())}}function fbe(t,e,n){t instanceof Wc?function(r,i,s){const o=r.value.clone(),a=rq(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(r,i,s){if(!Gy(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=rq(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(nq(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function _f(t,e,n,r){return t instanceof Wc?function(i,s,o,a){if(!Gy(i.precondition,s))return o;const l=i.value.clone(),c=iq(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(i,s,o,a){if(!Gy(i.precondition,s))return o;const l=iq(i.fieldTransforms,a,s),c=s.data;return c.setAll(nq(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):(o=n,Gy(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function pbe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=YG(r.transform,i||null);null!=s&&(null===n&&(n=xn.empty()),n.set(r.field,s))}return n||null}function tq(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Bc(n,r,(i,s)=>function dbe(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Ua&&r instanceof Ua||n instanceof ja&&r instanceof ja?Bc(n.elements,r.elements,Gi):n instanceof qc&&r instanceof qc?Gi(n.gt,r.gt):n instanceof Gc&&r instanceof Gc);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Wc extends qy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends qy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function nq(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rq(t,e,n){const r=new Map;q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ube(o,a,n[i]))}return r}function iq(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,cbe(s,o,e))}return r}class Kc extends qy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lM extends qy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fbe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_f(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_f(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GG();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=eq(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(n,r)=>tq(n,r))&&Bc(this.baseMutations,e.baseMutations,(n,r)=>tq(n,r))}}class uM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){q(e.mutations.length===r.length);let i=obe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uM(e,n,r,i)}}class dM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mbe{constructor(e,n){this.count=e,this.unchangedNames=n}}var zt,xe;function oq(t){if(void 0===t)return Lt("GRPC error has no .code"),E.UNKNOWN;switch(t){case zt.OK:return E.OK;case zt.CANCELLED:return E.CANCELLED;case zt.UNKNOWN:return E.UNKNOWN;case zt.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case zt.INTERNAL:return E.INTERNAL;case zt.UNAVAILABLE:return E.UNAVAILABLE;case zt.UNAUTHENTICATED:return E.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case zt.NOT_FOUND:return E.NOT_FOUND;case zt.ALREADY_EXISTS:return E.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return E.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case zt.ABORTED:return E.ABORTED;case zt.OUT_OF_RANGE:return E.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return E.UNIMPLEMENTED;case zt.DATA_LOSS:return E.DATA_LOSS;default:return z()}}(xe=zt||(zt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";class hM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Wy}static getOrCreateInstance(){return null===Wy&&(Wy=new hM),Wy}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Wy=null;const _be=new Lc([4294967295,4294967295],0);function lq(t){const e=function aq(){return new TextEncoder}().encode(t),n=new hwe;return n.update(e),new Uint8Array(n.digest())}function cq(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lc([n,r],0),new Lc([i,s],0)]}class fM{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yf(`Invalid padding: ${n}`);if(r<0)throw new yf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new yf(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new yf(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Lc.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Lc.fromNumber(r)));return 1===i.compare(_be)&&(i=new Lc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=lq(e),[r,i]=cq(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fM(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=lq(e),[r,i]=cq(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class yf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vf(W.min(),i,new nt(re),_r(),fe())}}class wf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wf(r,n,fe(),fe(),fe())}}class Ky{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class uq{constructor(e,n){this.targetId=e,this.Vt=n}}class dq{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hq{constructor(){this.St=0,this.Dt=pq(),this.Ct=en.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=fe(),n=fe(),r=fe();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new wf(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=pq()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ybe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=_r(),this.zt=fq(),this.Wt=new nt(re)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Uy(o))if(0===i){const a=new B(o.path);this.Yt(r,a,dt.newNoDocument(a,W.min()))}else q(1===i);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);0!==l&&(this.ee(r),this.Wt=this.Wt.insert(r,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=hM.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,u,d){var h,f,p,g,_,v;const y={localCacheCount:u,existenceFilterCount:d.count},T=d.unchangedNames;return T&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=T?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=T?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(v=null===(_=T?.bits)||void 0===_?void 0:_.padding)&&void 0!==v?v:0}),y}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,c;try{l=As(s).toUint8Array()}catch(u){if(u instanceof vG)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new fM(l,o,a)}catch(u){return li(u instanceof yf?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Uy(a.target)){const l=new B(a.target.path);null!==this.jt.get(l)||this.ae(o,l)||this.Yt(o,l,dt.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=fe();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new vf(e,n,this.Wt,this.jt,r);return this.jt=_r(),this.zt=fq(),this.Wt=new nt(re),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new hq,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new ut(re),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||R("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new hq),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function fq(){return new nt(B.comparator)}function pq(){return new nt(B.comparator)}const vbe={asc:"ASCENDING",desc:"DESCENDING"},wbe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bbe={and:"AND",or:"OR"};class Ebe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pM(t,e){return t.useProto3Json||rf(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cbe(t,e){return Yc(t,e.toTimestamp())}function Bt(t){return q(!!t),W.fromTimestamp(function(e){const n=go(e);return new Ct(n.seconds,n.nanos)}(t))}function gM(t,e){return(n=t,new Ae(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function mq(t){const e=Ae.fromString(t);return q(Dq(e)),e}function bf(t,e){return gM(t.databaseId,e.path)}function Wi(t,e){const n=mq(e);if(n.get(1)!==t.databaseId.projectId)throw new x(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(yq(n))}function mM(t,e){return gM(t.databaseId,e)}function Ef(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yq(t){return q(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vq(t,e,n){return{name:bf(t,e),fields:n.value.mapValue.fields}}function bq(t,e){return{documents:[mM(t,e.path)]}}function yM(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=mM(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=mM(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0!==l.length)return Iq($e.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:wo((u=c).field),direction:Abe(u.dir)};var u})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=pM(t,e.limit);var a,l;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),n}function Eq(t){let e=function _q(t){const e=mq(t);return 4===e.length?Ae.emptyPath():yq(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){q(1===r);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const d=Cq(u);return d instanceof $e&&eM(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>{return new $c(Qc((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,rf(d)?null:d}(n.limit));let l=null;var u;n.startAt&&(l=new vo((u=n.startAt).values||[],!!u.before));let c=null;return n.endAt&&(c=function(u){return new vo(u.values||[],!u.before)}(n.endAt)),function VG(t,e,n,r,i,s,o,a){return new xs(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",l,c)}function Cq(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Qc(e.unaryFilter.field);return be.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Qc(e.unaryFilter.field);return be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qc(e.unaryFilter.field);return be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Qc(e.unaryFilter.field);return be.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):void 0!==t.fieldFilter?be.create(Qc((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return $e.create(e.compositeFilter.filters.map(n=>Cq(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return z()}}(e.compositeFilter.op))}(t):z();var e}function Abe(t){return vbe[t]}function xbe(t){return wbe[t]}function Mbe(t){return bbe[t]}function wo(t){return{fieldPath:t.canonicalString()}}function Qc(t){return Vt.fromServerFormat(t.fieldPath)}function Iq(t){return t instanceof be?function(e){if("=="===e.op){if(EG(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NAN"}};if(bG(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(EG(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NAN"}};if(bG(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(e.field),op:xbe(e.op),value:e.value}}}(t):t instanceof $e?function(e){const n=e.getFilters().map(r=>Iq(r));return 1===n.length?n[0]:{compositeFilter:{op:Mbe(e.op),filters:n}}}(t):z()}function Rbe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dq(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ks{constructor(e,n,r,i,s=W.min(),o=W.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Tq{constructor(e){this.fe=e}}function vM(t){const e=Eq({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Hy(e,e.limit,"L"):e}class Ga{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(kt(e.integerValue));else if("doubleValue"in e){const r=kt(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),sf(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(As(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?CG(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):z()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),B.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Ga.Ve=new Ga;class Ube{constructor(){this.rn=new DM}addToCollectionParentIndex(e,n){return this.rn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Rr.min())}updateCollectionGroup(e,n,r){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class DM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Ae.comparator)).toArray()}}new Uint8Array(0);class Hn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class Wa{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Wa(0)}static Mn(){return new Wa(-1)}}class qbe{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?b.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ybe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Zq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&_f(r.mutation,i,mr.empty(),Ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_r();const o=gf(),a=gf();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof Rs)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),_f(u.mutation,c,u.mutation.getFieldMask(),Ct.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new Ybe(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gf();let i=new nt((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(null===c)return;let u=r.get(l)||mr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||fe()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=GG();u.forEach(h=>{if(!s.has(h)){const f=eq(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return b.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return B.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):iM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):b.resolve(qi());let a=-1,l=s;return o.next(c=>b.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?b.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,fe())).next(u=>({batchId:a,changes:zG(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=pf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=pf();return this.indexManager.getCollectionParents(e,i).next(o=>b.forEach(o,a=>{const l=(c=n,u=a.child(i),new xs(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();null===s.get(c)&&(s=s.insert(c,dt.newInvalidDocument(c)))});let o=pf();return s.forEach((a,l)=>{const c=i.get(a);void 0!==c&&_f(c.mutation,l,mr.empty(),Ct.now()),ff(n,l)&&(o=o.insert(a,l))}),o})}}class Qbe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return b.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Bt(r.createTime)}),b.resolve()}getNamedQuery(e,n){return b.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:vM(r.bundledQuery),readTime:Bt(r.readTime)}),b.resolve();var r}}class Xbe{constructor(){this.overlays=new nt(B.comparator),this.ls=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qi();return b.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),b.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),b.resolve()}getOverlaysForCollection(e,n,r){const i=qi(),s=n.length+1,o=new B(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return b.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new nt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=qi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=qi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return b.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dM(n,r));let s=this.ls.get(n);void 0===s&&(s=fe(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class TM{constructor(){this.fs=new ut(pn.ds),this.ws=new ut(pn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new pn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new pn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new B(new Ae([])),r=new pn(n,e),i=new pn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new B(new Ae([])),r=new pn(n,e),i=new pn(n,e+1);let s=fe();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new pn(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class pn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return B.comparator(e.key,n.key)||re(e.As,n.As)}static _s(e,n){return re(e.As,n.As)||B.comparator(e.key,n.key)}}class Zbe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ut(pn.ds)}checkEmpty(e){return b.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new cM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new pn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(e,n){return b.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pn(n,0),i=new pn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(re);return n.forEach(i=>{const s=new pn(i,0),o=new pn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),b.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;B.isDocumentKey(s)||(s=s.child(""));const o=new pn(new B(s),0);let a=new ut(re);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.As)),!0)},o),b.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){q(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return b.forEach(n.mutations,i=>{const s=new pn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new pn(n,0),i=this.Rs.firstAfterOrEqual(r);return b.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return b.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Jbe{constructor(e){this.Ds=e,this.docs=new nt(B.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return b.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=_r();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),b.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_r();const o=n.path,a=new B(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Wx(oG(u),r)<=0||(i.has(u.key)||ff(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return b.resolve(s)}getAllFromCollectionGroup(e,n,r,i){z()}Cs(e,n){return b.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eEe(this)}getSize(e){return b.resolve(this.size)}}class eEe extends qbe{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),b.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class tEe{constructor(e){this.persistence=e,this.xs=new Ms(n=>Va(n),df),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Ns=0,this.ks=new TM,this.targetCount=0,this.Ms=Wa.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),b.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Wa(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Fn(n),b.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),b.waitFor(s).next(()=>i)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return b.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),b.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),b.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),b.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return b.resolve(r)}containsKey(e,n){return b.resolve(this.ks.containsKey(n))}}class SM{constructor(e,n){this.$s={},this.overlays={},this.Os=new kr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new tEe(this),this.indexManager=new Ube,this.remoteDocumentCache=new Jbe(r=>this.referenceDelegate.Ls(r)),this.serializer=new Tq(n),this.qs=new Qbe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xbe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new Zbe(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){R("MemoryPersistence","Starting transaction:",e);const i=new nEe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return b.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class nEe extends Cwe{constructor(e){super(),this.currentSequenceNumber=e}}class rv{constructor(e){this.persistence=e,this.Qs=new TM,this.js=null}static zs(e){return new rv(e)}get Ws(){if(this.js)return this.js;throw z()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),b.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),b.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Ws,r=>{const i=B.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,W.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return b.or([()=>b.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class RM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new RM(e,n.fromCache,r,i)}}class eW{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(BG(n))return b.resolve(null);let r=ir(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Hy(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,Hy(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,r,i){return BG(n)||i.isEqual(W.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(zx()<=Se.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oM(n)),this.Wi(e,o,n,function sG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(1e9===r?new Ct(n+1,0):new Ct(n,r));return new Rr(i,B.empty(),e)}(i,-1)))})}ji(e,n){let r=new ut($G(e));return n.forEach((i,s)=>{ff(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return zx()<=Se.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",oM(n)),this.Ui.getDocumentsMatchingQuery(e,n,Rr.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class iEe{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new nt(re),this.Yi=new Ms(s=>Va(s),df),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zq(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function nW(t,e){return kM.apply(this,arguments)}function kM(){return kM=m(function*(t,e){const n=U(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=fe();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),kM.apply(this,arguments)}function rW(t){const e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function aEe(t,e){const n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eu(t,e,n){return NM.apply(this,arguments)}function NM(){return NM=m(function*(t,e,n){const r=U(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fo(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),NM.apply(this,arguments)}function ov(t,e,n){const r=U(t);let i=W.min(),s=fe();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=U(a),d=u.Yi.get(c);return void 0!==d?b.resolve(u.Ji.get(d)):u.Bs.getTargetData(l,c)}(r,o,ir(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:W.min(),n?s:fe())).next(a=>(function aW(t,e,n){let r=t.Xi.get(e)||W.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function jG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class VM{constructor(){this.activeTargetIds=function aM(){return lbe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uW{constructor(){this.Hr=new VM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new VM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uEe{Yr(e){}shutdown(){}}class dW{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cv=null;function UM(){return null===cv?cv=268435456+Math.round(2147483648*Math.random()):cv++,"0x"+cv.toString(16)}const dEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hEe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const zn="WebChannelConnection";class fEe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=UM(),a=this.To(e,n);R("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(c=>(R("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw li("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${dEe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=UM();return new Promise((o,a)=>{const l=new dwe;l.setWithCredentials(!0),l.listenOnce(lwe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hx.NO_ERROR:const u=l.getResponseJson();R(zn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Hx.TIMEOUT:R(zn,`RPC '${e}' ${s} timed out`),a(new x(E.DEADLINE_EXCEEDED,"Request time out"));break;case Hx.HTTP_ERROR:const d=l.getStatus();if(R(zn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const _=g.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(_)>=0?_:E.UNKNOWN}(f.status);a(new x(p,f.message))}else a(new x(E.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new x(E.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{R(zn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);R(zn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=UM(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=owe(),a=awe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new uwe({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");R(zn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const p=new hEe({ro:_=>{f?R(zn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(R(zn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),R(zn,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},oo:()=>d.close()}),g=(_,v,y)=>{_.listen(v,T=>{try{y(T)}catch(O){setTimeout(()=>{throw O},0)}})};return g(d,xy.EventType.OPEN,()=>{f||R(zn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,xy.EventType.CLOSE,()=>{f||(f=!0,R(zn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,xy.EventType.ERROR,_=>{f||(f=!0,li(zn,`RPC '${e}' stream ${i} transport errored:`,_),p.wo(new x(E.UNAVAILABLE,"The operation could not be completed")))}),g(d,xy.EventType.MESSAGE,_=>{var v;if(!f){const y=_.data[0];q(!!y);const O=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(O){R(zn,`RPC '${e}' stream ${i} received error:`,O);const G=O.status;let ne=function(kn){const pi=zt[kn];if(void 0!==pi)return oq(pi)}(G),Fe=O.message;void 0===ne&&(ne=E.INTERNAL,Fe="Unknown error status: "+G+" with message "+O.message),f=!0,p.wo(new x(ne,Fe)),d.close()}else R(zn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,cwe.STAT_EVENT,_=>{_.stat===J4.PROXY?R(zn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===J4.NOPROXY&&R(zn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function uv(){return typeof document<"u"?document:null}function kf(t){return new Ebe(t,!0)}class jM{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&R("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fW{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new jM(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return m(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return m(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return m(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new x(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(m(function*(){e.state=0,e.start()}))}tu(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pEe extends fW{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function Dbe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:z(),i=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(q(void 0===c||"string"==typeof c),en.fromBase64String(c||"")):(q(void 0===c||c instanceof Uint8Array),en.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?E.UNKNOWN:oq(l.code);return new x(c,l.message||"")}(o);n=new dq(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Wi(t,r.document.name),s=Bt(r.document.updateTime),o=r.document.createTime?Bt(r.document.createTime):W.min(),a=new xn({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(i,s,o,a);n=new Ky(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Wi(t,r.document),s=r.readTime?Bt(r.readTime):W.min(),o=dt.newNoDocument(i,s);n=new Ky([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Wi(t,r.document);n=new Ky([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return z();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mbe(i,s);n=new uq(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return W.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?Bt(s.readTime):W.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Ef(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Uy(a)?{documents:bq(i,a)}:{query:yM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=gq(i,s.resumeToken);const l=pM(i,s.expectedCount);null!==l&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(W.min())>0){o.readTime=Yc(i,s.snapshotVersion.toTimestamp());const l=pM(i,s.expectedCount);null!==l&&(o.expectedCount=l)}return o}(this.serializer,e);const r=function Sbe(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Ef(this.serializer),n.removeTarget=e,this.Wo(n)}}class gEe extends fW{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function Tbe(t,e){return t&&t.length>0?(q(void 0!==e),t.map(n=>function(r,i){let s=Bt(r.updateTime?r.updateTime:i);return s.isEqual(W.min())&&(s=Bt(i)),new hbe(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Bt(e.commitTime);return this.listener.cu(r,n)}return q(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ef(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Cf(t,e){let n;if(e instanceof Wc)n={update:vq(t,e.key,e.value)};else if(e instanceof Kc)n={delete:bf(t,e.key)};else if(e instanceof Rs)n={update:vq(t,e.key,e.data),updateMask:Rbe(e.fieldMask)};else{if(!(e instanceof lM))return z();n={verify:bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Gc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ua)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ja)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qc)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Cbe(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:z()),n;var i}(this.serializer,r))};this.Wo(n)}}class mEe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new x(E.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(E.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(E.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class yEe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Lt(n),this.mu=!1):R("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class vEe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(m(function*(){var l;Io(o)&&(R("RemoteStore","Restarting streams for network reachability change."),yield(l=m(function*(c){const u=U(c);u.vu.add(4),yield tu(u),u.bu.set("Unknown"),u.vu.delete(4),yield Nf(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.bu=new yEe(r,i)}}function Nf(t){return HM.apply(this,arguments)}function HM(){return HM=m(function*(t){if(Io(t))for(const e of t.Ru)yield e(!0)}),HM.apply(this,arguments)}function tu(t){return zM.apply(this,arguments)}function zM(){return zM=m(function*(t){for(const e of t.Ru)yield e(!1)}),zM.apply(this,arguments)}function dv(t,e){const n=U(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),WM(n)?qM(n):ru(n).Ko()&&GM(n,e))}function Of(t,e){const n=U(t),r=ru(n);n.Au.delete(e),r.Ko()&&pW(n,e),0===n.Au.size&&(r.Ko()?r.jo():Io(n)&&n.bu.set("Unknown"))}function GM(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ru(t).su(e)}function pW(t,e){t.Vu.qt(e),ru(t).iu(e)}function qM(t){t.Vu=new ybe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ru(t).start(),t.bu.gu()}function WM(t){return Io(t)&&!ru(t).Uo()&&t.Au.size>0}function Io(t){return 0===U(t).vu.size}function gW(t){t.Vu=void 0}function wEe(t){return KM.apply(this,arguments)}function KM(){return KM=m(function*(t){t.Au.forEach((e,n)=>{GM(t,e)})}),KM.apply(this,arguments)}function bEe(t,e){return YM.apply(this,arguments)}function YM(){return YM=m(function*(t,e){gW(t),WM(t)?(t.bu.Iu(e),qM(t)):t.bu.set("Unknown")}),YM.apply(this,arguments)}function EEe(t,e,n){return QM.apply(this,arguments)}function QM(){return QM=m(function*(t,e,n){if(t.bu.set("Online"),e instanceof dq&&2===e.state&&e.cause)try{yield(r=m(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hv(t,r)}else if(e instanceof Ky?t.Vu.Ht(e):e instanceof uq?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(W.min()))try{const r=yield rW(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(l);c&&i.Au.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(en.EMPTY_BYTE_STRING,c.snapshotVersion)),pW(i,a);const u=new ks(c.target,a,l,c.sequenceNumber);GM(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){R("RemoteStore","Failed to raise snapshot:",r),yield hv(t,r)}var r}),QM.apply(this,arguments)}function hv(t,e,n){return XM.apply(this,arguments)}function XM(){return XM=m(function*(t,e,n){if(!fo(e))throw e;t.vu.add(1),yield tu(t),t.bu.set("Offline"),n||(n=()=>rW(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){R("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield Nf(t)}))}),XM.apply(this,arguments)}function mW(t,e){return e().catch(n=>hv(t,n,e))}function nu(t){return ZM.apply(this,arguments)}function ZM(){return ZM=m(function*(t){const e=U(t),n=Do(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;CEe(e);)try{const i=yield aEe(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,IEe(e,i)}catch(i){yield hv(e,i)}_W(e)&&yW(e)}),ZM.apply(this,arguments)}function CEe(t){return Io(t)&&t.Eu.length<10}function IEe(t,e){t.Eu.push(e);const n=Do(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function _W(t){return Io(t)&&!Do(t).Uo()&&t.Eu.length>0}function yW(t){Do(t).start()}function DEe(t){return JM.apply(this,arguments)}function JM(){return JM=m(function*(t){Do(t).hu()}),JM.apply(this,arguments)}function TEe(t){return eR.apply(this,arguments)}function eR(){return eR=m(function*(t){const e=Do(t);for(const n of t.Eu)e.uu(n.mutations)}),eR.apply(this,arguments)}function SEe(t,e,n){return tR.apply(this,arguments)}function tR(){return tR=m(function*(t,e,n){const r=t.Eu.shift(),i=uM.from(r,e,n);yield mW(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield nu(t)}),tR.apply(this,arguments)}function AEe(t,e){return nR.apply(this,arguments)}function nR(){return nR=m(function*(t,e){var n;e&&Do(t).ou&&(yield(n=m(function*(r,i){if(function sq(t){switch(t){default:return z();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}(s=i.code)&&s!==E.ABORTED){const o=r.Eu.shift();Do(r).Qo(),yield mW(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield nu(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),_W(t)&&yW(t)}),nR.apply(this,arguments)}function vW(t,e){return rR.apply(this,arguments)}function rR(){return rR=m(function*(t,e){const n=U(t);n.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");const r=Io(n);n.vu.add(3),yield tu(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield Nf(n)}),rR.apply(this,arguments)}function sR(){return sR=m(function*(t,e){const n=U(t);e?(n.vu.delete(2),yield Nf(n)):e||(n.vu.add(2),yield tu(n),n.bu.set("Unknown"))}),sR.apply(this,arguments)}function ru(t){return t.Su||(t.Su=function(e,n,r){const i=U(e);return i.fu(),new pEe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:wEe.bind(null,t),ao:bEe.bind(null,t),nu:EEe.bind(null,t)}),t.Ru.push(function(){var e=m(function*(n){n?(t.Su.Qo(),WM(t)?qM(t):t.bu.set("Unknown")):(yield t.Su.stop(),gW(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function Do(t){return t.Du||(t.Du=function(e,n,r){const i=U(e);return i.fu(),new gEe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:DEe.bind(null,t),ao:AEe.bind(null,t),au:TEe.bind(null,t),cu:SEe.bind(null,t)}),t.Ru.push(function(){var e=m(function*(n){n?(t.Du.Qo(),yield nu(t)):(yield t.Du.stop(),t.Eu.length>0&&(R("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class oR{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new oR(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iu(t,e){if(Lt("AsyncQueue",`${e}: ${t}`),fo(t))return new x(E.UNAVAILABLE,`${e}: ${t}`);throw t}class su{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=pf(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new su(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof su)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new su;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class wW{constructor(){this.Cu=new nt(B.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):z():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ou{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ou(e,n,su.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class xEe{constructor(){this.Nu=void 0,this.listeners=[]}}class MEe{constructor(){this.queries=new Ms(e=>UG(e),hf),this.onlineState="Unknown",this.ku=new Set}}function aR(t,e){return lR.apply(this,arguments)}function lR(){return lR=m(function*(t,e){const n=U(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xEe),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=iu(o,`Initialization of query '${oM(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&dR(n)}),lR.apply(this,arguments)}function cR(t,e){return uR.apply(this,arguments)}function uR(){return uR=m(function*(t,e){const n=U(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),uR.apply(this,arguments)}function REe(t,e){const n=U(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&dR(n)}function kEe(t,e,n){const r=U(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function dR(t){t.ku.forEach(e=>{e.next()})}class hR{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class CW{constructor(e){this.key=e}}class IW{constructor(e){this.key=e}}class DW{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=fe(),this.mutatedKeys=fe(),this.tc=$G(e),this.ec=new su(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new wW,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=ff(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.rc(h,f)||(r.track({type:2,doc:f}),_=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return f(d)-f(h)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,0!==s.length||l?{snapshot:new ou(this.query,e.ec,i,s,e.mutatedKeys,0===a,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wW,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=fe(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new IW(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new CW(r))}),n}hc(e){this.Yu=e.ir,this.Zu=fe();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return ou.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class PEe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class FEe{constructor(e){this.key=e,this.fc=!1}}class LEe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ms(a=>UG(a),hf),this._c=new Map,this.mc=new Set,this.gc=new nt(B.comparator),this.yc=new Map,this.Ic=new TM,this.Tc={},this.Ec=new Map,this.Ac=Wa.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function VEe(t,e){return fR.apply(this,arguments)}function fR(){return fR=m(function*(t,e){const n=function FR(t){const e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WEe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jEe.bind(null,e),e.dc.nu=REe.bind(null,e.eventManager),e.dc.Pc=kEe.bind(null,e.eventManager),e}(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function Jc(t,e){const n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,b.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}(n.localStore,ir(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function pR(t,e,n,r,i){return gR.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&dv(n.remoteStore,o)}return i}),fR.apply(this,arguments)}function gR(){return gR=m(function*(t,e,n,r,i){t.Rc=(d,h,f)=>{return(p=m(function*(g,_,v,y){let T=_.view.sc(v);T.zi&&(T=yield ov(g.localStore,_.query,!1).then(({documents:ne})=>_.view.sc(ne,T)));const O=y&&y.targetChanges.get(_.targetId),G=_.view.applyChanges(T,g.isPrimaryClient,O);return DR(g,_.targetId,G.cc),G.snapshot}),function(g,_,v,y){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield ov(t.localStore,e,!0),o=new DW(e,s.ir),a=o.sc(s.documents),l=wf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,l);DR(t,n,c.cc);const u=new PEe(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),gR.apply(this,arguments)}function BEe(t,e){return mR.apply(this,arguments)}function mR(){return mR=m(function*(t,e){const n=U(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!hf(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield eu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Of(n.remoteStore,r.targetId),au(n,r.targetId)}).catch(ho))):(au(n,r.targetId),yield eu(n.localStore,r.targetId,!0))}),mR.apply(this,arguments)}function _R(){return _R=m(function*(t,e,n){const r=function LR(t){const e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$Ee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HEe.bind(null,e),e}(t);try{const i=yield function(s,o){const a=U(s),l=Ct.now(),c=o.reduce((h,f)=>h.add(f.key),fe());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=_r(),p=fe();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((_,v)=>{v.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const _=[];for(const v of o){const y=pbe(v,u.get(v.key).overlayedDocument);null!=y&&_.push(new Rs(v.key,y,TG(y.value.mapValue),mt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,_,o)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:zG(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new nt(re)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Ns(r,i.changes),yield nu(r.remoteStore)}catch(i){const s=iu(i,"Failed to persist write");n.reject(s)}}),_R.apply(this,arguments)}function TW(t,e){return yR.apply(this,arguments)}function yR(){return yR=m(function*(t,e){const n=U(t);try{const r=yield function oEe(t,e){const n=U(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,_;null!==e.targetMismatches.get(d)?f=f.withResumeToken(en.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),g=f,_=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,f))});let l=_r(),c=fe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function iW(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_r();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!r.isEqual(W.min())){const u=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return b.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ji=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?q(o.fc):i.removedDocuments.size>0&&(q(o.fc),o.fc=!1))}),yield Ns(n,r,e)}catch(r){yield ho(r)}}),yR.apply(this,arguments)}function SW(t,e,n){const r=U(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=U(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Mu(o)&&(l=!0)}),l&&dR(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jEe(t,e,n){return vR.apply(this,arguments)}function vR(){return vR=m(function*(t,e,n){const r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new nt(B.comparator);o=o.insert(s,dt.newNoDocument(s,W.min()));const a=fe().add(s),l=new vf(W.min(),new Map,new nt(re),o,a);yield TW(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),TR(r)}else yield eu(r.localStore,e,!1).then(()=>au(r,e,n)).catch(ho)}),vR.apply(this,arguments)}function $Ee(t,e){return wR.apply(this,arguments)}function wR(){return wR=m(function*(t,e){const n=U(t),r=e.batch.batchId;try{const i=yield function sEe(t,e){const n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=b.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);q(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=fe();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);IR(n,r,null),CR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ns(n,i)}catch(i){yield ho(i)}}),wR.apply(this,arguments)}function HEe(t,e,n){return bR.apply(this,arguments)}function bR(){return bR=m(function*(t,e,n){const r=U(t);try{const i=yield function(s,o){const a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(q(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);IR(r,e,n),CR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ns(r,i)}catch(i){yield ho(i)}}),bR.apply(this,arguments)}function CR(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function IR(t,e,n){const r=U(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function au(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||AW(t,r)})}function AW(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Of(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),TR(t))}function DR(t,e,n){for(const r of n)r instanceof CW?(t.Ic.addReference(r.key,e),GEe(t,r)):r instanceof IW?(R("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||AW(t,r.key)):z()}function GEe(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(R("SyncEngine","New document in limbo: "+n),t.mc.add(r),TR(t))}function TR(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new B(Ae.fromString(e)),r=t.Ac.next();t.yc.set(r,new FEe(n)),t.gc=t.gc.insert(n,r),dv(t.remoteStore,new ks(ir(zc(n.path)),r,"TargetPurposeLimboResolution",kr.ct))}}function Ns(t,e,n){return SR.apply(this,arguments)}function SR(){return SR=m(function*(t,e,n){const r=U(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const u=RM.Li(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=m(function*(l,c){const u=U(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>b.forEach(c,h=>b.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>b.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!fo(d))throw d;R("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ji=u.Ji.insert(h,g)}}}),function(l,c){return a.apply(this,arguments)})(r.localStore,s))}),SR.apply(this,arguments)}function qEe(t,e){return AR.apply(this,arguments)}function AR(){return AR=m(function*(t,e){const n=U(t);if(!n.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());const r=yield nW(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new x(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ns(n,r.er)}var i}),AR.apply(this,arguments)}function WEe(t,e){const n=U(t),r=n.yc.get(e);if(r&&r.fc)return fe().add(r.key);{let i=fe();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class fv{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.serializer=kf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function tW(t,e,n,r){return new iEe(t,e,n,r)}(this.persistence,new eW,e.initialUser,this.serializer)}createPersistence(e){return new SM(rv.zs,this.serializer)}createSharedClientState(e){return new uW}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lu{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>SW(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=qEe.bind(null,r.syncEngine),yield function iR(t,e){return sR.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new MEe}createDatastore(e){const n=kf(e.databaseInfo.databaseId),r=new fEe(e.databaseInfo);return new mEe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>SW(this.syncEngine,a,0),o=dW.D()?new dW:new uEe,new vEe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){const u=new LEe(r,i,s,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(n){const r=U(n);R("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield tu(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class oCe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=rG.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){R("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(R("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=iu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function gv(t,e){return VR.apply(this,arguments)}function VR(){return VR=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield nW(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),VR.apply(this,arguments)}function BR(t,e){return UR.apply(this,arguments)}function UR(){return UR=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function jR(t){return $R.apply(this,arguments)}(t);R("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>vW(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>vW(e.remoteStore,s)),t._onlineComponents=e}),UR.apply(this,arguments)}function $R(){return $R=m(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){R("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function OW(t){return"FirebaseError"===t.name?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),yield gv(t,new fv)}}else R("FirestoreClient","Using default OfflineComponentProvider"),yield gv(t,new fv);return t._offlineComponents}),$R.apply(this,arguments)}function mv(t){return HR.apply(this,arguments)}function HR(){return HR=m(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(R("FirestoreClient","Using user provided OnlineComponentProvider"),yield BR(t,t._uninitializedComponentsProvider._online)):(R("FirestoreClient","Using default OnlineComponentProvider"),yield BR(t,new lu))),t._onlineComponents}),HR.apply(this,arguments)}function cu(t){return GR.apply(this,arguments)}function GR(){return GR=m(function*(t){const e=yield mv(t),n=e.eventManager;return n.onListen=VEe.bind(null,e.syncEngine),n.onUnlisten=BEe.bind(null,e.syncEngine),n}),GR.apply(this,arguments)}function UW(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const jW=new Map;function qR(t,e,n){if(!n)throw new x(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $W(t){if(!B.isDocumentKey(t))throw new x(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HW(t){if(B.isDocumentKey(t))throw new x(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":z()}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yv(t);throw new x(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class GW{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new x(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new x(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function gCe(t,e,n,r){if(!0===e&&!0===r)throw new x(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=UW(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new x(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new x(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new x(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GW({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new x(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GW(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new fwe;switch(n.type){case"firstParty":return new _we(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new x(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=jW.get(e);n&&(R("ComponentProvider","Removing Datastore"),jW.delete(e),n.terminate())}(this),Promise.resolve()}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Mn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mn(this.firestore,e,this._query)}}class Ki extends Mn{constructor(e,n,r){super(e,n,zc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new B(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function _Ce(t,e,...n){if(t=Ye(t),qR("collection","path",e),t instanceof Pf){const r=Ae.fromString(e,...n);return HW(r),new Ki(t,null,r)}{if(!(t instanceof Ut||t instanceof Ki))throw new x(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return HW(r),new Ki(t.firestore,null,r)}}function qW(t,e,...n){if(t=Ye(t),1===arguments.length&&(e=rG.A()),qR("doc","path",e),t instanceof Pf){const r=Ae.fromString(e,...n);return $W(r),new Ut(t,null,new B(r))}{if(!(t instanceof Ut||t instanceof Ki))throw new x(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return $W(r),new Ut(t.firestore,t instanceof Ki?t.converter:null,new B(r))}}function WW(t,e){return t=Ye(t),e=Ye(e),(t instanceof Ut||t instanceof Ki)&&(e instanceof Ut||e instanceof Ki)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}class yCe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new jM(this,"async_queue_retry"),this.Xc=()=>{const n=uv();n&&R("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=uv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=uv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Jt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return m(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!fo(n))throw n;R("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Lt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=oR.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&z()}verifyOperationInProgress(){}sa(){var e=this;return m(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function WR(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class ht extends Pf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yCe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||YW(this),this._firestoreClient.terminate()}}function wCe(t,e){const r="string"==typeof t?t:e||"(default)",i=va("object"==typeof t?t:b_(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=B$("firestore");s&&function mCe(t,e,n,r={}){var i;const s=(t=Ie(t,Pf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=hn.MOCK_USER;else{a=$$(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new x(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(c)}t._authCredentials=new pwe(new tG(a,l))}}(i,...s)}return i}function Gt(t){return t._firestoreClient||YW(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function YW(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Wwe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,UW(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new oCe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(en.fromBase64String(e))}catch(n){throw new x(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new x(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class KR{constructor(e){this._methodName=e}}class YR{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}}const ECe=/^__.*__$/;class CCe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}class ZW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JW(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class vv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new vv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return bv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(JW(this.ca)&&ECe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ICe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kf(e)}ya(e,n,r,i=!1){return new vv({ca:e,methodName:n,ga:r,path:Vt.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(t){const e=t._freezeSettings(),n=kf(t._databaseId);return new ICe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QR(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);ZR("Data must be an object, but it was:",o,r);const a=i6(r,o);let l,c;if(s.merge)l=new mr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=Vf(e,d,n);if(!o.contains(h))throw new x(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);o6(u,h)||u.push(h)}l=new mr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new CCe(new xn(a),l,c)}class Lf extends KR{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}function Qa(t,e){if(s6(t=Ye(t)))return ZR("Unsupported field value:",e,t),i6(t,e);if(t instanceof KR)return function(n,r){if(!JW(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Qa(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Ye(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return KG(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Ct.fromDate(n);return{timestampValue:Yc(r.serializer,i)}}if(n instanceof Ct){const i=new Ct(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yc(r.serializer,i)}}if(n instanceof YR)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ya)return{bytesValue:gq(r.serializer,n._byteString)};if(n instanceof Ut){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gM(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${yv(n)}`)}(t,e)}function i6(t,e){const n={};return _G(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(t,(r,i)=>{const s=Qa(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function s6(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof YR||t instanceof Ya||t instanceof Ut||t instanceof KR)}function ZR(t,e,n){if(!s6(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yv(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function Vf(t,e,n){if((e=Ye(e))instanceof uu)return e._internalPath;if("string"==typeof e)return wv(t,e);throw bv("Field path arguments must be of type string or ",t,!1,void 0,n)}const ACe=new RegExp("[~\\*/\\[\\]]");function wv(t,e,n){if(e.search(ACe)>=0)throw bv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw bv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new x(E.INVALID_ARGUMENT,a+t+l)}function o6(t,e){return t.some(n=>n.isEqual(e))}class JR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xCe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ev("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class xCe extends JR{data(){return super.data()}}function Ev(t,e){return"string"==typeof e?wv(t,e):e instanceof uu?e._internalPath:e._delegate._internalPath}function a6(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new x(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e1{}class MCe extends e1{}function RCe(t,e,...n){let r=[];e instanceof e1&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof hu).length,o=i.filter(a=>a instanceof Bf).length;if(s>1||s>0&&o>0)throw new x(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bf extends MCe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=this._parse(e);return d6(e._query,n),new Mn(e.firestore,e.converter,sM(e._query,n))}_parse(e){const n=du(e.firestore);return function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new x(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){u6(u,c);const h=[];for(const f of u)h.push(c6(a,i,f));d={arrayValue:{values:h}}}else d=c6(a,i,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||u6(u,c),d=function r6(t,e,n,r=!1){return Qa(n,t.ya(r?4:3,e))}(o,"where",u,"in"===c||"not-in"===c);return be.create(l,c,d)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function kCe(t,e,n){const r=e,i=Ev("where",t);return Bf._create(i,r,n)}class hu extends e1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:$e.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)d6(s,a),s=sM(s,a)}(e._query,n),new Mn(e.firestore,e.converter,sM(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function c6(t,e,n){if("string"==typeof(n=Ye(n))){if(""===n)throw new x(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iM(e)&&-1!==n.indexOf("/"))throw new x(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!B.isDocumentKey(r))throw new x(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return La(t,new B(r))}if(n instanceof Ut)return La(t,n._key);throw new x(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yv(n)}.`)}function u6(t,e){if(!Array.isArray(t)||0===t.length)throw new x(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d6(t,e){if(e.isInequality()){const r=$y(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new x(E.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=rM(t);null!==s&&function h6(t,e,n){if(!n.isEqual(e))throw new x(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}(0,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new x(E.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NCe{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return po(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new YR(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const n=go(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);q(Dq(r));const i=new Fa(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(n)||Lt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function n1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fu extends JR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ev("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Tv extends fu{data(e={}){return super.data(e)}}class pu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tv(this._firestore,this._userDataWriter,r.key,r,new Xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Tv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Xa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Tv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Xa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:PCe(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PCe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function FCe(t){t=Ie(t,Ut);const e=Ie(t.firestore,ht);return function VW(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(m(function*(){return function(i,s,o,a,l){const c=new pv({next:d=>{s.enqueueAndForget(()=>cR(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new x(E.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new x(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new hR(zc(o.path),c,{includeMetadataChanges:!0,Ku:!0});return aR(i,u)}(yield cu(t),t.asyncQueue,e,n,r)})),r.promise}(Gt(e),t._key).then(n=>r1(e,t,n))}class To extends NCe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function LCe(t){t=Ie(t,Mn);const e=Ie(t.firestore,ht),n=Gt(e),r=new To(e);return a6(t._query),function BW(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(m(function*(){return function(i,s,o,a,l){const c=new pv({next:d=>{s.enqueueAndForget(()=>cR(i,u)),d.fromCache&&"server"===a.source?l.reject(new x(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new hR(o,c,{includeMetadataChanges:!0,Ku:!0});return aR(i,u)}(yield cu(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new pu(e,r,t,i))}function VCe(t,e,n){t=Ie(t,Ut);const r=Ie(t.firestore,ht),i=n1(t.converter,e,n);return Uf(r,[QR(du(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,mt.none())])}function BCe(t,e,n,...r){t=Ie(t,Ut);const i=Ie(t.firestore,ht),s=du(i);let o;return o="string"==typeof(e=Ye(e))||e instanceof uu?function n6(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[Vf(e,r,n)],l=[i];if(s.length%2!=0)throw new x(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Vf(e,s[h])),l.push(s[h+1]);const c=[],u=xn.empty();for(let h=a.length-1;h>=0;--h)if(!o6(c,a[h])){const f=a[h];let p=l[h];p=Ye(p);const g=o.da(f);if(p instanceof Lf)c.push(f);else{const _=Qa(p,g);null!=_&&(c.push(f),u.set(f,_))}}const d=new mr(c);return new ZW(u,d,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function t6(t,e,n,r){const i=t.ya(1,e,n);ZR("Data must be an object, but it was:",i,r);const s=[],o=xn.empty();po(r,(l,c)=>{const u=wv(e,l,n);c=Ye(c);const d=i.da(u);if(c instanceof Lf)s.push(u);else{const h=Qa(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new mr(s);return new ZW(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),Uf(i,[o.toMutation(t._key,mt.exists(!0))])}function UCe(t){return Uf(Ie(t.firestore,ht),[new Kc(t._key,mt.none())])}function jCe(t,e){const n=Ie(t.firestore,ht),r=qW(t),i=n1(t.converter,e);return Uf(n,[QR(du(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function Uf(t,e){return function(n,r){const i=new Jt;return n.asyncQueue.enqueueAndForget(m(function*(){return function UEe(t,e,n){return _R.apply(this,arguments)}(yield function zR(t){return mv(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(Gt(t),e)}function r1(t,e,n){const r=n.docs.get(e._key),i=new To(t);return new fu(t,i,e._key,r,new Xa(n.hasPendingWrites,n.fromCache),e.converter)}!function(t,e=!0){Vc=no,Bn(new Cn("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new ht(new gwe(n.getProvider("auth-internal")),new ywe(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new x(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),lt(eG,"3.13.0",t),lt(eG,"3.13.0","esm2017")}();var tIe={includeMetadataChanges:!1};function s1(t,e){return void 0===e&&(e=tIe),new He(function(n){var r=function $Ce(t,...e){var n,r,i;t=Ye(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||WR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(WR(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(t instanceof Ut)c=Ie(t.firestore,ht),u=zc(t._key.path),l={next:d=>{e[o]&&e[o](r1(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ie(t,Mn);c=Ie(d.firestore,ht),u=d._query;const h=new To(c);l={next:f=>{e[o]&&e[o](new pu(c,h,d,f))},error:e[o+1],complete:e[o+2]},a6(t._query)}return function(d,h,f,p){const g=new pv(p),_=new hR(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return aR(yield cu(d),_)})),()=>{g.Dc(),d.asyncQueue.enqueueAndForget(m(function*(){return cR(yield cu(d),_)}))}}(Gt(c),u,a,l)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}var m6=["added","modified","removed"],_6=function(){return Ew(Ud(void 0),function eIe(){return Dt((t,e)=>{let n,r=!1;t.subscribe(ft(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}())},a1=function(t,e){return JSON.stringify(t.metadata)===JSON.stringify(e.metadata)};function l1(t,e){return void 0===e&&(e={}),s1(t,{includeMetadataChanges:!0}).pipe(_6(),ye(function(n){var r=n[0],i=n[1],s=i.docChanges();return r&&!a1(r,i)&&i.docs.forEach(function(o,a){var l=s.find(function(u){return WW(u.doc.ref,o.ref)});if(l){if(a1(l.doc,o))return}else{var c=r?.docs.find(function(u){return WW(u.ref,o.ref)});if(c&&a1(c,o))return}s.push({oldIndex:a,newIndex:a,type:"modified",doc:o})}),s}),function(t){return rn(function(e){for(var n=!1,r=0;r<e.length;r++)if(t&&t.indexOf(e[r].type)>=0){n=!0;break}return n})}(e.events||m6),Ew(_6(),rn(function(t){return t[1].length>0||void 0===t[0]}),ye(function(t){return t[1]})))}function lIe(t,e){return void 0===e&&(e={}),function aIe(t){return s1(t,{includeMetadataChanges:!0}).pipe(ye(function(e){return e.docs}))}(t).pipe(ye(function(n){return n.map(function(r){return function g6(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class Av{constructor(e){return e}}const y6="firestore",c1=new k("angularfire2.firestore-instances");function dIe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Av(r)}}const hIe={provide:class cIe{constructor(){return x_(y6)}},deps:[[new Yt,c1]]},fIe={provide:Av,useFactory:function uIe(t,e){const n=A_(y6,t,e);return n&&new Av(n)},deps:[[new Yt,c1],Ta]};let pIe=(()=>{class t{constructor(){lt("angularfire",mh.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[fIe,hIe]}),t})();function gIe(t,...e){return{ngModule:pIe,providers:[{provide:c1,useFactory:dIe(t),multi:!0,deps:[de,wt,M_,R_,[new Yt,ex],[new Yt,B_],...e]}]}}const mIe=At(l1,!0),Nr=At(lIe,!0),yr=At(jCe,!0),Ee=At(_Ce,!0),_Ie=At(UCe,!0),ui=At(qW,!0),xv=At(FCe,!0),Za=At(LCe,!0),yIe=At(wCe,!0),vr=At(RCe,!0),Mv=At(VCe,!0),_t=At(BCe,!0),gn=At(kCe,!0);var Rv,wIe=new Uint8Array(16);function bIe(){if(!Rv&&!(Rv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rv(wIe)}const EIe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Rn=[],u1=0;u1<256;++u1)Rn.push((u1+256).toString(16).substr(1));const TIe=function DIe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Rn[t[e+0]]+Rn[t[e+1]]+Rn[t[e+2]]+Rn[t[e+3]]+"-"+Rn[t[e+4]]+Rn[t[e+5]]+"-"+Rn[t[e+6]]+Rn[t[e+7]]+"-"+Rn[t[e+8]]+Rn[t[e+9]]+"-"+Rn[t[e+10]]+Rn[t[e+11]]+Rn[t[e+12]]+Rn[t[e+13]]+Rn[t[e+14]]+Rn[t[e+15]]).toLowerCase();if(!function CIe(t){return"string"==typeof t&&EIe.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},AIe=function SIe(t,e,n){var r=(t=t||{}).random||(t.rng||bIe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return TIe(r)};let xIe=(()=>{var t;class e{constructor(){this.sobrestropas=[[{Nombre:"Guerrero",clase:"Guerrero",BP:30,ATK:6,DEF:[2],VEL:3,MOV:3,PVMAX:200,PMMAX:20,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"Paladin",clase:"Paladin",BP:30,ATK:4,DEF:[5],VEL:2,MOV:3,PVMAX:250,PMMAX:20,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"Arquero",clase:"Arquero",BP:40,ATK:3,DEF:[1],VEL:5,MOV:4,PVMAX:150,PMMAX:40,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"picaro",clase:"picaro",BP:40,ATK:3,DEF:[1],VEL:6,MOV:4,PVMAX:125,PMMAX:40,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"caballero",clase:"caballero",BP:50,ATK:6,DEF:[4],VEL:3,MOV:6,PVMAX:250,PMMAX:10,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"heal",clase:"heal",BP:50,ATK:2,DEF:[0],VEL:3,MOV:3,PVMAX:125,PMMAX:60,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{Nombre:"Sorcerer",clase:"Sorcerer",BP:50,ATK:2,DEF:[0],VEL:3,MOV:3,PVMAX:125,PMMAX:60,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]}],[[{tipo:"Arma",nombre:"palo",ATK:1},{tipo:"Arma",nombre:"espada",ATK:3},{tipo:"Arma",nombre:"lanza",ATK:2},{tipo:"Arma",nombre:"arco",ATK:2},{tipo:"Arma",nombre:"daga",ATK:2},{tipo:"Arma",nombre:"ballesta",ATK:4},{tipo:"Arma",nombre:"vara",PMMAX:20},{tipo:"Arma",nombre:"LanzaC",ATK:4}],[{tipo:"Armadura",nombre:"cuero"},{tipo:"Armadura",nombre:"ligera"},{tipo:"Armadura",nombre:"media"},{tipo:"Armadura",nombre:"pesada"},{tipo:"Armadura",nombre:"completa"}],[{tipo:"Item",nombre:"Pocion PV peque\xf1a"},{tipo:"Item",nombre:"Pocion mp peque\xf1a"}],[{tipo:"Item",nombre:"UPDEF"},{tipo:"Item",nombre:"UPATK"},{tipo:"Item",nombre:"UPVMAXEL"},{tipo:"Item",nombre:"UPMMAXOV"}]],[[{tipo:"Cuerpo",nombre:"Carga"},{tipo:"Cuerpo",nombre:"Da\xf1o"},{tipo:"Cuerpo",nombre:"rompedef"},{tipo:"Cuerpo",nombre:"taunt"}],[{tipo:"distancia",nombre:"alcance"},{tipo:"distancia",nombre:"Da\xf1o"},{tipo:"distancia",nombre:"critico"},{tipo:"distancia",nombre:"untaunt"}],[{tipo:"sorcer",nombre:"fuego"},{tipo:"sorcer",nombre:"rayo"},{tipo:"sorcer",nombre:"hielo"},{tipo:"sorcer",nombre:"confusion"},{tipo:"sorcer",nombre:"mute"}],[{tipo:"heal",nombre:"Cura"},{tipo:"heal",nombre:"escudo"},{tipo:"heal",nombre:"Movimiento"},{tipo:"heal",nombre:"velocidad"},{tipo:"heal",nombre:"quitardebuff"}],[{tipo:"picaro",nombre:"untaunt"},{tipo:"picaro",nombre:"ocultarse"},{tipo:"picaro",nombre:"critico"},{tipo:"picaro",nombre:"sangrante"}]]]}sobres(r){var i=0,s=0,o=[];const a=this.sobrestropas;if("Initial"===r)for(let l=0;l<8;l++)switch(l){case 0:s=100*Math.random(),i=this.Option7({op0:40,op1:55,op2:70,op3:80,op4:90,op5:95},s),o.push(a[0][i]);break;case 1:s=100*Math.random(),i=this.Option7({op0:20,op1:40,op2:60,op3:75,op4:90,op5:95},s),o.push(a[0][i]);break;case 2:i=this.Option7({op0:5,op1:10,op2:25,op3:40,op4:60,op5:80},s),o.push(a[0][i]);break;case 3:{s=100*Math.random(),i=this.Option4({op0:10,op1:20,op2:70},s);const u=a[1][i];switch(s=100*Math.random(),++i){case 1:i=this.Option8({op0:15,op1:30,op2:45,op3:60,op4:70,op5:80,op6:90},s);break;case 2:i=this.Option5({op0:40,op1:70,op2:85,op3:95},s);break;case 3:i=this.Option2({op0:70,op1:30},s);break;case 4:i=this.Option4({op0:40,op1:60,op2:70},s)}o.push(u[i]);break}case 4:{s=100*Math.random(),i=this.Option4({op0:40,op1:50,op2:80},s);const u=a[1][i];switch(s=100*Math.random(),++i){case 1:i=this.Option8({op0:15,op1:30,op2:45,op3:60,op4:70,op5:80,op6:90},s);break;case 2:i=this.Option5({op0:40,op1:70,op2:85,op3:95},s);break;case 3:i=this.Option2({op0:70,op1:30},s);break;case 4:i=this.Option4({op0:40,op1:60,op2:70},s)}o.push(u[i]);break}case 5:{s=100*Math.random(),i=this.Option4({op0:40,op1:50,op2:80},s);const u=a[1][i];switch(s=100*Math.random(),++i){case 1:i=this.Option8({op0:15,op1:30,op2:45,op3:60,op4:70,op5:80,op6:90},s);break;case 2:i=this.Option5({op0:40,op1:70,op2:85,op3:95},s);break;case 3:i=this.Option2({op0:70,op1:30},s);break;case 4:i=this.Option4({op0:40,op1:60,op2:70},s)}o.push(u[i]);break}case 6:{s=100*Math.random(),i=this.Option5({op0:35,op1:70,op2:80,op3:90},s);const u=a[2][i];switch(s=100*Math.random(),++i){case 1:case 2:i=this.Option4({op0:35,op1:60,op2:80},s);break;case 3:i=this.Option5({op0:25,op1:50,op2:75,op3:90},s);break;case 4:i=this.Option5({op0:35,op1:60,op2:75,op3:90},s);break;case 5:i=this.Option4({op0:10,op1:60,op2:90},s)}o.push(u[i]);break}case 7:{s=100*Math.random(),i=this.Option5({op0:10,op1:20,op2:50,op3:80},s);const u=a[2][i];switch(s=100*Math.random(),++i){case 1:case 2:i=this.Option4({op0:35,op1:60,op2:80},s);break;case 3:i=this.Option5({op0:25,op1:50,op2:75,op3:90},s);break;case 4:i=this.Option5({op0:35,op1:60,op2:75,op3:90},s);break;case 5:i=this.Option4({op0:10,op1:60,op2:90},s)}o.push(u[i]);break}}return o}Option8(r,i){let s=0;return i<r.op0&&(s=0),i>=r.op0&&i<r.op1&&(s=1),i>=r.op1&&i<r.op2&&(s=2),i>=r.op2&&i<r.op3&&(s=3),i>=r.op3&&i<r.op4&&(s=4),i>=r.op5&&i<r.op6&&(s=5),i>=r.op6&&i<r.op7&&(s=6),i>=r.op7&&(s=7),s}Option7(r,i){let s=0;return i<r.op0&&(s=0),i>=r.op0&&i<r.op1&&(s=1),i>=r.op1&&i<r.op2&&(s=2),i>=r.op2&&i<r.op3&&(s=3),i>=r.op3&&i<r.op4&&(s=4),i>=r.op4&&i<r.op5&&(s=5),i>=r.op5&&(s=6),s}Option5(r,i){let s=0;return i<r.op0&&(s=0),i>=r.op0&&i<r.op1&&(s=1),i>=r.op1&&i<r.op2&&(s=2),i>=r.op2&&i<r.op3&&(s=3),i>=r.op3&&(s=4),s}Option4(r,i){var s=0;return i<r.op0&&(s=0),i>=r.op0&&i<r.op1&&(s=1),i>=r.op1&&i<r.op2&&(s=2),i>=r.op2&&(s=3),s}Option2(r,i){let s=0;return i<r.op0&&(s=0),i>=r.op0&&(s=1),s}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Gn=(()=>{var t;class e{constructor(r,i){this.sto=r,this.sobre=i}createinit(r){var i=this;return m(function*(){let s=Ee(i.sto,r);const o=yield yr(s,{Gamesplayed:0,gamesWon:0,gamesLose:0}),a=[{ID:0,tipo:"Initial"},{Nombre:"Heroe",clase:"Heroe",BP:40,ATK:4,DEF:[2],VEL:3,MOV:3,PV:300,PM:60,Arma:"noArma",Armadura:"noArmadura",Item:[],Skill:[]},{tipo:"Arma",nombre:"palo",equipada:"0"},{tipo:"Item",nombre:"Pocion PV peque\xf1a",equipada:"0"},{tipo:"Cuerpo",nombre:"Carga",equipada:"0"}];s=Ee(i.sto,r+"/"+o.id+"/sobres"),yr(s,a[0]),yr(s,a[0]),s=Ee(i.sto,r+"/"+o.id,"tropas"),yr(s,a[1]),s=Ee(i.sto,r+"/"+o.id,"equipo"),yr(s,a[2]),yr(s,a[3]),s=Ee(i.sto,r+"/"+o.id,"Habilidades"),yr(s,a[4]),yr(Ee(i.sto,"Users"),{Gamesplayed:0,gamesWon:0,gameslose:0,Helo:0,email:r,Estado:!1,chats:[],chatsp:[],chatsj:[]})})()}getdocID(r){var i=this;return m(function*(){const s=vr(Ee(i.sto,r)),o=yield Za(s);return o&&localStorage.setItem("doc",o.docs[0].id),o.docs[0].id})()}getUsers(){const r=Ee(this.sto,"Users");return Nr(r,{idField:"id"})}getSobres(){const r=Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"sobres");return Nr(r,{idField:"id"})}getropas(){const r=Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"tropas");return Nr(r,{idField:"id"})}getitems(){const r=vr(Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"equipo"),gn("equipada","==","0"));return Nr(r,{idField:"id"})}getSkills(){const r=vr(Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"Habilidades"),gn("equipada","==","0"));return Nr(r,{idField:"id"})}getsolicitudes(){return Nr(Ee(this.sto,"solicitudes"),{idField:"id"})}getactivetroops(){const r=vr(Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"tropas"),gn("activa","==",!0));return Nr(r,{idField:"id"})}changuetroopact(r,i){var s=this;return m(function*(){const o=Ee(s.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"tropas"),a=ui(o,r);i?yield _t(a,{activa:!1}):yield _t(a,{activa:!0})})()}openSobre(r){var i="";const s=localStorage.getItem("email")+"/"+localStorage.getItem("doc")+"/sobres",o=Ee(this.sto,s),a=ui(o,r.id);if("Initial"===r.tipo){const l=this.sobre.sobres("Initial");for(let c=0;c<8;c++){c<3&&(i="tropas"),c>=3&&c<6&&(i="equipo"),c>=6&&(i="Habilidades");const u=Ee(this.sto,localStorage.getItem("email"),localStorage.getItem("doc"),i);c>=3&&(l[c].equipada="0"),yr(u,l[c]),_Ie(a)}}}setStatus(r){var i=this;return m(function*(){const s=vr(Ee(i.sto,"Users"),gn("email","==",localStorage.getItem("email")));yield Za(s).then(o=>{const a=ui(i.sto,"Users",o.docs[0].id);_t(a,r?{Estado:!0}:{Estado:!1})})})()}getdocbyID(r,i,s,o){return ui(this.sto,i,s,o,r)}getsolbyID(r){return ui(this.sto,"solicitudes",r)}setdocByID(r,i,s,o,a){return m(function*(){switch(o){case"Arma":"equipar"==a?(yield _t(r,{equipada:i.id}),yield _t(i,{Arma:s})):(yield _t(r,{equipada:"0"}),yield _t(i,{Arma:"noArma"}));break;case"Armadura":"equipar"==a?(yield _t(r,{equipada:i.id}),yield _t(i,{Armadura:s})):(yield _t(r,{equipada:"0"}),yield _t(i,{Armadura:"noArma"}));break;case"Item":if("equipar"==a){let l=[];l=(yield xv(i)).get("Item"),l.push(s),console.log(l),yield _t(i,{Item:l}),yield _t(r,{equipada:i.id})}else{let l=[];l=(yield xv(i)).get("Item");let c=s;const u=l.filter(d=>d!=c||(c=void 0,!1));console.log(u),yield _t(i,{Item:u}),yield _t(r,{equipada:"0"})}break;default:if("equipar"==a){let l=[];l=(yield xv(i)).get("Skill"),l.push(s),yield _t(i,{Skill:l}),yield _t(r,{equipada:i.id})}else{let l=[],c=s;l=(yield xv(i)).get("Skill");const u=l.filter(d=>d!=c||(c=void 0,!1));yield _t(i,{Skill:u}),yield _t(r,{equipada:"0"})}}})()}getequipID(r,i){var s=this;return m(function*(){const o=vr(Ee(s.sto,localStorage.getItem("email"),localStorage.getItem("doc"),"equipo"),gn("equipada","==",r),gn("nombre","==",i)),a=yield Za(o);if(a.docs[0])return a.docs[0].id})()}getchanguesol(){const r=vr(Ee(this.sto,"solicitudes"),gn("Solicitado","==",localStorage.getItem("email")),gn("estado","==","Aceptado"));return mIe(r)}getstatusplayer(r){var i=this;return m(function*(){let s=!1;const o=vr(Ee(i.sto,"Users"),gn("email","==",r)),a=yield Za(o);return a&&(s=a.docs[0].get("Estado")),s})()}adddocwar(r,i){const s=ui(this.sto,"Combates",r);Mv(s,{jugador1:i.jugador1,jugador2:i.jugador2,mapa:i.mapa})}addtroops(r,i,s){var o;o="jugador1"==i?"tropas1":"tropas2",r.forEach(a=>yr(Ee(this.sto,"Combates",s,o),{tropa:a}))}snapsol2(r){const i=Ee(this.sto,"solicitudes"),s=vr(i,gn("Solicitante","==",r),gn("Status.Estado","==","Aceptado"));return Nr(s,{idField:"id"})}snapsol1(r){const i=Ee(this.sto,"solicitudes"),s=vr(i,gn("Solicitante","==",r),gn("Status.Estado","==","WAR"));return Nr(s,{idField:"id"})}snapsol3(r){const i=Ee(this.sto,"solicitudes"),s=vr(i,gn("Solicitado","==",r),gn("Status.Estado","==","WAR"));return Nr(s,{idField:"id"})}Initwar1(r,i,s,o){var a=this;Mv(ui(this.sto,"Combates",s),{data:i}).then(()=>{console.log("Imbecil"),r.forEach(l=>{l.player=o,this.addtroopwar(l,s)})}).catch(l=>console.log(l)),this.gettab(i.mapa).subscribe(l=>{l.forEach(function(){var c=m(function*(u){yield yr(Ee(a.sto,"Combates",s,"board"),u).then(()=>{})});return function(u){return c.apply(this,arguments)}}())})}Initwar2(r,i,s){r.forEach(o=>{o.player=s,this.addtroopwar(o,i)})}addtroopwar(r,i){Mv(ui(this.sto,"Combates",i,"tropas",r.id),r)}changuesol(r,i,s){return m(function*(){yield _t(r,{Status:i}).then(()=>{s&&_t(r,{battle:s})})})()}setchat(r,i,s){var o=this;return m(function*(){const a=vr(Ee(o.sto,"Users"),gn("email","==",r)),l=vr(Ee(o.sto,"Users"),gn("email","==",i));console.log("fase1");const c=yield Za(a),u=yield Za(l);let d,h;console.log("fase2"),d=c.docs[0].get("chatsp")?{chats:c.docs[0].get("chats"),chatsp:c.docs[0].get("chatsp"),chatsj:c.docs[0].get("chatsj")}:{chats:[],chatsp:[],chatsj:[]},console.log("fase3"),h=u.docs[0].get("chatsp")?{chats:u.docs[0].get("chats"),chatsp:u.docs[0].get("chatsp"),chatsj:u.docs[0].get("chatsj")}:{chats:[],chatsp:[],chatsj:[]},console.log("fase4"),console.log(d),console.log(h),d.chatsj.push("jug1"),d.chats.push(s),d.chatsp.push(i),h.chatsj.push("jug2"),h.chats.push(s),h.chatsp.push(r),console.log(d),console.log(h),console.log("fase5");const f=ui(o.sto,"Users",c.docs[0].id),p=ui(o.sto,"Users",u.docs[0].id);yield _t(f,{chatsj:d.chatsj,chats:d.chats,chatsp:d.chatsp}),yield _t(p,{chatsj:h.chatsj,chats:h.chats,chatsp:h.chatsp}),console.log("fase6")})()}getfilas(r,i){var s=this;return m(function*(){const o=Ee(s.sto,"boards","TABLEROBASE",i),a=vr(o,gn("id","==",r)),l=yield Za(a);if(l)return l.docs[0].get("cell")})()}creartab(r,i,s){const o=Ee(this.sto,"Combats",r,"board");yr(o,{id:s,tablero:i}),console.log("tablero creado")}gettab(r){const i=Ee(this.sto,"boards","TABLEROBASE",r);return Nr(i,{idField:"docid"})}gettabwar(r){const i=Ee(this.sto,"Combates",r,"board");return Nr(i,{idField:"docid"})}clave(){return"CHA"+AIe().replace(/-/g,"")}enviartropa(r,i,s){yr(Ee(this.sto,"Combats",s,i),r)}getropaswar(r,i){return Nr(Ee(this.sto,"combats",i,r))}changemap(r,i){const s=Ee(this.sto,"battle",r),o=ui(s,i.docid);Mv(o,i)}enviasol(r){yr(Ee(this.sto,"solicitudes"),r)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(Av),C(xIe))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function MIe(t,e){if(1&t){const n=En();D(0,"div")(1,"div"),at(2,"img",1),D(3,"p"),V(4),D(5,"button",2),oe("click",function(){const s=st(n).$implicit;return ot(Q().Aceptar(s))}),V(6,"Aceptar"),I()(),D(7,"p"),V(8),I()()()}if(2&t){const n=e.$implicit,r=Q();N(2),K("src",r.geticon(n.mapa),Tr),N(2),Zt("",n.Solicitado," ha aceptado "),N(4),bt(r.time)}}let RIe=(()=>{var t;class e{constructor(r,i,s,o){this.sto=r,this.dialogref=i,this.data=s,this.rout=o,this.time=60,this.snapwar=[],this.solicitud=this.data.solicitud,this.activas=this.data.activas,this.BP=this.data.bp}ngOnInit(){this.sto.snapsol1(localStorage.getItem("email")).subscribe(r=>this.snapwar=r),setInterval(()=>{this.snapwar.length>0&&(localStorage.setItem("docwar",this.snapwar[0].battle),this.dialogref.close("WARR"),this.rout.navigate(["game"]))},1e3),setInterval(()=>this.countdownd(),1e3)}countdownd(){this.time>0?this.time--:this.dialogref.close("fin de cuenta atras")}geticon(r){return Pi[r]}Aceptar(r){this.sto.changuesol(this.sto.getsolbyID(r.id),{Estado:"WAR",Acept1:!0,Acept2:!0}),this.sto.Initwar2(this.activas,this.solicitud[0].battle,localStorage.getItem("email"))}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn),w(l_),w(c_),w(sn))},t.\u0275cmp=Tt({type:t,selectors:[["app-popup2"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["alt","x",1,"obj",3,"src"],[3,"click"]],template:function(r,i){1&r&&we(0,MIe,9,3,"div",0),2&r&&K("ngForOf",i.solicitud)},dependencies:[zr]}),e})();function kIe(t,e){if(1&t){const n=En();D(0,"div",2),at(1,"img",3),D(2,"button",4),oe("click",function(){const s=st(n).$implicit;return ot(Q().opensobre(s))}),V(3,"Abrir"),I()()}if(2&t){const n=e.$implicit,r=Q();N(1),K("src",r.geticon(n.tipo),Tr)}}let NIe=(()=>{var t;class e{constructor(r){this.sto=r,this.sobres=[]}ngOnInit(){this.sto.getSobres().subscribe(r=>this.sobres=r)}geticon(r){return Pi[r]}opensobre(r){this.sto.openSobre(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-sobres"]],decls:3,vars:1,consts:[[1,"titulo"],["class","obj",4,"ngFor","ngForOf"],[1,"obj"],["alt","item.id",1,"imagen-personaje",3,"src"],[1,"buttontable",3,"click"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1,"Sobres"),I(),we(2,kIe,4,1,"div",1)),2&r&&(N(2),K("ngForOf",i.sobres))},dependencies:[zr]}),e})();function OIe(t,e){if(1&t&&(D(0,"span",6),V(1),I()),2&t){const n=Q().$implicit;N(1),bt(n.Nombre)}}function PIe(t,e){if(1&t){const n=En();D(0,"div",3),oe("click",function(){const s=st(n).$implicit;return ot(Q().emision(s))})("mouseenter",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!0))})("mouseleave",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!1))}),at(1,"img",4),we(2,OIe,2,1,"span",5),I()}if(2&t){const n=e.$implicit,r=e.index,i=Q();N(1),K("src",i.geticon(n.clase),Tr)("alt",r),N(1),K("ngIf",i.showTooltipForItem(n))}}let FIe=(()=>{var t;class e{constructor(r){this.sto=r,this.tropas=[],this.tropaselect=new We}ngOnInit(){this.sto.getropas().subscribe(r=>this.tropas=r)}emision(r){this.tropaselect.emit(r)}geticon(r){return Pi[r]}onMouseEnterLeave(r,i){this.currentItemTooltip=i?r:null}showTooltipForItem(r){return this.currentItemTooltip===r}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-tropas"]],outputs:{tropaselect:"tropaselect"},decls:4,vars:1,consts:[[1,"titulo"],[1,"columnobj"],["class","obj",3,"click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"obj",3,"click","mouseenter","mouseleave"],[1,"imagen-personaje",3,"src","alt"],["class","tooltip",4,"ngIf"],[1,"tooltip"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1,"tropas"),I(),D(2,"div",1),we(3,PIe,3,3,"div",2),I()),2&r&&(N(3),K("ngForOf",i.tropas))},dependencies:[zr,Mi]}),e})();function LIe(t,e){if(1&t){const n=En();D(0,"button",8),oe("click",function(){st(n);const i=Q().$implicit;return ot(Q().equipar(i))}),V(1,"EQUIPAR"),I()}}function VIe(t,e){if(1&t){const n=En();D(0,"button",8),oe("click",function(){st(n);const i=Q().$implicit;return ot(Q().equipar(i))}),V(1,"EQUIPAR"),I()}}function BIe(t,e){if(1&t){const n=En();D(0,"button",8),oe("click",function(){st(n);const i=Q().$implicit;return ot(Q().equipar(i))}),V(1,"A\xd1ADIR"),I()}}function UIe(t,e){if(1&t&&(D(0,"span",9),V(1),I()),2&t){const n=Q(2);N(1),bt(n.currentItemTooltip.nombre)}}function jIe(t,e){if(1&t){const n=En();D(0,"div",3),oe("mouseenter",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!0))})("mouseleave",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!1))}),D(1,"div",4)(2,"img",5),oe("mouseenter",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!0))})("mouseleave",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!1))}),I(),we(3,LIe,2,0,"button",6),we(4,VIe,2,0,"button",6),we(5,BIe,2,0,"button",6),we(6,UIe,2,1,"span",7),I()()}if(2&t){const n=e.$implicit,r=Q();N(2),K("src",r.geticon(n.nombre),Tr),N(1),K("ngIf",r.tropa&&r.ifarma()&&"Arma"==n.tipo),N(1),K("ngIf",r.tropa&&r.ifarmadura()&&"Armadura"==n.tipo),N(1),K("ngIf",r.tropa&&r.ifinventario()&&"Item"==n.tipo),N(1),K("ngIf",r.showTooltipForItem(n))}}let $Ie=(()=>{var t;class e{constructor(r,i){this.sto=r,this.ic=i,this.items=[]}ngOnInit(){this.sto.getitems().subscribe(r=>this.items=r)}geticon(r){return Pi[r]}onMouseEnterLeave(r,i){this.currentItemTooltip=i?r:null}showTooltipForItem(r){return this.currentItemTooltip===r}ifarma(){return"noArma"==this.tropa.Arma}ifarmadura(){return"noArmadura"==this.tropa.Armadura}ifinventario(){return this.tropa.Item.length<4}equipar(r){const s=localStorage.getItem("email"),o=localStorage.getItem("doc"),a=this.sto.getdocbyID(this.tropa.id,s,o,"tropas"),l=this.sto.getdocbyID(r.id,s,o,"equipo");this.sto.setdocByID(l,a,r.nombre,r.tipo,"0"==r.equipada?"equipar":"desequipar"),this.equipartropa(r)}equipartropa(r){switch(r.tipo){case"Arma":this.tropa.Arma=r.nombre;break;case"Armadura":this.tropa.Armadura=r.nombre;break;case"Item":this.tropa.Item.push(r.nombre)}}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn),w(Iue))},t.\u0275cmp=Tt({type:t,selectors:[["app-equipo"]],inputs:{tropa:"tropa"},decls:4,vars:1,consts:[[1,"titulo"],[1,"columnobj"],[3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[3,"mouseenter","mouseleave"],[1,"obj"],["alt","item.id",1,"imagen-personaje",3,"src","mouseenter","mouseleave"],["class","buttont",3,"click",4,"ngIf"],["class","tooltip",4,"ngIf"],[1,"buttont",3,"click"],[1,"tooltip"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1,"items"),I(),D(2,"div",1),we(3,jIe,7,5,"div",2),I()),2&r&&(N(3),K("ngForOf",i.items))},dependencies:[zr,Mi]}),e})();function HIe(t,e){if(1&t&&(D(0,"span",6),V(1),I()),2&t){const n=Q(2);N(1),bt(n.currentItemTooltip.nombre)}}function zIe(t,e){if(1&t){const n=En();D(0,"div",3),oe("mouseenter",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!0))})("mouseleave",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!1))}),at(1,"img",4),we(2,HIe,2,1,"span",5),I()}if(2&t){const n=e.$implicit,r=Q();N(1),K("src",r.geticon(n.nombre),Tr)("alt",n.tipo),N(1),K("ngIf",r.showTooltipForItem(n))}}let GIe=(()=>{var t;class e{constructor(r){this.sto=r,this.skills=[]}ngOnInit(){this.sto.getSkills().subscribe(r=>this.skills=r)}geticon(r){return Pi[r]}onMouseEnterLeave(r,i){this.currentItemTooltip=i?r:null}showTooltipForItem(r){return this.currentItemTooltip===r}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"titulo"],[1,"columnobj"],["class","obj",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"obj",3,"mouseenter","mouseleave"],[1,"imagen-personaje",3,"src","alt"],["class","tooltip",4,"ngIf"],[1,"tooltip"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1,"skills"),I(),D(2,"div",1),we(3,zIe,3,3,"div",2),I()),2&r&&(N(3),K("ngForOf",i.skills))},dependencies:[zr,Mi]}),e})();function qIe(t,e){if(1&t&&(D(0,"span",6),V(1),I()),2&t){const n=Q().$implicit;N(1),bt(n.Nombre)}}function WIe(t,e){if(1&t){const n=En();D(0,"div",3),oe("click",function(){const s=st(n).$implicit;return ot(Q().emision(s))})("mouseenter",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!0))})("mouseleave",function(){const s=st(n).$implicit;return ot(Q().onMouseEnterLeave(s,!1))}),at(1,"img",4),we(2,qIe,2,1,"span",5),I()}if(2&t){const n=e.$implicit,r=e.index,i=Q();N(1),K("src",i.geticon(n.Nombre),Tr)("alt",n.Nombre+r),N(1),K("ngIf",i.showTooltipForItem(n))}}let KIe=(()=>{var t;class e{constructor(r){this.sto=r,this.activas=[],this.BP=0,this.tropaselect=new We}ngOnInit(){console.log(this.tropasactivas)}emision(r){this.tropaselect.emit(r)}getpointbattles(){var r=0;if(this.tropasactivas.length>0)for(let i of this.tropasactivas)r+=i.BP;return r}geticon(r){return Pi[r]}onMouseEnterLeave(r,i){this.currentItemTooltip=i?r:null}showTooltipForItem(r){return this.currentItemTooltip===r}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-activas"]],inputs:{tropasactivas:"tropasactivas"},outputs:{tropaselect:"tropaselect"},decls:4,vars:2,consts:[[1,"titulo"],[1,"columnobj"],["class","obj",3,"click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"obj",3,"click","mouseenter","mouseleave"],[1,"imagen-personaje",3,"src","alt"],["class","tooltip",4,"ngIf"],[1,"tooltip"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1),I(),D(2,"div",1),we(3,WIe,3,3,"div",2),I()),2&r&&(N(1),Zt("Activas ",i.getpointbattles()," Puntos"),N(2),K("ngForOf",i.tropasactivas))},dependencies:[zr,Mi]}),e})(),YIe=(()=>{var t;class e{constructor(r,i,s,o){this.sto=r,this.dialogref=i,this.data=s,this.rout=o,this.player="rafame097@gmail.com",this.time=60,this.mostrar=!0,this.activa=[],this.snapwar=[],this.playerON=!1,this.solicitud=this.data.solcicitud,this.sto.getactivetroops().subscribe(a=>this.activa=a)}ngOnInit(){this.sto.snapsol3(localStorage.getItem("email")).subscribe(r=>this.snapwar=r),setInterval(()=>{this.snapwar.length>0&&(this.dialogref.close("Warr"),this.rout.navigate(["game"]))},1e3),setInterval(()=>this.countdownd(),1e3)}countdownd(){this.time>0?this.time--:this.dialogref.close("fin de cuenta atras")}geticon(r){return Pi[r]}Aceptar(r){const i=this.sto.clave().substring(3);this.sto.changuesol(this.sto.getsolbyID(r.id),{Estado:"Aceptado",Acept2:!0,Acept1:!1},i),this.time=65;const s={jugador1:r.Solicitante,jugador2:r.Solicitante,mapa:r.mapa};localStorage.setItem("docwar",i),this.sto.Initwar1(this.activa,s,i,localStorage.getItem("email"))}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn),w(l_),w(c_),w(sn))},t.\u0275cmp=Tt({type:t,selectors:[["app-popup"]],decls:8,vars:4,consts:[["alt","mapa",1,"obj",3,"src"],[3,"click"]],template:function(r,i){1&r&&(D(0,"div"),at(1,"img",0),D(2,"p"),V(3),D(4,"button",1),oe("click",function(){return i.Aceptar(i.solicitud)}),V(5,"Aceptar"),I()(),D(6,"p"),V(7),I()()),2&r&&(N(1),K("src",i.geticon(i.solicitud.mapa),Tr),N(2),LE("",i.solicitud.Solicitante," ",i.solicitud.tiempo," "),N(4),bt(i.time))}}),e})();function QIe(t,e){1&t&&(D(0,"p"),V(1,"Player OFFline"),I())}function XIe(t,e){if(1&t){const n=En();D(0,"button",6),oe("click",function(){st(n);const i=Q(2).$implicit;return ot(Q().opensolictud(i))}),V(1,"Aceptar "),I()}}function ZIe(t,e){if(1&t&&(D(0,"div")(1,"p",4),V(2),I(),D(3,"p",4),V(4),I(),D(5,"p",4),V(6),I(),we(7,QIe,2,0,"p",3),we(8,XIe,2,0,"button",5),I()),2&t){const n=Q().$implicit;N(2),Zt(" ",n.Solicitante,""),N(2),Zt(" ",n.puntosBatalla,""),N(2),Zt(" ",n.tiempo,""),N(1),K("ngIf",!n.Status),N(1),K("ngIf",n.Status)}}function JIe(t,e){if(1&t&&(D(0,"div",2),we(1,ZIe,9,5,"div",3),I()),2&t){const n=e.$implicit,r=Q();N(1),K("ngIf",n.Solicitado==r.email)}}let e0e=(()=>{var t;class e{constructor(r,i){this.sto=r,this.diag=i,this.solicitudes=[],this.users=[],this.email=localStorage.getItem("email"),this.activas=[]}ngOnInit(){this.sto.getsolicitudes().subscribe(r=>{this.solicitudes=r.filter(i=>"Pendiente"==i.Status?.Estado)}),this.sto.getactivetroops().subscribe(r=>{this.activas=r})}opensolictud(r){this.diag.open(YIe,{width:"400px",height:"auto",disableClose:!0,data:{solcicitud:r,tropas:this.activas}})}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn),w(u_))},t.\u0275cmp=Tt({type:t,selectors:[["app-solicitudes"]],decls:3,vars:1,consts:[[1,"titulo"],["style","display: flex; justify-content: center;align-items: center; border: 2px solid gold;background-color: palegoldenrod;;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center","border","2px solid gold","background-color","palegoldenrod"],[4,"ngIf"],[2,"margin","4px"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1,"Solcicitudes"),I(),we(2,JIe,2,1,"div",1)),2&r&&(N(2),K("ngForOf",i.solicitudes))},dependencies:[zr,Mi]}),e})(),t0e=(()=>{var t;class e{constructor(r){this.sto=r}changueactiva(){this.sto.changuetroopact(this.tropa.id,this.tropa.activa),this.tropa.activa=!this.tropa.activa}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-trsinfo"]],inputs:{tropa:"tropa"},decls:21,vars:10,consts:[[1,"titulo"],[3,"click"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1),I(),D(2,"div")(3,"p"),V(4),I(),D(5,"p"),V(6),I(),D(7,"p"),V(8),I(),D(9,"p"),V(10),I(),D(11,"p"),V(12),I(),D(13,"p"),V(14),I(),D(15,"p"),V(16),I(),D(17,"p"),V(18),I(),D(19,"button",1),oe("click",function(){return i.changueactiva()}),V(20),I()()),2&r&&(N(1),bt(i.tropa.Nombre),N(3),Zt("Clase ",i.tropa.clase,""),N(2),Zt("BattlePoints ",i.tropa.BP,""),N(2),Zt(" FUE ",i.tropa.ATK,""),N(2),Zt("DEF ",i.tropa.DEF,""),N(2),Zt("VEL ",i.tropa.VEL,""),N(2),Zt("MOV ",i.tropa.MOV,""),N(2),Zt("PV",i.tropa.PV,""),N(2),Zt("PM:",i.tropa.PM,""),N(2),bt(i.tropa.activa?"Quitar":"Agregar"))}}),e})();function n0e(t,e){if(1&t){const n=En();D(0,"button",7),oe("click",function(){st(n);const i=Q();return ot(i.desequipar(i.tropa.Arma,"Arma"))}),V(1,"Quitar"),I()}}function r0e(t,e){if(1&t){const n=En();D(0,"button",7),oe("click",function(){st(n);const i=Q();return ot(i.desequipar(i.tropa.Armadura,"Armadura"))}),V(1,"Quitar"),I()}}function i0e(t,e){if(1&t){const n=En();D(0,"div",2),at(1,"img",3),D(2,"button",7),oe("click",function(){const s=st(n).$implicit;return ot(Q().desequipar(s,"Item"))}),V(3,"Quitar"),I()()}if(2&t){const n=e.index,r=Q();N(1),K("src",r.geticon(r.tropa.Item[n]),Tr)}}function s0e(t,e){if(1&t&&(D(0,"div",2),at(1,"img",3),I()),2&t){const n=e.index,r=Q();N(1),K("src",r.geticon(r.tropa.Skill[n]),Tr)}}let o0e=(()=>{var t;class e{constructor(r){this.sto=r}geticon(r){return Pi[r]}desequipar(r,i){let o;const a=localStorage.getItem("email"),l=localStorage.getItem("doc"),c=this.sto.getdocbyID(this.tropa.id,a,l,"tropas");this.sto.getequipID(this.tropa.id,r).then(u=>{u&&(o=this.sto.getdocbyID(u,a,l,"equipo"),this.sto.setdocByID(o,c,r,i,"desequipar"),this.dequipartropa(r,i))}).catch(u=>console.log(u))}dequipartropa(r,i){switch(i){case"Arma":this.tropa.Arma="noArma";break;case"Armadura":this.tropa.Armadura="noArmadura";break;case"Item":let s=r;this.tropa.Item=this.tropa.Item=this.tropa.Item.filter(o=>o!=s||(s=void 0,!1));break;default:s=r,this.tropa.Skill.filter(o=>o!=s||(s=void 0,!1))}}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-trsinv"]],inputs:{tropa:"tropa"},decls:22,vars:9,consts:[[1,"titulo"],[1,"columnobj",2,"justify-content","center"],[1,"obj"],[1,"imagen-personaje",3,"src"],["class","buttont",3,"click",4,"ngIf"],[1,"columnobj"],["class","obj",4,"ngFor","ngForOf"],[1,"buttont",3,"click"]],template:function(r,i){1&r&&(D(0,"h1",0),V(1),I(),D(2,"div",1)(3,"div",2),at(4,"img",3),we(5,n0e,2,0,"button",4),I(),D(6,"p"),V(7),I()(),D(8,"div",1)(9,"div",2),at(10,"img",3),we(11,r0e,2,0,"button",4),I(),D(12,"p"),V(13),I()(),D(14,"p",0),V(15,"Inventario"),I(),D(16,"div",5),we(17,i0e,4,1,"div",6),I(),D(18,"p",0),V(19," Skills"),I(),D(20,"div",5),we(21,s0e,2,1,"div",6),I()),2&r&&(N(1),Zt("Equipado ",i.tropa.Nombre,""),N(3),K("src",i.geticon(i.tropa.Arma),Tr),N(1),K("ngIf","noArma"!=i.tropa.Arma),N(2),bt(i.tropa.Arma),N(3),K("src",i.geticon(i.tropa.Armadura),Tr),N(1),K("ngIf","noArmadura"!=i.tropa.Armadura),N(2),bt(i.tropa.Armadura),N(4),K("ngForOf",i.tropa.Item),N(4),K("ngForOf",i.tropa.Skill))},dependencies:[zr,Mi]}),e})();const v6="@firebase/database";let d1="";class l0e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:uh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class c0e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return _s(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const b6=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l0e(e)}}catch{}return new c0e},Ja=b6("localStorage"),h1=b6("sessionStorage"),gu=new ma("@firebase/database"),E6=function(){let t=1;return function(){return t++}}(),C6=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,P(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new $ue;n.update(e);const r=n.digest();return d_.encodeByteArray(r)},jf=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jf.apply(null,r):e+="object"==typeof r?an(r):r,e+=" "}return e};let el=null,I6=!0;const mn=function(...t){if(!0===I6&&(I6=!1,null===el&&!0===h1.get("logging_enabled")&&function(t,e){P(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(gu.logLevel=Se.VERBOSE,el=gu.log.bind(gu),e&&h1.set("logging_enabled",!0)):"function"==typeof t?el=t:(el=null,h1.remove("logging_enabled"))}(!0)),el){const e=jf.apply(null,t);el(e)}},$f=function(t){return function(...e){mn(t,...e)}},f1=function(...t){const e="FIREBASE INTERNAL ERROR: "+jf(...t);gu.error(e)},Yi=function(...t){const e=`FIREBASE FATAL ERROR: ${jf(...t)}`;throw gu.error(e),new Error(e)},qn=function(...t){const e="FIREBASE WARNING: "+jf(...t);gu.warn(e)},kv=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},So="[MIN_NAME]",Os="[MAX_NAME]",tl=function(t,e){if(t===e)return 0;if(t===So||e===Os)return-1;if(e===So||t===Os)return 1;{const n=A6(t),r=A6(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},h0e=function(t,e){return t===e?0:t<e?-1:1},Hf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+an(e))},p1=function(t){if("object"!=typeof t||null===t)return an(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=an(e[r]),n+=":",n+=p1(t[e[r]]);return n+="}",n},T6=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function _n(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const S6=function(t){P(!kv(t),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},m0e=new RegExp("^-?(0*)\\d{1,10}$"),A6=function(t){if(m0e.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},mu=function(t){try{t()}catch(e){setTimeout(()=>{throw qn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zf=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class w0e{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class b0e{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qn(e)}}let Gf=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const N6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,F6="websocket",L6="long_polling";class m1{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ja.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ja.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function V6(t,e,n){let r;if(P("string"==typeof e,"typeof type must == string"),P("object"==typeof n,"typeof params must == object"),e===F6)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==L6)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function E0e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return _n(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class C0e{constructor(){this.counters_={}}incrementCounter(e,n=1){_s(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return xue(this.counters_)}}const _1={},y1={};function v1(t){const e=t.toString();return _1[e]||(_1[e]=new C0e),_1[e]}class D0e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&mu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ao{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$f(e),this.stats_=v1(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),V6(n,L6,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new D0e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new w1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&N6.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ao.forceAllow_=!0}static forceDisallow(){Ao.forceDisallow_=!0}static isAvailable(){return!(!Ao.forceAllow_&&(Ao.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=an(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F$(n),i=T6(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=an(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class w1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=E6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=w1.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Ov=null;typeof MozWebSocket<"u"?Ov=MozWebSocket:typeof WebSocket<"u"&&(Ov=WebSocket);let _u=(()=>{class t{constructor(n,r,i,s,o,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$f(this.connId),this.stats_=v1(r),this.connURL=t.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&N6.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),V6(n,F6,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ja.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Ov(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Ov&&!t.forceDisallow_}static previouslyFailed(){return Ja.isInMemoryStorage||!0===Ja.get("previous_websocket_failure")}markConnectionHealthy(){Ja.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=uh(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(P(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=an(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=T6(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),G6=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ao,_u]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=_u&&_u.isAvailable();let i=r&&!_u.previouslyFailed();if(n.webSocketOnly&&(r||qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_u];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class Z6{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$f("c:"+this.id+":"),this.transportManager_=new G6(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Hf("t",e),r=Hf("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Hf("t",e),r=Hf("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Hf("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?f1("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class J6{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class e5{constructor(e){this.allowedEvents_=e,this.listeners_={},P(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){P(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Pv extends e5{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!p0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Pv}getInitialEvent(e){return P("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ve{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ne(){return new Ve("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xo(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ve(t.pieces_,e)}function E1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function r5(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ve(e,0)}function yt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ve)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ve(n,0)}function me(t){return t.pieceNum_>=t.pieces_.length}function sr(t,e){const n=ge(t),r=ge(e);if(null===n)return e;if(n===r)return sr(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function C1(t,e){if(xo(t)!==xo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xo(t)>xo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class K0e{constructor(e,n){this.errorPrefix_=n,this.parts_=qf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=y_(this.parts_[r]);s5(this)}}function s5(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nl(t))}function nl(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class I1 extends e5{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new I1}getInitialEvent(e){return P("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Wf=1e3;let Lv,rl=(()=>{class t extends J6{constructor(n,r,i,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=$f("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");I1.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Pv.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(an(o)),P(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new fa,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),P(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),P(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&_s(n,"w")){const i=Ec(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=g_(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=g_(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),P(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+an(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):f1("Unrecognized action received from server: "+an(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){P(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Wf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Wf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return m(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};n.realtime_={close:u,sendRequest:function(f){P(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);l?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,c=new Z6(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{qn(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),l||(n.repoInfo_.nodeAdmin&&qn(f),u())}}})()}interrupt(n){mn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){mn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],_0(this.interruptReasons_)&&(this.reconnectDelay_=Wf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>p1(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ve(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){mn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){mn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+d1.replace(/\./g,"-")]=1,p0()?n["framework.cordova"]=1:H$()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Pv.getInstance().currentlyOnline();return _0(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class _e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _e(e,n)}}class Fv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new _e(So,e),i=new _e(So,n);return 0!==this.compare(r,i)}minPost(){return _e.MIN}}class l5 extends Fv{static get __EMPTY_NODE(){return Lv}static set __EMPTY_NODE(e){Lv=e}compare(e,n){return tl(e.name,n.name)}isDefinedOn(e){throw bc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _e.MIN}maxPost(){return new _e(Os,Lv)}makePost(e,n){return P("string"==typeof e,"KeyIndex indexValue must always be a string."),new _e(e,Lv)}toString(){return".key"}}const Qi=new l5;class Vv{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let T1,di=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??wr.EMPTY_NODE,this.right=o??wr.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return wr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class wr{constructor(e,n=wr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,di.BLACK,null,null))}remove(e){return new wr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,di.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vv(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vv(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vv(this.root_,null,this.comparator_,!0,e)}}function nDe(t,e){return tl(t.name,e.name)}function D1(t,e){return tl(t,e)}wr.EMPTY_NODE=new class tDe{copy(e,n,r,i,s){return this}insert(e,n,r){return new di(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const c5=function(t){return"number"==typeof t?"number:"+S6(t):"string:"+t},u5=function(t){if(t.isLeafNode()){const e=t.val();P("string"==typeof e||"number"==typeof e||"object"==typeof e&&_s(e,".sv"),"Priority must be a string or number.")}else P(t===T1||t.isEmpty(),"priority of unexpected type.");P(t===T1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let d5,h5,f5,yu=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,P(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),u5(this.priorityNode_)}static set __childrenNodeConstructor(n){d5=n}static get __childrenNodeConstructor(){return d5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return me(n)?this:".priority"===ge(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=ge(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(P(".priority"!==i||1===xo(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+c5(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?S6(this.value_):this.value_,this.lazyHash_=C6(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(P(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return P(s>=0,"Unknown leaf type: "+r),P(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const rt=new class oDe extends Fv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?tl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(Os,new yu("[PRIORITY-POST]",f5))}makePost(e,n){const r=h5(e);return new _e(n,new yu("[PRIORITY-POST]",r))}toString(){return".priority"}},aDe=Math.log(2);class lDe{constructor(e){this.count=parseInt(Math.log(e+1)/aDe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bv=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=t[l],h=n?n(d):d,new di(h,d.node,di.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new di(h,d.node,di.BLACK,p,g)}},a=function(l){let c=null,u=null,d=t.length;const h=function(p,g){const _=d-p,v=d;d-=p;const y=i(_+1,v),T=t[_],O=n?n(T):T;f(new di(O,T.node,g,null,y))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));g?h(_,di.BLACK):(h(_,di.BLACK),h(_,di.RED))}return u}(new lDe(t.length));return new wr(r||e,a)};let S1;const vu={};class Ps{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return P(vu&&rt,"ChildrenNode.ts has not been loaded"),S1=S1||new Ps({".priority":vu},{".priority":rt}),S1}get(e){const n=Ec(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wr?n:null}hasIndex(e){return _s(this.indexSet_,e.toString())}addIndex(e,n){P(e!==Qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(_e.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Bv(r,e.getCompare()):vu;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ps(u,c)}addToIndexes(e,n){const r=m_(this.indexes_,(i,s)=>{const o=Ec(this.indexSet_,s);if(P(o,"Missing index implementation for "+s),i===vu){if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(_e.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Bv(a,o.getCompare())}return vu}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new _e(e.name,a))),l.insert(e,e.node)}});return new Ps(r,this.indexSet_)}removeFromIndexes(e,n){const r=m_(this.indexes_,i=>{if(i===vu)return i;{const s=n.get(e.name);return s?i.remove(new _e(e.name,s)):i}});return new Ps(r,this.indexSet_)}}let Kf,ue=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&u5(this.priorityNode_),this.children_.isEmpty()&&P(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kf||(Kf=new t(new wr(D1),null,Ps.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kf}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Kf:r}}getChild(n){const r=ge(n);return null===r?this:this.getImmediateChild(r).getChild(Qe(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(P(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new _e(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Kf:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=ge(n);if(null===i)return r;{P(".priority"!==ge(n)||1===xo(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Qe(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(rt,(a,l)=>{r[a]=l.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+c5(this.getPriority().val())+":"),this.forEachChild(rt,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":C6(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new _e(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new _e(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new _e(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,_e.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,_e.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Yf?-1:0}withIndex(n){if(n===Qi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Qi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(rt),s=r.getIterator(rt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===Qi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Yf=new class cDe extends ue{constructor(){super(new wr(D1),ue.EMPTY_NODE,Ps.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_e,{MIN:{value:new _e(So,ue.EMPTY_NODE)},MAX:{value:new _e(Os,Yf)}}),l5.__EMPTY_NODE=ue.EMPTY_NODE,yu.__childrenNodeConstructor=ue,function rDe(t){T1=t}(Yf),function sDe(t){f5=t}(Yf);const uDe=!0;function It(t,e=null){if(null===t)return ue.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),P(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new yu(t,It(e));if(t instanceof Array||!uDe){let n=ue.EMPTY_NODE;return _n(t,(r,i)=>{if(_s(t,r)&&"."!==r.substring(0,1)){const s=It(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(It(e))}{const n=[];let r=!1;if(_n(t,(o,a)=>{if("."!==o.substring(0,1)){const l=It(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new _e(o,l)))}}),0===n.length)return ue.EMPTY_NODE;const s=Bv(n,nDe,o=>o.name,D1);if(r){const o=Bv(n,rt.getCompare());return new ue(s,It(e),new Ps({".priority":o},{".priority":rt}))}return new ue(s,It(e),Ps.Default)}}!function iDe(t){h5=t}(It);class A1 extends Fv{constructor(e){super(),this.indexPath_=e,P(!me(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?tl(e.name,n.name):s}makePost(e,n){const r=It(e),i=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new _e(n,i)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,Yf);return new _e(Os,e)}toString(){return qf(this.indexPath_,0).join("/")}}const x1=new class dDe extends Fv{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?tl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,n){const r=It(e);return new _e(n,r)}toString(){return".value"}};function p5(t){return{type:"value",snapshotNode:t}}function wu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Qf(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class M1{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){P(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Qf(n,a)):P(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(wu(n,r)):o.trackChildChange(Xf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(rt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Qf(i,s))}),n.isLeafNode()||n.forEachChild(rt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Xf(i,s,o))}else r.trackChildChange(wu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Zf{constructor(e){this.indexedFilter_=new M1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zf.getStartPost_(e),this.endPost_=Zf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new _e(n,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ue.EMPTY_NODE);const s=this;return n.forEachChild(rt,(o,a)=>{s.matches(new _e(o,a))||(i=i.updateImmediateChild(o,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class fDe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Zf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new _e(n,r))||(r=ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ue.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;i=ue.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=n.withIndex(this.index_),i=i.updatePriority(ue.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;P(a.numChildren()===this.limit_,"");const l=new _e(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Xf(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Qf(n,d));const g=a.updateImmediateChild(n,ue.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(s?.trackChildChange(wu(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}return r.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(Qf(c.name,c.node)),s.trackChildChange(wu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,ue.EMPTY_NODE)):e}}class R1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return P(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return P(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:So}hasEnd(){return this.endSet_}getIndexEndValue(){return P(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return P(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return P(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new R1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function g5(t){const e={};if(t.isDefault())return e;let n;if(t.index_===rt?n="$priority":t.index_===x1?n="$value":t.index_===Qi?n="$key":(P(t.index_ instanceof A1,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=an(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=an(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+an(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=an(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+an(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function m5(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==rt&&(e.i=t.index_.toString()),e}class jv extends J6{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$f("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(P(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jv.getListenId_(e,r),a={};this.listens_[o]=a;const l=g5(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),Ec(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=jv.getListenId_(e,n);delete this.listens_[r]}get(e){const n=g5(e._queryParams),r=e._path.toString(),i=new fa;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dh(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=uh(a.responseText)}catch{qn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&qn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class vDe{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function $v(){return{value:null,children:new Map}}function bu(t,e,n){if(me(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ge(e);t.children.has(r)||t.children.set(r,$v()),bu(t.children.get(r),e=Qe(e),n)}}function P1(t,e,n){null!==t.value?n(e,t.value):function wDe(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{P1(i,new Ve(e.toString()+"/"+r),n)})}class bDe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_n(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class IDe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new bDe(e);const r=1e4+2e4*Math.random();zf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;_n(e,(i,s)=>{s>0&&_s(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),zf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Xi||{});function V1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Hv{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Xi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(me(this.path)){if(null!=this.affectedTree.value)return P(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ve(e));return new Hv(Ne(),n,this.revert)}}return P(ge(this.path)===e,"operationForChild called for unrelated child."),new Hv(Qe(this.path),this.affectedTree,this.revert)}}class Jf{constructor(e,n){this.source=e,this.path=n,this.type=Xi.LISTEN_COMPLETE}operationForChild(e){return me(this.path)?new Jf(this.source,Ne()):new Jf(this.source,Qe(this.path))}}class il{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Xi.OVERWRITE}operationForChild(e){return me(this.path)?new il(this.source,Ne(),this.snap.getImmediateChild(e)):new il(this.source,Qe(this.path),this.snap)}}class Eu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Xi.MERGE}operationForChild(e){if(me(this.path)){const n=this.children.subtree(new Ve(e));return n.isEmpty()?null:n.value?new il(this.source,Ne(),n.value):new Eu(this.source,Ne(),n)}return P(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Eu(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Mo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class DDe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ep(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>function ADe(t,e,n){if(null==e.childName||null==n.childName)throw bc("Should only compare child_ events.");const r=new _e(e.childName,e.snapshotNode),i=new _e(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),o.forEach(a=>{const l=function SDe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function zv(t,e){return{eventCache:t,serverCache:e}}function tp(t,e,n,r){return zv(new Mo(e,n,r),t.serverCache)}function y5(t,e,n,r){return zv(t.eventCache,new Mo(e,n,r))}function Gv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let B1;class it{constructor(e,n=(()=>(B1||(B1=new wr(h0e)),B1))()){this.value=e,this.children=n}static fromObject(e){let n=new it(null);return _n(e,(r,i)=>{n=n.set(new Ve(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Ne(),value:this.value};if(me(e))return null;{const r=ge(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Qe(e),n);return null!=s?{path:yt(new Ve(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{const n=ge(e),r=this.children.get(n);return null!==r?r.subtree(Qe(e)):new it(null)}}set(e,n){if(me(e))return new it(n,this.children);{const r=ge(e),s=(this.children.get(r)||new it(null)).set(Qe(e),n),o=this.children.insert(r,s);return new it(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new it(null):new it(null,this.children);{const n=ge(e),r=this.children.get(n);if(r){const i=r.remove(Qe(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new it(null):new it(this.value,s)}return this}}get(e){if(me(e))return this.value;{const n=ge(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(me(e))return n;{const r=ge(e),s=(this.children.get(r)||new it(null)).setTree(Qe(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new it(this.value,o)}}fold(e){return this.fold_(Ne(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(yt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ne(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(me(e))return null;{const s=ge(e),o=this.children.get(s);return o?o.findOnPath_(Qe(e),yt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ne(),n)}foreachOnPath_(e,n,r){if(me(e))return this;{this.value&&r(n,this.value);const i=ge(e),s=this.children.get(i);return s?s.foreachOnPath_(Qe(e),yt(n,i),r):new it(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(yt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class hi{constructor(e){this.writeTree_=e}static empty(){return new hi(new it(null))}}function np(t,e,n){if(me(e))return new hi(new it(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=sr(i,e);return s=s.updateChild(o,n),new hi(t.writeTree_.set(i,s))}{const i=new it(n),s=t.writeTree_.setTree(e,i);return new hi(s)}}}function U1(t,e,n){let r=t;return _n(n,(i,s)=>{r=np(r,yt(e,i),s)}),r}function v5(t,e){if(me(e))return hi.empty();{const n=t.writeTree_.setTree(e,new it(null));return new hi(n)}}function j1(t,e){return null!=ol(t,e)}function ol(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(sr(n.path,e)):null}function w5(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(rt,(r,i)=>{e.push(new _e(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new _e(r,i.value))}),e}function Ro(t,e){if(me(e))return t;{const n=ol(t,e);return new hi(null!=n?new it(n):t.writeTree_.subtree(e))}}function $1(t){return t.writeTree_.isEmpty()}function Cu(t,e){return b5(Ne(),t.writeTree_,e)}function b5(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(P(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=b5(yt(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(yt(t,".priority"),r)),n}}function qv(t,e){return T5(e,t)}function ODe(t,e){if(t.snap)return Yr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yr(yt(t.path,n),e))return!0;return!1}function FDe(t){return t.visible}function E5(t,e,n){let r=hi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Yr(n,o)?(a=sr(n,o),r=np(r,a,s.snap)):Yr(o,n)&&(a=sr(o,n),r=np(r,Ne(),s.snap.getChild(a)));else{if(!s.children)throw bc("WriteRecord should have .snap or .children");if(Yr(n,o))a=sr(n,o),r=U1(r,a,s.children);else if(Yr(o,n))if(a=sr(o,n),me(a))r=U1(r,Ne(),s.children);else{const l=Ec(s.children,ge(a));if(l){const c=l.getChild(Qe(a));r=np(r,Ne(),c)}}}}}return r}function C5(t,e,n,r,i){if(r||i){const s=Ro(t.visibleWrites,e);return!i&&$1(s)?n:i||null!=n||j1(s,Ne())?Cu(E5(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Yr(c.path,e)||Yr(e,c.path))},e),n||ue.EMPTY_NODE):null}{const s=ol(t.visibleWrites,e);if(null!=s)return s;{const o=Ro(t.visibleWrites,e);return $1(o)?n:null!=n||j1(o,Ne())?Cu(o,n||ue.EMPTY_NODE):null}}}function Wv(t,e,n,r){return C5(t.writeTree,t.treePath,e,n,r)}function H1(t,e){return function LDe(t,e,n){let r=ue.EMPTY_NODE;const i=ol(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(rt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ro(t.visibleWrites,e);return n.forEachChild(rt,(o,a)=>{const l=Cu(Ro(s,new Ve(o)),a);r=r.updateImmediateChild(o,l)}),w5(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return w5(Ro(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function I5(t,e,n,r){return function VDe(t,e,n,r,i){P(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=yt(e,n);if(j1(t.visibleWrites,s))return null;{const o=Ro(t.visibleWrites,s);return $1(o)?i.getChild(n):Cu(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Kv(t,e){return function UDe(t,e){return ol(t.visibleWrites,e)}(t.writeTree,yt(t.treePath,e))}function z1(t,e,n){return function BDe(t,e,n,r){const i=yt(e,n),s=ol(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Cu(Ro(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function D5(t,e){return T5(yt(t.treePath,e),t.writeTree)}function T5(t,e){return{treePath:t,writeTree:e}}class zDe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;P("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),P(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Xf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,Qf(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,wu(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw bc("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Xf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const S5=new class GDe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class G1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Mo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return z1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sl(this.viewCache_),s=function HDe(t,e,n,r,i,s){return function jDe(t,e,n,r,i,s,o){let a;const l=Ro(t.visibleWrites,e),c=ol(l,Ne());if(null!=c)a=c;else{if(null==n)return[];a=Cu(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function A5(t,e,n,r,i,s){const o=e.eventCache;if(null!=Kv(r,n))return e;{let a,l;if(me(n))if(P(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=sl(e),d=H1(r,c instanceof ue?c:ue.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Wv(r,sl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ge(n);if(".priority"===c){P(1===xo(n),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=I5(r,n,u,l);a=null!=d?t.filter.updatePriority(u,d):o.getNode()}else{const u=Qe(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=I5(r,n,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=z1(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return tp(e,a,o.isFullyInitialized()||me(n),t.filter.filtersNodes())}}function Yv(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(me(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ge(n);if(!l.isCompleteForPath(n)&&xo(n)>1)return e;const p=Qe(n),_=l.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?u.updatePriority(l.getNode(),_):u.updateChild(l.getNode(),f,_,p,S5,null)}const d=y5(e,c,l.isFullyInitialized()||me(n),u.filtersNodes());return A5(t,d,n,i,new G1(i,d,s),a)}function q1(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new G1(i,e,s);if(me(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=tp(e,c,!0,t.filter.filtersNodes());else{const d=ge(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),l=tp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Qe(n),f=a.getNode().getImmediateChild(d);let p;if(me(h))p=r;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===E1(h)&&g.getChild(r5(h)).isEmpty()?g:g.updateChild(h,r):ue.EMPTY_NODE}l=f.equals(p)?e:tp(e,t.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function x5(t,e){return t.eventCache.isCompleteForChild(e)}function M5(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function W1(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=me(n)?r:new it(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=M5(0,e.serverCache.getNode().getImmediateChild(d),h);l=Yv(t,l,new Ve(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const g=M5(0,e.serverCache.getNode().getImmediateChild(d),h);l=Yv(t,l,new Ve(d),g,i,s,o,a)}}),l}class eTe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new M1(r.getIndex()),s=function pDe(t){return t.loadsAllData()?new M1(t.getIndex()):t.hasLimit()?new fDe(t):new Zf(t)}(r);this.processor_=function qDe(t){return{filter:t}}(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),u=new Mo(l,o.isFullyInitialized(),i.filtersNodes()),d=new Mo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=zv(d,u),this.eventGenerator_=new DDe(this.query_)}get query(){return this.query_}}function rTe(t,e){const n=sl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!me(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function R5(t){return 0===t.eventRegistrations_.length}function k5(t,e,n){const r=[];if(n){P(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}else i.push(o)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function N5(t,e,n,r){e.type===Xi.MERGE&&null!==e.source.queryId&&(P(sl(t.viewCache_),"We should always have a full cache before handling merges"),P(Gv(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function KDe(t,e,n,r,i){const s=new zDe;let o,a;if(n.type===Xi.OVERWRITE){const c=n;c.source.fromUser?o=q1(t,e,c.path,c.snap,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!me(c.path),o=Yv(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Xi.MERGE){const c=n;c.source.fromUser?o=function QDe(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=yt(n,l);x5(e,ge(u))&&(a=q1(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=yt(n,l);x5(e,ge(u))||(a=q1(t,a,u,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=W1(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Xi.ACK_USER_WRITE){const c=n;o=c.revert?function JDe(t,e,n,r,i,s){let o;if(null!=Kv(r,n))return e;{const a=new G1(r,e,i),l=e.eventCache.getNode();let c;if(me(n)||".priority"===ge(n)){let u;if(e.serverCache.isFullyInitialized())u=Wv(r,sl(e));else{const d=e.serverCache.getNode();P(d instanceof ue,"serverChildren would be complete if leaf node"),u=H1(r,d)}c=t.filter.updateFullNode(l,u,s)}else{const u=ge(n);let d=z1(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?t.filter.updateChild(l,u,d,Qe(n),a,s):e.eventCache.getNode().hasChild(u)?t.filter.updateChild(l,u,ue.EMPTY_NODE,Qe(n),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Wv(r,sl(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Kv(r,Ne()),tp(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function XDe(t,e,n,r,i,s,o){if(null!=Kv(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(me(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Yv(t,e,n,l.getNode().getChild(n),i,s,a,o);if(me(n)){let c=new it(null);return l.getNode().forEachChild(Qi,(u,d)=>{c=c.set(new Ve(u),d)}),W1(t,e,n,c,i,s,a,o)}return e}{let c=new it(null);return r.foreach((u,d)=>{const h=yt(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),W1(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Xi.LISTEN_COMPLETE)throw bc("Unknown operation type: "+n.type);o=function ZDe(t,e,n,r,i){const s=e.serverCache;return A5(t,y5(e,s.getNode(),s.isFullyInitialized()||me(n),s.isFiltered()),n,r,S5,i)}(t,e,n.path,r,s)}const l=s.getChanges();return function YDe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(p5(Gv(e)))}}(e,o,l),{viewCache:o,changes:l}}(t.processor_,i,e,n,r);return function WDe(t,e){P(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),P(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),P(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,O5(t,s.changes,s.viewCache.eventCache.getNode(),null)}function O5(t,e,n,r){return function TDe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function hDe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),ep(t,i,"child_removed",e,r,n),ep(t,i,"child_added",e,r,n),ep(t,i,"child_moved",s,r,n),ep(t,i,"child_changed",e,r,n),ep(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let Qv,Zv;class P5{constructor(){this.views=new Map}}function K1(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return P(null!=s,"SyncTree gave us an op for an invalid query."),N5(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(N5(o,e,n,r));return s}}function cTe(t,e,n,r,i,s){const o=function F5(t,e,n,r,i){const o=t.views.get(e._queryIdentifier);if(!o){let a=Wv(n,i?r:null),l=!1;a?l=!0:r instanceof ue?(a=H1(n,r),l=!1):(a=ue.EMPTY_NODE,l=!1);const c=zv(new Mo(a,l,!1),new Mo(r,i,!1));return new eTe(e,c)}return o}(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function iTe(t,e){t.eventRegistrations_.push(e)}(o,n),function sTe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rt,(s,o)=>{r.push(wu(s,o))}),n.isFullyInitialized()&&r.push(p5(n.getNode())),O5(t,r,n.getNode(),e)}(o,n)}function L5(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ko(t,e){let n=null;for(const r of t.views.values())n=n||rTe(r,e);return n}function V5(t,e){return e._queryParams.loadsAllData()?Xv(t):t.views.get(e._queryIdentifier)}function B5(t,e){return null!=V5(t,e)}function No(t){return null!=Xv(t)}function Xv(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let fTe=1;class U5{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=function $De(){return{visibleWrites:hi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Y1(t,e,n,r,i){return function MDe(t,e,n,r,i){P(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=np(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Iu(t,new il({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Oo(t,e,n=!1){const r=function kDe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function NDe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);P(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ODe(a,r.path)?i=!1:Yr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function PDe(t){t.visibleWrites=E5(t.allWrites,FDe,Ne()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=v5(t.visibleWrites,r.path):_n(r.children,l=>{t.visibleWrites=v5(t.visibleWrites,yt(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let s=new it(null);return null!=r.snap?s=s.set(Ne(),!0):_n(r.children,o=>{s=s.set(new Ve(o),!0)}),Iu(t,new Hv(r.path,s,n))}return[]}function rp(t,e,n){return Iu(t,new il({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jv(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||B5(o,e))){const l=function uTe(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=No(t);if("default"===i)for(const[l,c]of t.views.entries())o=o.concat(k5(c,n,r)),R5(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(k5(l,n,r)),R5(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!No(t)&&s.push(new(function aTe(){return P(Qv,"Reference.ts has not been loaded"),Qv}())(e._repo,e._path)),{removed:s,events:o}}(o,e,n,r);(function lTe(t){return 0===t.views.size})(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=t.syncPointTree_.findOnPath(s,(h,f)=>No(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function wTe(t){return t.fold((e,n,r)=>{if(n&&No(n))return[Xv(n)];{let i=[];return n&&(i=L5(n)),_n(r,(s,o)=>{i=i.concat(o)}),i}})}(h);for(let p=0;p<f.length;++p){const g=f[p],_=g.query,v=z5(t,g);t.listenProvider_.startListening(sp(_),ip(t,_),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(sp(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(tw(h));t.listenProvider_.stopListening(sp(h),f)}))}!function bTe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=tw(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}(t,c)}return a}function Q1(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=sr(h,i);s=s||ko(f,p),o=o||No(f)});let l,a=t.syncPointTree_.get(i);a?(o=o||No(a),s=s||ko(a,Ne())):(a=new P5,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const g=ko(p,Ne());g&&(s=s.updateImmediateChild(f,g))}));const c=B5(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=tw(e);P(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function ETe(){return fTe++}();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let d=cTe(a,e,n,qv(t.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const h=V5(a,e);d=d.concat(function CTe(t,e,n){const r=e._path,i=ip(t,e),s=z5(t,n),o=t.listenProvider_.startListening(sp(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)P(!No(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!me(c)&&u&&No(u))return[Xv(u).query];{let h=[];return u&&(h=h.concat(L5(u).map(f=>f.query))),_n(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(sp(u),ip(t,u))}}return o}(t,e,h))}return d}function ew(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=ko(a,sr(o,e));if(c)return c});return C5(i,e,s,n,!0)}function Iu(t,e){return $5(e,t.syncPointTree_,null,qv(t.pendingWriteTree_,Ne()))}function $5(t,e,n,r){if(me(t.path))return H5(t,e,n,r);{const i=e.get(Ne());null==n&&null!=i&&(n=ko(i,Ne()));let s=[];const o=ge(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=D5(r,o);s=s.concat($5(a,l,c,u))}return i&&(s=s.concat(K1(i,t,r,n))),s}}function H5(t,e,n,r){const i=e.get(Ne());null==n&&null!=i&&(n=ko(i,Ne()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=D5(r,o),u=t.operationForChild(o);u&&(s=s.concat(H5(u,a,l,c)))}),i&&(s=s.concat(K1(i,t,r,n))),s}function z5(t,e){const n=e.query,r=ip(t,n);return{hashFn:()=>(function tTe(t){return t.viewCache_.serverCache.getNode()}(e)||ue.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _Te(t,e,n){const r=X1(t,n);if(r){const i=Z1(r),s=i.path,o=i.queryId,a=sr(s,e);return J1(t,s,new Jf(V1(o),a))}return[]}(t,n._path,r):function mTe(t,e){return Iu(t,new Jf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const s=function g0e(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return Jv(t,n,null,s)}}}}function ip(t,e){const n=tw(e);return t.queryToTagMap.get(n)}function tw(t){return t._path.toString()+"$"+t._queryIdentifier}function X1(t,e){return t.tagToQueryMap.get(e)}function Z1(t){const e=t.indexOf("$");return P(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ve(t.substr(0,e))}}function J1(t,e,n){const r=t.syncPointTree_.get(e);return P(r,"Missing sync point for query tag that we're tracking"),K1(r,n,qv(t.pendingWriteTree_,e),null)}function sp(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function hTe(){return P(Zv,"Reference.ts has not been loaded"),Zv}())(t._repo,t._path):t}class ek{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ek(n)}node(){return this.node_}}class tk{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=yt(this.path_,e);return new tk(this.syncTree_,n)}node(){return ew(this.syncTree_,this.path_)}}const ITe=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},G5=function(t,e,n){return t&&"object"==typeof t?(P(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?DTe(t[".sv"],e,n):"object"==typeof t[".sv"]?TTe(t[".sv"],e):void P(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},DTe=function(t,e,n){if("timestamp"===t)return n.timestamp;P(!1,"Unexpected server value: "+t)},TTe=function(t,e,n){t.hasOwnProperty("increment")||P(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&P(!1,"Unexpected increment value: "+r);const i=e.node();if(P(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},q5=function(t,e,n,r){return rk(e,new tk(n,t),r)},nk=function(t,e,n){return rk(t,new ek(e),n)};function rk(t,e,n){const r=t.getPriority().val(),i=G5(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=G5(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new yu(a,It(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new yu(i))),o.forEachChild(rt,(a,l)=>{const c=rk(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class ik{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function nw(t,e){let n=e instanceof Ve?e:new Ve(e),r=t,i=ge(n);for(;null!==i;){const s=Ec(r.node.children,i)||{children:{},childCount:0};r=new ik(i,r,s),n=Qe(n),i=ge(n)}return r}function al(t){return t.node.value}function sk(t,e){t.node.value=e,ok(t)}function W5(t){return t.node.childCount>0}function rw(t,e){_n(t.node.children,(n,r)=>{e(new ik(n,t,r))})}function K5(t,e,n,r){n&&!r&&e(t),rw(t,i=>{K5(i,e,!0,r)}),n&&r&&e(t)}function op(t){return new Ve(null===t.parent?t.name:op(t.parent)+"/"+t.name)}function ok(t){null!==t.parent&&function xTe(t,e,n){const r=function STe(t){return void 0===al(t)&&!W5(t)}(n),i=_s(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ok(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,ok(t))}(t.parent,t.name,t)}const MTe=/[\[\].#$\/\u0000-\u001F\u007F]/,RTe=/[\[\].#$\u0000-\u001F\u007F]/,ak=10485760,iw=function(t){return"string"==typeof t&&0!==t.length&&!MTe.test(t)},Y5=function(t){return"string"==typeof t&&0!==t.length&&!RTe.test(t)},lp=function(t,e,n){const r=n instanceof Ve?new K0e(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nl(r));if("function"==typeof e)throw new Error(t+"contains a function "+nl(r)+" with contents = "+e.toString());if(kv(e))throw new Error(t+"contains "+e.toString()+" "+nl(r));if("string"==typeof e&&e.length>ak/3&&y_(e)>ak)throw new Error(t+"contains a string greater than "+ak+" utf8 bytes "+nl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(_n(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!iw(o)))throw new Error(t+" contains an invalid key ("+o+") "+nl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Y0e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=y_(e),s5(t)})(r,o),lp(t,a,r),function Q0e(t){const e=t.parts_.pop();t.byteLength_-=y_(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nl(r)+" in addition to actual children.")}},ck=function(t,e,n,r){if(!(r&&void 0===n||Y5(n)))throw new Error(Cc(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},OTe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ck(t,e,n,r)};class PTe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sw(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!C1(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Z5(t,e,n){sw(t,n),J5(t,r=>C1(r,e))}function Or(t,e,n){sw(t,n),J5(t,r=>Yr(r,e)||Yr(e,r))}function J5(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(FTe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function FTe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();el&&mn("event: "+n.toString()),mu(r)}}}const LTe=25;class VTe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PTe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$v(),this.transactionQueueTree_=new ik,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function t9(t){const n=t.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function up(t){return ITe({timestamp:t9(t)})}function n9(t,e,n,r,i){t.dataUpdateCount++;const s=new Ve(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=m_(n,c=>It(c));o=function yTe(t,e,n,r){const i=X1(t,r);if(i){const s=Z1(i),o=s.path,a=s.queryId,l=sr(o,e),c=it.fromObject(n);return J1(t,o,new Eu(V1(a),l,c))}return[]}(t.serverSyncTree_,s,l,i)}else{const l=It(n);o=function j5(t,e,n,r){const i=X1(t,r);if(null!=i){const s=Z1(i),o=s.path,a=s.queryId,l=sr(o,e);return J1(t,o,new il(V1(a),l,n))}return[]}(t.serverSyncTree_,s,l,i)}else if(r){const l=m_(n,c=>It(c));o=function gTe(t,e,n){const r=it.fromObject(n);return Iu(t,new Eu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{const l=It(n);o=rp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Tu(t,s)),Or(t.eventQueue_,a,o)}function r9(t,e){uk(t,"connected",e),!1===e&&function HTe(t){Du(t,"onDisconnectEvents");const e=up(t),n=$v();P1(t.onDisconnect_,Ne(),(i,s)=>{const o=q5(i,s,t.serverSyncTree_,e);bu(n,i,o)});let r=[];P1(n,Ne(),(i,s)=>{r=r.concat(rp(t.serverSyncTree_,i,s));const o=pk(t,i);Tu(t,o)}),t.onDisconnect_=$v(),Or(t.eventQueue_,Ne(),r)}(t)}function uk(t,e,n){const r=new Ve("/.info/"+e),i=It(n);t.infoData_.updateSnapshot(r,i);const s=rp(t.infoSyncTree_,r,i);Or(t.eventQueue_,r,s)}function ow(t){return t.nextWriteId_++}function dk(t,e,n,r,i){Du(t,"set",{path:e.toString(),value:n,priority:r});const s=up(t),o=It(n,r),a=ew(t.serverSyncTree_,e),l=nk(o,a,s),c=ow(t),u=Y1(t.serverSyncTree_,e,l,c,!0);sw(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||qn("set at "+e+" failed: "+h);const g=Oo(t.serverSyncTree_,c,!p);Or(t.eventQueue_,e,g),function Po(t,e,n,r){e&&mu(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}(0,i,h,f)});const d=pk(t,e);Tu(t,d),Or(t.eventQueue_,d,[])}function hk(t,e,n){let r;r=".info"===ge(e._path)?Jv(t.infoSyncTree_,e,n):Jv(t.serverSyncTree_,e,n),Z5(t.eventQueue_,e._path,r)}function Du(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),mn(n,...e)}function fk(t,e,n){return ew(t.serverSyncTree_,e,n)||ue.EMPTY_NODE}function aw(t,e=t.transactionQueueTree_){if(e||lw(t,e),al(e)){const n=a9(t,e);P(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function QTe(t,e,n){const r=n.map(c=>c.currentWriteId),i=fk(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];P(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=sr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Du(t,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Oo(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();lw(t,nw(t.transactionQueueTree_,e)),aw(t,t.transactionQueueTree_),Or(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)mu(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{qn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Tu(t,e)}},o)}(t,op(e),n)}else W5(e)&&rw(e,n=>{aw(t,n)})}function Tu(t,e){const n=o9(t,e),r=op(n);return function XTe(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=sr(n,l.path);let d,u=!1;if(P(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(Oo(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=LTe)u=!0,d="maxretry",i=i.concat(Oo(t.serverSyncTree_,l.currentWriteId,!0));else{const h=fk(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){lp("transaction failed: Data returned ",f,l.path);let p=It(f);"object"==typeof f&&null!=f&&_s(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=l.currentWriteId,v=up(t),y=nk(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=ow(t),o.splice(o.indexOf(_),1),i=i.concat(Y1(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Oo(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(Oo(t.serverSyncTree_,l.currentWriteId,!0))}Or(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}lw(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)mu(r[a]);aw(t,t.transactionQueueTree_)}(t,a9(t,n),r),r}function o9(t,e){let n,r=t.transactionQueueTree_;for(n=ge(e);null!==n&&void 0===al(r);)r=nw(r,n),n=ge(e=Qe(e));return r}function a9(t,e){const n=[];return l9(t,e,n),n.sort((r,i)=>r.order-i.order),n}function l9(t,e,n){const r=al(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rw(e,i=>{l9(t,i,n)})}function lw(t,e){const n=al(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,sk(e,n.length>0?n:void 0)}rw(e,r=>{lw(t,r)})}function pk(t,e){const n=op(o9(t,e)),r=nw(t.transactionQueueTree_,e);return function ATe(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{gk(t,i)}),gk(t,r),K5(r,i=>{gk(t,i)}),n}function gk(t,e){const n=al(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(P(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(P(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Oo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?sk(e,void 0):n.length=s+1,Or(t.eventQueue_,op(e),i);for(let o=0;o<r.length;o++)mu(r[o])}}const mk=function(t,e){const n=eSe(t),r=n.namespace;return"firebase.com"===n.domain&&Yi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new m1(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ve(n.pathString)}},eSe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");-1===u&&(u=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=function ZTe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(u,d)));const h=function JTe(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class u9{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+an(this.snapshot.exportVal())}}class d9{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _k{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return P(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Pr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:E1(this._path)}get ref(){return new fi(this._repo,this._path)}get _queryIdentifier(){const e=m5(this._queryParams),n=p1(e);return"{}"===n?"default":n}get _queryObject(){return m5(this._queryParams)}isEqual(e){if(!((e=Ye(e))instanceof Pr))return!1;const n=this._repo===e._repo,r=C1(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function q0e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class fi extends Pr{constructor(e,n){super(e,n,new R1,!1)}get parent(){const e=r5(this._path);return null===e?null:new fi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ll{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ve(e),r=Su(this.ref,e);return new ll(this._node.getChild(n),r,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ll(i,Su(this.ref,r),rt)))}hasChild(e){const n=new Ve(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function h9(t,e){return(t=Ye(t))._checkNotDeleted("ref"),void 0!==e?Su(t._root,e):t._root}function Su(t,e){return null===ge((t=Ye(t))._path)?OTe("child","path",e,!1):ck("child","path",e,!1),new fi(t._repo,yt(t._path,e))}function yk(t,e){(function(t,e){if(".info"===ge(e))throw new Error(t+" failed = Can't modify data under /.info/")})("set",(t=Ye(t))._path),function(t,e,n,r){r&&void 0===e||lp(Cc(t,"value"),e,n)}("set",e,t._path,!1);const n=new fa;return dk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class dp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new u9("value",this,new ll(e.snapshotNode,new fi(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new d9(this,e,n):null}matches(e){return e instanceof dp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dw{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new d9(this,e,n):null}createEvent(e,n){P(null!=e.childName,"Child events should have a childName.");const r=Su(new fi(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new u9(e.type,this,new ll(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function f9(t,e,n,r){return function hp(t,e,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=n,c=(u,d)=>{hk(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new _k(n,s||void 0),a="value"===e?new dp(o):new dw(e,o);return function WTe(t,e,n){let r;r=".info"===ge(e._path)?Q1(t.infoSyncTree_,e,n):Q1(t.serverSyncTree_,e,n),Z5(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>hk(t._repo,t,a)}(t,"value",e,n,r)}(function oTe(t){P(!Qv,"__referenceConstructor has already been defined"),Qv=t})(fi),function dTe(t){P(!Zv,"__referenceConstructor has already been defined"),Zv=t}(fi);const vk={};function pSe(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=mk(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=mk(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Gf(Gf.OWNER):new b0e(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Y5(t)}(n))throw new Error(Cc(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),me(o.path)||Yi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function mSe(t,e,n,r){let i=vk[e.name];i||(i={},vk[e.name]=i);let s=i[t.toURLString()];return s&&Yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new VTe(t,false,n,r),i[t.toURLString()]=s,s}(a,t,u,new w0e(t.name,n));return new ySe(d,t)}class ySe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function BTe(t,e,n){if(t.stats_=v1(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new jv(t.repoInfo_,(r,i,s,o)=>{n9(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>r9(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new rl(t.repoInfo_,e,(r,i,s,o)=>{n9(t,r,i,s,o)},r=>{r9(t,r)},r=>{!function UTe(t,e){_n(e,(n,r)=>{uk(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function I0e(t,e){const n=t.toString();return y1[n]||(y1[n]=e()),y1[n]}(t.repoInfo_,()=>new IDe(t.stats_,t.server_)),t.infoData_=new vDe,t.infoSyncTree_=new U5({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=rp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),uk(t,"connected",!1),t.serverSyncTree_=new U5({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Or(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fi(this._repo,Ne())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gSe(t,e){const n=vk[e];(!n||n[t.key]!==t)&&Yi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function s9(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Yi("Cannot call "+e+" on a deleted database.")}}function vSe(t=b_(),e){const n=va(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=B$("database");r&&function wSe(t,e,n,r={}){(t=Ye(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Yi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gf(Gf.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:$$(r.mockUserToken,t.app.options.projectId);s=new Gf(o)}!function fSe(t,e,n,r){t.repoInfo_=new m1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}rl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function bSe(t){(function a0e(t){d1=t})(no),Bn(new Cn("database",(e,{instanceIdentifier:n})=>pSe(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),lt(v6,"0.14.4",t),lt(v6,"0.14.4","esm2017")}();class cl{constructor(e){return e}}const y9="database",wk=new k("angularfire2.database-instances");function TSe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new cl(r)}}const SSe={provide:class ISe{constructor(){return x_(y9)}},deps:[[new Yt,wk]]},ASe={provide:cl,useFactory:function DSe(t,e){const n=A_(y9,t,e);return n&&new cl(n)},deps:[[new Yt,wk],Ta]};let xSe=(()=>{class t{constructor(){lt("angularfire",mh.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[ASe,SSe]}),t})();function MSe(t,...e){return{ngModule:xSe,providers:[{provide:wk,useFactory:TSe(t),multi:!0,deps:[de,wt,M_,R_,[new Yt,ex],[new Yt,B_],...e]}]}}const RSe=At(vSe,!0),kSe=At(f9,!0),bk=At(h9,!0),v9=At(yk,!0);function NSe(t,e){if(1&t&&(D(0,"div")(1,"p"),V(2),I()()),2&t){const n=e.$implicit,r=Q();N(1),PE("text-align",r.setalling(n.jug)),N(1),bt(n.msg)}}let Ek=(()=>{var t;class e{constructor(r,i){this.db=r,this.rout=i,this.email=localStorage.getItem("email"),this.jug=[],this.jugador=1,this.lastline="",this.msg="",this.chat=localStorage.getItem("chatID")}ngOnInit(){const r=bk(this.db,"/CHATS/"+this.chat+"/msgs");this.jug[0]=localStorage.getItem("jug1"),this.jug[1]=localStorage.getItem("jug2"),this.jug[1]==localStorage.getItem("email")&&(this.jugador=2),kSe(r,i=>{const s=Object.values(i.val());this.chats=s.reverse(),this.lastline=this.chats.length})}setalling(r){return 1==r?"right":"left"}goback(){this.rout.navigate(["/battle"])}chatsend(){const r=bk(this.db,`/CHATS/${localStorage.getItem("chatID")}/msgs/${this.lastline}`);v9(r,{jug:this.jugador,msg:this.msg}),this.msg=""}}return(t=e).\u0275fac=function(r){return new(r||t)(w(cl),w(sn))},t.\u0275cmp=Tt({type:t,selectors:[["app-chatbox"]],decls:11,vars:3,consts:[[2,"align-items","center","justify-content","center","display","block"],["type","text","placeholder","escriba mensaje",3,"ngModel","ngModelChange"],[3,"click"],[1,"Subcards",2,"overflow-y","scroll","margin-top","40px"],[4,"ngFor","ngForOf"],[2,"align-items","center","justify-content","center",3,"click"]],template:function(r,i){1&r&&(D(0,"div",0)(1,"h1"),V(2),I(),D(3,"div")(4,"input",1),oe("ngModelChange",function(o){return i.msg=o}),I(),D(5,"button",2),oe("click",function(){return i.chatsend()}),V(6,"Enviar"),I()(),D(7,"div",3),we(8,NSe,3,3,"div",4),I()(),D(9,"button",5),oe("click",function(){return i.goback()}),V(10,"VOLVER"),I()),2&r&&(N(2),bt(i.jug[0]==i.email?i.jug[1]:i.jug[0]),N(2),K("ngModel",i.msg),N(4),K("ngForOf",i.chats))},dependencies:[zr,oc,fm,Cm]}),e})();function OSe(t,e){1&t&&(D(0,"button",2),V(1,"Partidas"),I())}function PSe(t,e){if(1&t&&(D(0,"div",5),at(1,"app-trsinfo",7),I()),2&t){const n=Q();N(1),K("tropa",n.troopselected)}}function FSe(t,e){if(1&t&&(D(0,"div",5),at(1,"app-trsinv",7),I()),2&t){const n=Q();N(1),K("tropa",n.troopselected)}}function LSe(t,e){1&t&&(D(0,"div",10),at(1,"app-chatbox"),I())}let VSe=(()=>{var t;class e{constructor(r,i,s){this.sto=r,this.rout=i,this.diag=s,this.troopselected=null,this.Paritda=!1,this.PopOpen=!0,this.changuesolicitado=void 0,this.solicAcept=[],this.activas=[],this.BP=0}ngOnInit(){this.sto.getactivetroops().subscribe(r=>{this.activas=r,this.BP=this.getpointbattles()}),this.sto.snapsol2(localStorage.getItem("email")).subscribe(r=>this.solicAcept=r),setInterval(()=>{this.solicAcept.length>0&&this.PopOpen&&this.Openpopup()},3e3)}troopSel(r){this.troopselected=r}getpointbattles(){var r=0;if(this.activas.length>0)for(let i of this.activas)r+=i.BP;return r}navigation(){1==this.Paritda&&this.rout.navigate(["/game"])}chattrue(){return!!localStorage.getItem("chatID")}Openpopup(){this.PopOpen=!1,this.diag.open(RIe,{width:"400px",height:"auto",disableClose:!0,data:{solicitud:this.solicAcept,activas:this.activas,bp:this.BP}}).afterClosed().subscribe(i=>{console.log("El popup se cerr\xf3."+i)})}gochat(){this.rout.navigate(["/battle"])}opensobre(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn),w(sn),w(u_))},t.\u0275cmp=Tt({type:t,selectors:[["app-main"]],decls:22,vars:6,consts:[[1,"headed"],[1,"buttonc",3,"click"],[1,"buttonc"],["class","buttonc",4,"ngIf"],[1,"Cards"],[1,"Subcards"],[3,"tropaselect"],[3,"tropa"],[3,"tropasactivas","tropaselect"],["class","Subcards",4,"ngIf"],[1,"Subcards",2,"overflow","scroll"],["class","Subcards","style","overflow: scroll",4,"ngIf"]],template:function(r,i){1&r&&(D(0,"div",0)(1,"button",1),oe("click",function(){return i.gochat()}),V(2,"Battlenet"),I(),D(3,"button",2),V(4,"CHATBOX"),I(),we(5,OSe,2,0,"button",3),I(),D(6,"div",4)(7,"div",5),at(8,"app-sobres"),I(),D(9,"div",5)(10,"app-tropas",6),oe("tropaselect",function(o){return i.troopSel(o)}),I()(),D(11,"div",5),at(12,"app-equipo",7),I(),D(13,"div",5),at(14,"app-skills"),I(),D(15,"div",5)(16,"app-activas",8),oe("tropaselect",function(o){return i.troopSel(o)}),I()(),we(17,PSe,2,1,"div",9),we(18,FSe,2,1,"div",9),D(19,"div",10),at(20,"app-solicitudes"),I(),we(21,LSe,2,0,"div",11),I()),2&r&&(N(5),K("ngIf",i.changuesolicitado),N(7),K("tropa",i.troopselected),N(4),K("tropasactivas",i.activas),N(1),K("ngIf",i.troopselected),N(1),K("ngIf",i.troopselected),N(3),K("ngIf",i.chattrue()))},dependencies:[Mi,NIe,FIe,$Ie,GIe,KIe,e0e,t0e,o0e,Ek]}),e})(),BSe=(()=>{var t;class e{constructor(r,i){this.ath=r,this.sto=i}register(r){return nve(this.ath,r.email,r.pass)}login(r){return localStorage.setItem("email",r.email),this.sto.getdocID(r.email),ive(this.ath,r.email,r.pass)}logout(){return localStorage.clear(),sve(this.ath)}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ny),C(Gn))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class hw{}class fw{}class es{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof es?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new es;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof es?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class USe{encodeKey(e){return w9(e)}encodeValue(e){return w9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const $Se=/%(\d[a-f0-9])/gi,HSe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function w9(t){return encodeURIComponent(t).replace($Se,(e,n)=>HSe[n]??e)}function pw(t){return`${t}`}class Lo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new USe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jSe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(pw):[pw(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Lo({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(pw(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pw(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zSe{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function b9(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function E9(t){return typeof Blob<"u"&&t instanceof Blob}function C9(t){return typeof FormData<"u"&&t instanceof FormData}class fp{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function GSe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new es),this.context||(this.context=new zSe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Lo,this.urlWithParams=n}serializeBody(){return null===this.body?null:b9(this.body)||E9(this.body)||C9(this.body)||function qSe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Lo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||C9(this.body)?null:E9(this.body)?this.body.type||null:b9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Lo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new fp(n,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var Au=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Au||{});class Ck{constructor(e,n=200,r="OK"){this.headers=e.headers||new es,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ik extends Ck{constructor(e={}){super(e),this.type=Au.ResponseHeader}clone(e={}){return new Ik({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xu extends Ck{constructor(e={}){super(e),this.type=Au.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new xu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class I9 extends Ck{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Dk(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let D9=(()=>{var t;class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof fp)o=r;else{let c,u;c=s.headers instanceof es?s.headers:new es(s.headers),s.params&&(u=s.params instanceof Lo?s.params:new Lo({fromObject:s.params})),o=new fp(r,i,void 0!==s.body?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const a=Y(o).pipe(lc(c=>this.handler.handle(c)));if(r instanceof fp||"events"===s.observe)return a;const l=a.pipe(rn(c=>c instanceof xu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(ye(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(ye(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(ye(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return l.pipe(ye(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:(new Lo).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Dk(s,i))}post(r,i,s={}){return this.request("POST",r,Dk(s,i))}put(r,i,s={}){return this.request("PUT",r,Dk(s,i))}}return(t=e).\u0275fac=function(r){return new(r||t)(C(hw))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();function A9(t,e){return e(t)}function KSe(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const QSe=new k(""),pp=new k(""),x9=new k("");function XSe(){let t=null;return(e,n)=>{null===t&&(t=($(QSe,{optional:!0})??[]).reduceRight(KSe,A9));const r=$(Hg),i=r.add();return t(e,n).pipe(jd(()=>r.remove(i)))}}let M9=(()=>{var t;class e extends hw{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=$(Hg)}handle(r){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(pp),...this.injector.get(x9,[])]));this.chain=s.reduceRight((o,a)=>function YSe(t,e,n){return(r,i)=>n.runInContext(()=>e(r,s=>t(s,i)))}(o,a,this.injector),A9)}const i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(jd(()=>this.pendingTasks.remove(i)))}}return(t=e).\u0275fac=function(r){return new(r||t)(C(fw),C(Sr))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const tAe=/^\)\]\}',?\n/;let k9=(()=>{var t;class e{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new M(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?qt(i.\u0275loadImpl()):Y(null)).pipe(Qr(()=>new He(o=>{const a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((_,v)=>a.setRequestHeader(_,v.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const _=r.detectContentTypeHeader();null!==_&&a.setRequestHeader("Content-Type",_)}if(r.responseType){const _=r.responseType.toLowerCase();a.responseType="json"!==_?_:"text"}const l=r.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const _=a.statusText||"OK",v=new es(a.getAllResponseHeaders()),y=function nAe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||r.url;return c=new Ik({headers:v,status:a.status,statusText:_,url:y}),c},d=()=>{let{headers:_,status:v,statusText:y,url:T}=u(),O=null;204!==v&&(O=typeof a.response>"u"?a.responseText:a.response),0===v&&(v=O?200:0);let G=v>=200&&v<300;if("json"===r.responseType&&"string"==typeof O){const ne=O;O=O.replace(tAe,"");try{O=""!==O?JSON.parse(O):null}catch(Fe){O=ne,G&&(G=!1,O={error:Fe,text:O})}}G?(o.next(new xu({body:O,headers:_,status:v,statusText:y,url:T||void 0})),o.complete()):o.error(new I9({error:O,headers:_,status:v,statusText:y,url:T||void 0}))},h=_=>{const{url:v}=u(),y=new I9({error:_,status:a.status||0,statusText:a.statusText||"Unknown Error",url:v||void 0});o.error(y)};let f=!1;const p=_=>{f||(o.next(u()),f=!0);let v={type:Au.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(v.total=_.total),"text"===r.responseType&&a.responseText&&(v.partialText=a.responseText),o.next(v)},g=_=>{let v={type:Au.UploadProgress,loaded:_.loaded};_.lengthComputable&&(v.total=_.total),o.next(v)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",p),null!==l&&a.upload&&a.upload.addEventListener("progress",g)),a.send(l),o.next({type:Au.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",p),null!==l&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}}return(t=e).\u0275fac=function(r){return new(r||t)(C(tB))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();const Tk=new k("XSRF_ENABLED"),N9=new k("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),O9=new k("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class P9{}let sAe=(()=>{var t;class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=GV(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return(t=e).\u0275fac=function(r){return new(r||t)(C(ke),C(Ci),C(N9))},t.\u0275prov=F({token:t,factory:t.\u0275fac}),e})();function oAe(t,e){const n=t.url.toLowerCase();if(!$(Tk)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=$(P9).getToken(),i=$(O9);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Vo=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Vo||{});function ul(t,e){return{\u0275kind:t,\u0275providers:e}}function aAe(...t){const e=[D9,k9,M9,{provide:hw,useExisting:M9},{provide:fw,useExisting:k9},{provide:pp,useValue:oAe,multi:!0},{provide:Tk,useValue:!0},{provide:P9,useClass:sAe}];for(const n of t)e.push(...n.\u0275providers);return function jb(t){return{\u0275providers:t}}(e)}const F9=new k("LEGACY_INTERCEPTOR_FN");let cAe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({providers:[aAe(ul(Vo.LegacyInterceptors,[{provide:F9,useFactory:XSe},{provide:pp,useExisting:F9,multi:!0}]))]}),e})(),gAe=(()=>{var t;class e{constructor(r,i){this.http=r,this.db=i}getallchats(r){return this.http.get("https://strong-41d31-default-rtdb.europe-west1.firebasedatabase.app/CHATS/"+r+"/msgs.json")}getchats2(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(C(D9),C(cl))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function mAe(t,e){if(1&t&&(D(0,"div")(1,"p"),V(2),I()()),2&t){const n=e.$implicit;N(2),bt(n.msg)}}function _Ae(t,e){if(1&t&&(D(0,"div"),we(1,mAe,3,1,"div",9),I()),2&t){const n=Q();N(1),K("ngForOf",n.chats)}}let yAe=(()=>{var t;class e{constructor(r,i,s,o,a){this.ath=r,this.sto=i,this.rout=s,this.chat=o,this.db=a,this.forr={email:"",pass:""},this.log=!0,this.chats=[],this.chat1=[],this.formreg=new _m({email:new Em,pass:new Em})}ngOnInit(){}register(){var r=this;this.forr.email=this.formreg.value.email,this.forr.pass=this.formreg.value.pass,this.ath.register(this.forr).then(function(){var i=m(function*(s){s.user.email&&(yield r.sto.createinit(s.user.email),r.log=!0)});return function(s){return i.apply(this,arguments)}}()).catch(i=>console.log(i))}login(){var r=this;return m(function*(){r.forr.email=r.formreg.value.email,r.forr.pass=r.formreg.value.pass,yield r.ath.login(r.forr).then(i=>{r.sto.getdocID(r.forr.email),r.rout.navigate(["/main"]),r.sto.setStatus(!0).then(()=>console.log("User actualizado"))}).catch(i=>{console.log(i)})})()}changueLR(){this.log=!this.log}sub(){this.log?this.login():this.register()}}return(t=e).\u0275fac=function(r){return new(r||t)(w(BSe),w(Gn),w(sn),w(gAe),w(cl))},t.\u0275cmp=Tt({type:t,selectors:[["app-log"]],decls:22,vars:4,consts:[[1,"wrapper"],[1,"titulo"],[3,"formGroup"],["type","text","formControlName","email",1,"form-control"],["type","password","formControlName","pass",1,"form-control"],[3,"click"],[4,"ngIf"],[2,"display","flex","justify-content","center","justify-items","center"],[2,"width","auto",3,"click"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(D(0,"html")(1,"body")(2,"div",0)(3,"div")(4,"h1",1),V(5),I()(),D(6,"form",2)(7,"div")(8,"p"),V(9,"Email"),I(),at(10,"input",3),I(),D(11,"div")(12,"p"),V(13,"password"),I(),at(14,"input",4),I(),D(15,"div")(16,"button",5),oe("click",function(){return i.sub()}),V(17,"enviar"),I()()(),we(18,_Ae,2,1,"div",6),I(),D(19,"div",7)(20,"button",8),oe("click",function(){return i.changueLR()}),V(21),I()()()()),2&r&&(N(5),bt(i.log?"Login":"Register"),N(1),K("formGroup",i.formreg),N(12),K("ngIf",i.chats),N(3),bt(i.log?"Si no estas registrado accede ya":"Si ya estas registrado accede aqui"))},dependencies:[zr,Mi,cU,oc,fm,QB,Im,_I]}),e})(),vAe=(()=>{var t;class e{constructor(r,i,s){this.dia=r,this.sto=i,this.data=s,this.hour=1,this.min=0,this.map="river1",this.email1=localStorage.getItem("email"),this.points=300,this.sol=this.data.email}cerrar(){this.dia.close()}enviar(){var r="";0!=this.hour&&(r+=this.hour+"h"),0!=this.min&&(r+=this.min+"m");const i={Solicitante:localStorage.getItem("email"),Solicitado:this.sol,mapa:"river1",puntosBatalla:this.points,tiempo:r,Status:{Estado:"Pendiente",Acept1:!1,Acept2:!1}};this.sto.enviasol(i),this.dia.close()}}return(t=e).\u0275fac=function(r){return new(r||t)(w(l_),w(Gn),w(c_))},t.\u0275cmp=Tt({type:t,selectors:[["app-poup3"]],decls:19,vars:4,consts:[[2,"height","auto","background-color","grey"],[2,"display","flexbox","justify-content","center","align-items","center","text-justify","auto","background-color","gray"],["src","../../../assets/mapariver1.bmp","alt","river1",2,"width","50px","height","50px","object-fit","cover","z-index","-1"],["type","number","placeholder","puntosBatt","min","300","max","1000",3,"ngModel","ngModelChange"],["type","number","placeholder","Horas","min","0","max","3",3,"ngModel","ngModelChange"],["type","number","placeholder","Minutos","min","0","max","59",3,"ngModel","ngModelChange"],[3,"click"]],template:function(r,i){1&r&&(D(0,"div",0)(1,"div",1)(2,"h2"),V(3),I(),D(4,"p"),V(5,"seleciona mapa"),I(),at(6,"img",2),I(),D(7,"div",1)(8,"p"),V(9,"Puntos de batalla"),I(),D(10,"input",3),oe("ngModelChange",function(o){return i.points=o}),I(),D(11,"p"),V(12,"Tiempo de batalla"),I(),D(13,"input",4),oe("ngModelChange",function(o){return i.hour=o}),I(),D(14,"input",5),oe("ngModelChange",function(o){return i.min=o}),I()(),D(15,"button",6),oe("click",function(){return i.enviar()}),V(16,"Enviar solicitud"),I(),D(17,"button",6),oe("click",function(){return i.cerrar()}),V(18,"Cerrar"),I()()),2&r&&(N(3),Zt(" Solicitud de guerra para ",i.sol," "),N(7),K("ngModel",i.points),N(3),K("ngModel",i.hour),N(1),K("ngModel",i.min))},dependencies:[oc,fI,fm,bI,wI,Cm]}),e})();function wAe(t,e){if(1&t){const n=En();D(0,"button",10),oe("click",function(){st(n);const i=Q().$implicit;return ot(Q().createchat(i.email))}),V(1,"chat"),I()}}function bAe(t,e){if(1&t){const n=En();D(0,"button",10),oe("click",function(){st(n);const i=Q().$implicit;return ot(Q().popupopen(i.email))}),V(1,"jugar"),I()}}const EAe=function(t){return{color:t}};function CAe(t,e){if(1&t&&(D(0,"tr")(1,"td"),V(2),I(),D(3,"td"),V(4),I(),D(5,"td"),V(6),I(),D(7,"td"),V(8),I(),D(9,"td"),V(10),I(),D(11,"td",8),V(12),I(),D(13,"td"),we(14,wAe,2,0,"button",9),I(),D(15,"td"),we(16,bAe,2,0,"button",9),I()()),2&t){const n=e.$implicit,r=Q();N(2),bt(n.email),N(2),bt(n.Helo),N(2),bt(n.Gamesplayed),N(2),bt(n.gamesWon),N(2),bt(n.gameslose),N(1),K("ngStyle",c2(9,EAe,n.Estado?"green":"red")),N(1),bt(n.Estado),N(2),K("ngIf",!r.haschat(n.email)&&n.email!=r.useractivo.email),N(2),K("ngIf",n.Estado&&n.email!=r.useractivo.email)}}function IAe(t,e){if(1&t){const n=En();D(0,"div")(1,"button",12),oe("click",function(){const s=st(n).index;return ot(Q(2).setchat(s))}),V(2),I()()}if(2&t){const n=e.$implicit;N(2),Zt("",n," ")}}function DAe(t,e){if(1&t&&(D(0,"div",11),we(1,IAe,3,1,"div",4),I()),2&t){const n=Q();N(1),K("ngForOf",n.useractivo.chatsp)}}function TAe(t,e){1&t&&(D(0,"div"),at(1,"app-chatbox"),I())}const SAe=[{path:"",pathMatch:"full",redirectTo:"/login"},{path:"main",component:VSe},{path:"login",component:yAe},{path:"game",component:(()=>{var t;class e{constructor(r){this.sto=r,this.troopselected=null,this.board=[],this.tropas=[],this.tropasP=[],this.tropasOB=[],this.turnos=[]}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(w(Gn))},t.\u0275cmp=Tt({type:t,selectors:[["app-game"]],decls:2,vars:0,template:function(r,i){1&r&&(D(0,"p"),V(1,"game works!"),I())}}),e})()},{path:"chat",component:Ek},{path:"battle",component:(()=>{var t;class e{constructor(r,i,s,o){this.db=r,this.sto=i,this.rout=s,this.mat=o,this.users=[],this.batle=[]}haschat(r){return this.useractivo.chats.length>0&&this.useractivo.chatsp.some(i=>i==r)}chattrue(){return!!localStorage.getItem("chatID")}createchat(r){const i=this.sto.clave(),s=bk(this.db,"/CHATS/"+i);v9(s,{data:{jug1:localStorage.getItem("email"),jug2:r},msgs:{0:{jug:1,msg:"hola"}}}).then(o=>console.log("fase database")),this.sto.setchat(localStorage.getItem("email"),r,i).then(o=>console.log("fase firebase"))}ngOnInit(){this.sto.getUsers().subscribe(r=>{this.users=r,this.users&&(this.useractivo=this.users.find(i=>i.email==localStorage.getItem("email")),this.useractivo.chats||(this.useractivo.chats=[],this.useractivo.chatsp=[],this.useractivo.chatsj=[]))})}popupopen(r){this.mat.open(vAe,{width:"400px",height:"auto",disableClose:!0,data:{email:r}}).afterClosed().subscribe(s=>{console.log("El popup se cerr\xf3.")})}setchat(r){localStorage.setItem("chatID",this.useractivo.chats[r]),"jug1"==this.useractivo.chatsj[r]?(localStorage.setItem("jug1",localStorage.getItem("email")),localStorage.setItem("jug2",this.useractivo.chatsp[r])):(localStorage.setItem("jug2",localStorage.getItem("email")),localStorage.setItem("jug1",this.useractivo.chatsp[r]))}setalling(r){return 1==r?"right":"left"}finduser(r){return r.email==localStorage.getItem("email")}goback(){this.rout.navigate(["/main"])}}return(t=e).\u0275fac=function(r){return new(r||t)(w(cl),w(Gn),w(sn),w(u_))},t.\u0275cmp=Tt({type:t,selectors:[["app-batllenet"]],decls:22,vars:3,consts:[[1,"button",3,"click"],[2,"display","flex","align-items","center","justify-content","center","margin-top","130PX"],[1,"tablebat"],["scope","col"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","text-justify","auto","align-items","center"],["class","headed","style","height: 40px;",4,"ngIf"],[4,"ngIf"],[3,"ngStyle"],["class","buttontable",3,"click",4,"ngIf"],[1,"buttontable",3,"click"],[1,"headed",2,"height","40px"],[3,"click"]],template:function(r,i){1&r&&(D(0,"button",0),oe("click",function(){return i.goback()}),V(1,"Atras"),I(),D(2,"div",1)(3,"table",2)(4,"tr")(5,"th",3),V(6," email "),I(),D(7,"th",3),V(8," Helo "),I(),D(9,"th",3),V(10," games "),I(),D(11,"th",3),V(12," Won "),I(),D(13,"th",3),V(14," Lose "),I(),D(15,"th",3),V(16," Activo "),I()(),we(17,CAe,17,11,"tr",4),I()(),D(18,"h1",5),V(19,"CHATS ABIERTOS"),I(),we(20,DAe,2,1,"div",6),we(21,TAe,2,0,"div",7)),2&r&&(N(17),K("ngForOf",i.users),N(3),K("ngIf",i.useractivo),N(1),K("ngIf",i.chattrue()))},dependencies:[zr,Mi,XV,Ek]}),e})()}];let AAe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t}),t.\u0275inj=Ge({imports:[Sj.forRoot(SAe),Sj]}),e})(),xAe=(()=>{var t;class e{constructor(){this.title="shiningwars01"}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Tt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&at(0,"router-outlet")},dependencies:[LI]}),e})();const MAe_firebase={projectId:"strong-41d31",appId:"1:18557698008:web:8becb03aca09f10c893cad",databaseURL:"https://strong-41d31-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"strong-41d31.appspot.com",apiKey:"AIzaSyD5YraE6i8ckG7TRmfAPlrgJ72OvfRA9dw",authDomain:"strong-41d31.firebaseapp.com",messagingSenderId:"18557698008"};let RAe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Ze({type:t,bootstrap:[xAe]}),t.\u0275inj=Ge({imports:[Gie,AAe,yge(()=>vge(MAe_firebase)),tve(()=>rve()),MSe(()=>RSe()),gIe(()=>yIe()),toe,eoe,Cue,cAe]}),e})();Hie().bootstrapModule(RAe).catch(t=>console.error(t))}},Ce=>{Ce(Ce.s=262)}]);